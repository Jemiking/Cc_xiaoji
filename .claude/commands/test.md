测试编写 - 设计测试用例并编写测试代码

Arguments: $ARGUMENTS

## 🧪 测试任务

调用 **tester** agent 设计测试用例、编写测试代码并执行测试。

## 测试目标

**测试内容**: $ARGUMENTS

## 执行流程

我将调用 **tester** agent 执行测试任务:

### 阶段 1: 测试分析

**1.1 理解被测代码**
- 调用 searcher 定位被测试的代码
- 阅读代码理解逻辑
- 分析输入输出和边界条件

**1.2 设计测试用例**
覆盖场景:
- ✅ 正常情况 (Happy Path)
- ✅ 边界条件 (Boundary Cases)
- ✅ 异常情况 (Error Cases)
- ✅ 极端情况 (Edge Cases)

### 阶段 2: 编写测试

**测试类型:**

**单元测试 (Unit Test)**
- 测试单个函数/类的行为
- 快速执行,独立运行
- 使用 mock 隔离依赖
- 覆盖边界条件

**集成测试 (Integration Test)**
- 测试模块间的交互
- 使用真实依赖
- 验证数据流

**端到端测试 (E2E Test)**
- 测试完整用户流程
- 模拟真实用户操作
- 验证业务流程

**测试文件组织:**
- 文件命名: `function.test.ts` 或 `function.spec.ts`
- 遵循项目测试规范
- 使用项目测试框架(Jest/Vitest/Mocha)

### 阶段 3: 测试执行

**运行测试:**
```bash
npm test                    # 运行所有测试
npm test -- --coverage      # 查看覆盖率
npm test -- --watch         # watch 模式
```

**分析结果:**
- 所有测试是否通过?
- 测试覆盖率是否达标?
- 是否有失败的测试?

### 阶段 4: 测试报告

输出:
- 测试用例数和通过率
- 测试覆盖率详情
- 失败测试的修复建议
- 未覆盖代码的补充建议

## 测试原则

**测试金字塔:**
```
      /E2E\      少量端到端测试
     /------\
    /Integration\  适量集成测试
   /------------\
  /  Unit Tests  \ 大量单元测试
 /----------------\
```

**测试质量:**
- ✅ 每个测试只验证一件事
- ✅ 测试名称清晰描述测试内容
- ✅ 使用 AAA 模式 (Arrange-Act-Assert)
- ✅ 测试独立,可并行运行
- ✅ 测试行为而非实现细节

**覆盖率目标:**
- 语句覆盖率: >= 80%
- 分支覆盖率: >= 75%
- 函数覆盖率: >= 90%

## 预期输出

```markdown
## 测试报告

### 测试概述
- 测试文件: [文件名]
- 测试用例数: X
- 通过: Y ✅
- 失败: Z ❌
- 覆盖率: XX%

### 测试结果
[详细的测试结果]

### 覆盖率详情
| File | Statements | Branches | Functions | Lines |
|------|------------|----------|-----------|-------|
| ...  | XX%        | XX%      | XX%       | XX%   |

### 未覆盖代码
[未覆盖的代码位置]

### 建议
- [ ] 修复失败的测试
- [ ] 补充未覆盖代码的测试
- [ ] 添加边界条件测试
```

## 开始测试

现在调用 tester agent 开始编写测试...
