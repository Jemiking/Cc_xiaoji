代码审查 - 多维度质量检查

Arguments: $ARGUMENTS

## ✅ 代码审查任务

调用 **reviewer** agent 审查代码质量、安全性和性能。

## 审查目标

**审查内容**: $ARGUMENTS

## 执行流程

我将调用 **reviewer** agent 执行全面审查:

### 阶段 1: 准备审查

**1.1 理解变更**
- 这次改动的目的是什么?
- 改了哪些文件?
- 影响范围有多大?

**1.2 调研上下文**
- 调用 searcher 查找相关代码
- 调用 analyzer 分析影响
- 了解相关模块的实现方式

### 阶段 2: 执行审查

**审查维度:**

**1. 功能正确性**
- ✅ 逻辑是否正确?
- ✅ 边界条件是否处理?
- ✅ 错误处理是否完善?
- ✅ 是否有潜在的 bug?

**2. 代码质量**
- ✅ 命名是否清晰自解释?
- ✅ 函数是否单一职责?
- ✅ 代码是否易于理解?
- ✅ 是否有重复代码?
- ✅ 注释是否适当?

**3. 性能**
- ✅ 是否有性能瓶颈?
- ✅ 是否有不必要的计算?
- ✅ 数据库查询是否优化?
- ✅ 是否有内存泄漏风险?

**4. 安全性**
- ✅ 是否有注入风险(SQL、XSS)?
- ✅ 敏感数据是否加密?
- ✅ 权限验证是否完善?
- ✅ 是否暴露敏感信息?

**5. 可测试性**
- ✅ 代码是否易于测试?
- ✅ 依赖是否可以 mock?
- ✅ 是否有副作用?

**6. 代码规范**
- ✅ 是否遵循命名规范?
- ✅ 是否遵循代码风格?
- ✅ 是否遵循项目架构?

### 阶段 3: 输出审查报告

**问题分级:**
- 🔴 **重大问题**: 必须修复(安全漏洞、功能 bug)
- 🟡 **需要改进**: 强烈建议修复(质量问题、性能问题)
- 🟢 **优化建议**: 可选修复(更好的实现方式)

## 预期输出

```markdown
## 代码审查报告

### 审查概述
- 审查范围: [文件列表]
- 改动规模: X 个文件,+Y/-Z 行
- 总体评价: ⭐⭐⭐⭐☆

### 重大问题 🔴
[必须修复的问题]

### 需要改进 🟡
[强烈建议修复的问题]

### 优化建议 🟢
[可选的优化]

### 值得学习 ✅
[好的实践]

### 审查清单
- [x] 功能正确性
- [x] 代码质量
- [x] 性能
- [x] 安全性
- [x] 可测试性
- [x] 代码规范

### 总结
[总体评价和建议]
```

## 审查原则

- 🎯 **客观公正**: 基于事实和标准
- 🎯 **建设性**: 提供解决方案,而非只批评
- 🎯 **全面性**: 从多个维度审查
- 🎯 **优先级**: 明确问题的严重程度

## 开始审查

现在调用 reviewer agent 开始代码审查...
