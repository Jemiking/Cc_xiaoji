# 边界案例测试执行清单

## 📋 测试前准备

### 环境检查
- [ ] 确认设备内存 ≥ 2GB
- [ ] 确认存储空间 ≥ 5GB
- [ ] 关闭其他占用内存的应用
- [ ] 确认项目编译通过

### 测试数据准备
- [ ] 确认测试数据文件存在：
  - [ ] `comprehensive_todos_boundary.csv` (综合Todo边界测试)
  - [ ] `comprehensive_habits_boundary.csv` (综合Habit边界测试)
  - [ ] `mixed_error_todos.csv` (混合错误测试)
  - [ ] `malformed_todos.csv` (格式错误测试)
  - [ ] `malformed_habits.csv` (格式错误测试)

### 性能测试数据生成
- [ ] 运行 `python generate_performance_data.py`
- [ ] 确认生成了以下文件：
  - [ ] `performance_todos_100.csv`
  - [ ] `performance_todos_1000.csv`
  - [ ] `performance_habits_100.csv`
  - [ ] `performance_habits_1000.csv`

---

## 🧪 第一阶段：基础边界测试 (预计2小时)

### TC-01: 字段数量边界测试
**测试文件**: `comprehensive_todos_boundary.csv`, `comprehensive_habits_boundary.csv`

- [ ] **TC-01-1**: 字段不足测试
  - [ ] 导入包含不足字段的记录
  - [ ] 验证：错误记录被跳过，不影响其他记录
  - [ ] 检查日志：确认记录了"字段不足"错误

- [ ] **TC-01-2**: 字段过多测试
  - [ ] 导入包含额外字段的记录
  - [ ] 验证：正常导入，忽略额外字段

- [ ] **TC-01-3**: 空行测试
  - [ ] 导入包含空行的CSV文件
  - [ ] 验证：空行被跳过，有效记录正常导入

**执行记录**:
```
测试时间: ____年____月____日 ____:____
测试结果: 通过/失败
成功导入记录数: ____
跳过记录数: ____
错误日志数: ____
问题描述: ________________
```

### TC-02: 数据类型转换边界测试

- [ ] **TC-02-1**: 布尔值转换测试 (Todo专用)
  - [ ] 测试各种布尔表示："true", "false", "TRUE", "False", "1", "0", "yes", "invalid"
  - [ ] 验证：标准布尔值正常转换，异常值导致记录跳过

- [ ] **TC-02-2**: 整数转换测试
  - [ ] 测试边界值：0, -1, 2147483647, "abc", "12.5", ""
  - [ ] 验证：正常整数转换成功，异常值导致记录跳过

- [ ] **TC-02-3**: 时间戳解析测试
  - [ ] 测试时间格式：标准ISO、边界时间、异常格式
  - [ ] 验证：标准格式解析成功，异常格式导致记录跳过

**执行记录**:
```
测试时间: ____年____月____日 ____:____
测试结果: 通过/失败
类型转换成功数: ____
类型转换失败数: ____
问题描述: ________________
```

### TC-03: 空值和特殊字符测试

- [ ] **TC-03-1**: 可空字段测试
  - [ ] 测试空值："", " ", "\t", "null", "NULL"
  - [ ] 验证：空值被正确转换为null

- [ ] **TC-03-2**: 特殊字符测试
  - [ ] 测试CSV转义：逗号、引号、换行符
  - [ ] 测试Unicode字符：表情符号、中文字符
  - [ ] 验证：特殊字符正确保存到数据库

- [ ] **TC-03-3**: 长文本测试
  - [ ] 测试超长标题和描述
  - [ ] 验证：根据数据库限制处理

**执行记录**:
```
测试时间: ____年____月____日 ____:____
测试结果: 通过/失败
特殊字符处理成功数: ____
问题描述: ________________
```

---

## ⚡ 第二阶段：性能边界测试 (预计3小时)

### TC-04: 批量数据性能测试

- [ ] **TC-04-1**: 小批量测试 (100条记录)
  - [ ] 导入文件：`performance_todos_100.csv`
  - [ ] 监控指标：导入耗时、内存使用
  - [ ] 验证：导入时间 < 5秒，内存使用 < 100MB

- [ ] **TC-04-2**: 中批量测试 (1000条记录)  
  - [ ] 导入文件：`performance_todos_1000.csv`
  - [ ] 监控指标：导入耗时、内存使用
  - [ ] 验证：导入时间 < 30秒，内存使用 < 300MB

- [ ] **TC-04-3**: 大批量测试 (10000条记录)
  - [ ] 导入文件：`performance_todos_10000.csv`
  - [ ] 监控指标：导入耗时、内存使用
  - [ ] 验证：导入时间 < 5分钟，内存使用 < 500MB，无OOM

**性能测试记录**:
```
=== 100条记录测试 ===
导入耗时: ____秒
内存峰值: ____MB  
CPU使用率: ____%
是否通过: ✅/❌

=== 1000条记录测试 ===  
导入耗时: ____秒
内存峰值: ____MB
CPU使用率: ____%
是否通过: ✅/❌

=== 10000条记录测试 ===
导入耗时: ____秒  
内存峰值: ____MB
CPU使用率: ____%
是否发生OOM: 是/否
是否通过: ✅/❌
```

### TC-05: 混合错误数据测试

- [ ] **TC-05-1**: 混合错误导入测试
  - [ ] 导入文件：`mixed_error_todos.csv` (1000条记录，20%错误)
  - [ ] 验证：正确记录导入成功，错误记录被跳过
  - [ ] 检查：错误记录被正确记录到日志

**执行记录**:
```
测试时间: ____年____月____日 ____:____
总记录数: ____
成功导入数: ____
跳过记录数: ____
错误记录比例: ____%
预期错误比例: 20%
是否匹配预期: 是/否
```

---

## 🔒 第三阶段：系统边界测试 (预计2小时)

### TC-06: 导入中断测试

- [ ] **TC-06-1**: 模拟应用崩溃
  - [ ] 导入过程中强制关闭应用
  - [ ] 重启后检查数据库状态
  - [ ] 验证：事务完整回滚，数据库状态一致

- [ ] **TC-06-2**: 导入过程中删除文件  
  - [ ] 导入过程中删除CSV文件
  - [ ] 验证：优雅处理错误，不导致应用崩溃

**执行记录**:
```
测试时间: ____年____月____日 ____:____
中断类型: ________________
事务回滚: 成功/失败
数据库一致性: 正常/异常  
应用稳定性: 正常/崩溃
问题描述: ________________
```

### TC-07: 数据一致性测试

- [ ] **TC-07-1**: 重复ID测试
  - [ ] 导入包含重复ID的记录
  - [ ] 验证：后导入的记录覆盖先导入的（REPLACE策略）

- [ ] **TC-07-2**: 外键约束测试
  - [ ] 导入使用不存在用户ID的记录
  - [ ] 验证：根据外键约束策略正确处理

**执行记录**:
```
测试时间: ____年____月____日 ____:____  
重复ID处理: 正确/错误
外键约束处理: 正确/错误
数据完整性: 正常/异常
问题描述: ________________
```

### TC-08: 文件系统边界测试

- [ ] **TC-08-1**: 文件损坏测试
  - [ ] 测试截断文件、编码错误文件
  - [ ] 验证：优雅处理错误，不导致应用崩溃

- [ ] **TC-08-2**: 超大文件测试
  - [ ] 测试100MB+文件（如果硬件支持）
  - [ ] 验证：在内存限制内正常处理或提供友好错误提示

**执行记录**:
```
测试时间: ____年____月____日 ____:____
文件损坏处理: 正确/错误  
超大文件处理: 正确/错误
错误提示友好性: 好/一般/差
问题描述: ________________
```

---

## 📊 测试总结

### 整体测试结果
```
测试开始时间: ____年____月____日 ____:____
测试结束时间: ____年____月____日 ____:____  
总测试时间: ____小时____分钟

=== 测试通过率 ===
第一阶段通过率: ____% (通过____/总计____项)
第二阶段通过率: ____% (通过____/总计____项)  
第三阶段通过率: ____% (通过____/总计____项)
总体通过率: ____% (通过____/总计____项)

=== 发现的问题 ===
1. ________________________________
2. ________________________________
3. ________________________________

=== 修复建议 ===
1. ________________________________
2. ________________________________
3. ________________________________

=== 验收标准达成情况 ===
- [ ] 健壮性：边界条件下应用不崩溃
- [ ] 数据完整性：正确数据100%导入成功  
- [ ] 错误处理：错误数据被正确跳过并记录日志
- [ ] 性能要求：10K记录导入时间<30秒，内存使用<500MB
- [ ] 事务安全：中断导入后数据库状态一致

测试负责人签名: ________________
测试完成日期: ____年____月____日
```

---

## 🔧 测试工具和监控

### 内存监控
- Android Studio Profiler
- 系统设置 → 开发者选项 → 内存使用情况

### 性能监控  
- 导入前后的内存快照对比
- CPU使用率监控
- 导入耗时计算

### 日志监控
- Logcat过滤："BackupProvider", "CsvBackup"
- 错误日志统计和分析

### 数据库验证
- 使用数据库查看工具验证导入结果
- 检查数据完整性和一致性

---

**注意事项**:
1. 每个测试阶段完成后，建议清理数据库重新开始下一阶段
2. 性能测试时建议关闭其他应用，确保测试环境一致
3. 发现问题时，详细记录重现步骤和错误信息
4. 建议录制关键测试过程的屏幕视频作为证据