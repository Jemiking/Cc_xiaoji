# æ’ç­æ¨¡å— (Schedule Module)

[![Module](https://img.shields.io/badge/module-schedule-blue)](https://github.com/ccxiaoji/cc_xiaoji)
[![Architecture](https://img.shields.io/badge/architecture-clean-green)](https://github.com/ccxiaoji/cc_xiaoji)
[![Platform](https://img.shields.io/badge/platform-android-lightgrey)](https://github.com/ccxiaoji/cc_xiaoji)

## ğŸ“‹ æ¨¡å—æ¦‚è¿°

æ’ç­æ¨¡å—æ˜¯CCå°è®°çš„æ ¸å¿ƒåŠŸèƒ½æ¨¡å—ä¹‹ä¸€ï¼Œä¸“æ³¨äºå·¥ä½œæ’ç­ç®¡ç†ã€‚è¯¥æ¨¡å—æ”¯æŒçµæ´»çš„ç­æ¬¡é…ç½®ã€å¤šç§æ’ç­æ¨¡å¼ã€ç»Ÿè®¡åˆ†æå’Œæ•°æ®å¯¼å‡ºç­‰åŠŸèƒ½ï¼Œå¸®åŠ©ç”¨æˆ·é«˜æ•ˆç®¡ç†å·¥ä½œæ—¶é—´ã€‚

### æ ¸å¿ƒä»·å€¼
- ğŸ¯ **çµæ´»æ’ç­**ï¼šæ”¯æŒå•æ¬¡ã€å¾ªç¯ã€è½®ç­ç­‰å¤šç§æ’ç­æ¨¡å¼
- ğŸ“Š **æ•°æ®åˆ†æ**ï¼šæä¾›å·¥æ—¶ç»Ÿè®¡ã€ç­æ¬¡åˆ†å¸ƒç­‰åˆ†æåŠŸèƒ½
- ğŸ“± **ç§»åŠ¨ä¼˜å…ˆ**ï¼šä¸“ä¸ºç§»åŠ¨è®¾å¤‡ä¼˜åŒ–çš„äº¤äº’ä½“éªŒ
- ğŸ”” **æ™ºèƒ½æé†’**ï¼šæ”¯æŒæ’ç­æé†’é€šçŸ¥

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### 1. ç­æ¬¡ç®¡ç†
- åˆ›å»ºå’Œç¼–è¾‘ç­æ¬¡ï¼ˆåç§°ã€æ—¶é—´ã€é¢œè‰²ï¼‰
- ç­æ¬¡æ¿€æ´»/åœç”¨
- é¢„è®¾é¢œè‰²é€‰æ‹©
- å¿«é€Ÿç­æ¬¡é€‰æ‹©

### 2. æ’ç­åŠŸèƒ½
- **å•æ—¥æ’ç­**ï¼šç‚¹é€‰æ—¥æœŸå¿«é€Ÿè®¾ç½®
- **æ‰¹é‡æ’ç­**ï¼š
  - å•æ¬¡æ¨¡å¼ï¼šæŒ‡å®šæ—¥æœŸèŒƒå›´
  - å¾ªç¯æ¨¡å¼ï¼š2-365å¤©å¾ªç¯
  - è½®ç­æ¨¡å¼ï¼šå¤šç­æ¬¡è½®æ¢
  - è‡ªå®šä¹‰æ¨¡å¼ï¼šçµæ´»é…ç½®
- **é•¿æŒ‰å¿«é€Ÿé€‰æ‹©**ï¼šå¿«é€Ÿåˆ‡æ¢å¸¸ç”¨ç­æ¬¡

### 3. æ—¥å†è§†å›¾
- æœˆåº¦æ—¥å†å±•ç¤º
- å·¦å³æ»‘åŠ¨åˆ‡æ¢æœˆä»½
- ä»Šæ—¥å¿«é€Ÿå®šä½
- èˆ’é€‚/ç´§å‡‘è§†å›¾æ¨¡å¼åˆ‡æ¢
- ç­æ¬¡é¢œè‰²æ ‡è¯†

### 4. ç»Ÿè®¡åˆ†æ
- æœˆåº¦å·¥æ—¶ç»Ÿè®¡
- ç­æ¬¡åˆ†å¸ƒå›¾è¡¨
- å·¥ä½œ/ä¼‘æ¯å¤©æ•°ç»Ÿè®¡
- è‡ªå®šä¹‰æ—¶é—´èŒƒå›´åˆ†æ

### 5. æ•°æ®ç®¡ç†
- **å¯¼å‡ºåŠŸèƒ½**ï¼š
  - CSVæ ¼å¼ï¼ˆExcelå…¼å®¹ï¼‰
  - JSONæ ¼å¼ï¼ˆæ•°æ®äº¤æ¢ï¼‰
  - ç»Ÿè®¡æŠ¥è¡¨
- **æ•°æ®å¤‡ä»½/æ¢å¤**
- **å†å²è®°å½•æŸ¥çœ‹**

### 6. è®¾ç½®åŠŸèƒ½
- é€šçŸ¥æé†’é…ç½®
- æé†’æ—¶é—´è®¾ç½®
- å‘¨èµ·å§‹æ—¥è®¾ç½®
- æ·±è‰²æ¨¡å¼æ”¯æŒ

## ğŸ— æ¶æ„è®¾è®¡

### æ¨¡å—ç»“æ„
```
feature/schedule/
â”œâ”€â”€ api/                    # å…¬å¼€APIæ¥å£
â”‚   â”œâ”€â”€ ScheduleApi.kt      # æ¨¡å—åŠŸèƒ½æ¥å£
â”‚   â””â”€â”€ ScheduleNavigator.kt # å¯¼èˆªæ¥å£
â”œâ”€â”€ data/                   # æ•°æ®å±‚å®ç°
â”‚   â”œâ”€â”€ local/              # æœ¬åœ°æ•°æ®
â”‚   â”œâ”€â”€ repository/         # ä»“åº“å®ç°
â”‚   â”œâ”€â”€ scheduler/          # ä»»åŠ¡è°ƒåº¦
â”‚   â””â”€â”€ worker/             # åå°ä»»åŠ¡
â”œâ”€â”€ domain/                 # é¢†åŸŸå±‚
â”‚   â”œâ”€â”€ model/              # é¢†åŸŸæ¨¡å‹
â”‚   â”œâ”€â”€ repository/         # ä»“åº“æ¥å£
â”‚   â””â”€â”€ usecase/            # ä¸šåŠ¡ç”¨ä¾‹
â””â”€â”€ presentation/           # å±•ç¤ºå±‚
    â”œâ”€â”€ navigation/         # å¯¼èˆªé…ç½®
    â”œâ”€â”€ ui/                 # UIç»„ä»¶
    â””â”€â”€ viewmodel/          # çŠ¶æ€ç®¡ç†
```

### å…³é”®è®¾è®¡æ¨¡å¼
- **Clean Architecture**ï¼šæ¸…æ™°çš„å±‚æ¬¡åˆ’åˆ†
- **MVVM**ï¼šæ•°æ®é©±åŠ¨çš„UIæ›´æ–°
- **Repository Pattern**ï¼šæ•°æ®è®¿é—®æŠ½è±¡
- **UseCase Pattern**ï¼šä¸šåŠ¡é€»è¾‘å°è£…

## ğŸ“š API ä½¿ç”¨æŒ‡å—

### ScheduleApi
```kotlin
interface ScheduleApi {
    // è·å–ä»Šæ—¥æ’ç­ä¿¡æ¯
    suspend fun getTodaySchedule(): ScheduleInfo?
    
    // è·å–æœ¬æœˆæ’ç­ç»Ÿè®¡
    suspend fun getMonthStatistics(): ScheduleStatistics
    
    // å¯¼èˆªåˆ°æ’ç­æ¨¡å—
    fun navigateToSchedule()
}
```

### ä½¿ç”¨ç¤ºä¾‹
```kotlin
// åœ¨å…¶ä»–æ¨¡å—ä¸­ä½¿ç”¨
@HiltViewModel
class HomeViewModel @Inject constructor(
    private val scheduleApi: ScheduleApi
) : ViewModel() {
    
    fun loadTodaySchedule() {
        viewModelScope.launch {
            val schedule = scheduleApi.getTodaySchedule()
            // å¤„ç†æ’ç­ä¿¡æ¯
        }
    }
}
```

## ğŸ›  æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæŠ€æœ¯
- **Kotlin**ï¼š100% Kotlin ç¼–å†™
- **Jetpack Compose**ï¼šç°ä»£åŒ–å£°æ˜å¼UI
- **Coroutines & Flow**ï¼šå¼‚æ­¥ç¼–ç¨‹å’Œå“åº”å¼æ•°æ®æµ
- **Hilt**ï¼šä¾èµ–æ³¨å…¥
- **Room**ï¼šæœ¬åœ°æ•°æ®æŒä¹…åŒ–
- **WorkManager**ï¼šåå°ä»»åŠ¡è°ƒåº¦

### ä¸»è¦ä¾èµ–
```kotlin
dependencies {
    // Core modules
    implementation(project(":core:common"))
    implementation(project(":core:ui"))
    implementation(project(":core:database"))
    implementation(project(":core:data"))
    
    // Shared modules
    implementation(project(":shared:notification"))
    implementation(project(":shared:backup"))
    
    // WorkManager
    implementation(libs.androidx.work.runtime.ktx)
    implementation(libs.hilt.work)
    
    // DataStore
    implementation(libs.androidx.datastore.preferences)
}
```

## ğŸ“¦ æ ¸å¿ƒç»„ä»¶

### 1. é¢†åŸŸæ¨¡å‹
- **Schedule**ï¼šæ’ç­å®ä½“ï¼ˆæ—¥æœŸã€ç­æ¬¡ã€å¤‡æ³¨ã€å®é™…å·¥æ—¶ï¼‰
- **Shift**ï¼šç­æ¬¡å®ä½“ï¼ˆåç§°ã€æ—¶é—´ã€é¢œè‰²ã€çŠ¶æ€ï¼‰
- **SchedulePattern**ï¼šæ’ç­æ¨¡å¼ï¼ˆå•æ¬¡ã€å¾ªç¯ã€è½®ç­ã€è‡ªå®šä¹‰ï¼‰
- **ScheduleStatistics**ï¼šç»Ÿè®¡æ•°æ®

### 2. å…³é”®ç”¨ä¾‹
- **CreateScheduleUseCase**ï¼šåˆ›å»ºæ’ç­ï¼ˆæ”¯æŒæ‰¹é‡ï¼‰
- **GetScheduleStatisticsUseCase**ï¼šè·å–ç»Ÿè®¡ä¿¡æ¯
- **ExportScheduleDataUseCase**ï¼šå¯¼å‡ºæ•°æ®
- **ManageShiftUseCase**ï¼šç­æ¬¡ç®¡ç†

### 3. UIç»„ä»¶
- **CalendarView**ï¼šæ—¥å†è§†å›¾ç»„ä»¶
- **QuickShiftSelector**ï¼šå¿«é€Ÿç­æ¬¡é€‰æ‹©å™¨
- **CustomDatePickerDialog**ï¼šæ—¥æœŸé€‰æ‹©å¯¹è¯æ¡†
- **ShiftEditDialog**ï¼šç­æ¬¡ç¼–è¾‘å¯¹è¯æ¡†

## ğŸš€ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°åŠŸèƒ½
1. åœ¨ domain/usecase ä¸­åˆ›å»ºç”¨ä¾‹
2. åœ¨ repository æ¥å£ä¸­å®šä¹‰æ–¹æ³•
3. åœ¨ data/repository ä¸­å®ç°
4. åˆ›å»º/æ›´æ–° ViewModel
5. å®ç° UI ç»„ä»¶

### ä»£ç è§„èŒƒ
- éµå¾ª [Kotlin ç¼–ç è§„èŒƒ](https://kotlinlang.org/docs/coding-conventions.html)
- ä½¿ç”¨ ktlint è¿›è¡Œä»£ç æ ¼å¼åŒ–
- ä¿æŒå‡½æ•°ç®€æ´ï¼ˆå»ºè®®ä¸è¶…è¿‡30è¡Œï¼‰
- æ·»åŠ å¿…è¦çš„ KDoc æ³¨é‡Š

### æµ‹è¯•ç­–ç•¥
- å•å…ƒæµ‹è¯•ï¼šUseCase å’Œ ViewModel
- UIæµ‹è¯•ï¼šå…³é”®ç”¨æˆ·æµç¨‹
- é›†æˆæµ‹è¯•ï¼šRepository å±‚

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### å·²å®æ–½çš„ä¼˜åŒ–
- ä½¿ç”¨ `StateFlow` é¿å…ä¸å¿…è¦çš„é‡ç»„
- æ—¥å†æ•°æ®æ‡’åŠ è½½
- ä½¿ç”¨ `remember` ç¼“å­˜è®¡ç®—ç»“æœ
- åˆç†ä½¿ç”¨ `@Stable` å’Œ `@Immutable`

### ä¼˜åŒ–å»ºè®®
- å¤§æ•°æ®é›†ä½¿ç”¨åˆ†é¡µ
- é¿å…åœ¨ Composable ä¸­è¿›è¡Œå¤æ‚è®¡ç®—
- ä½¿ç”¨ `derivedStateOf` å¤„ç†æ´¾ç”ŸçŠ¶æ€

## ğŸ”„ ç‰ˆæœ¬å†å²

### v1.0.0 (2025-06)
- âœ… ä»ç‹¬ç«‹é¡¹ç›®è¿ç§»åˆ°æ¨¡å—åŒ–æ¶æ„
- âœ… å®Œæˆæ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½
- âœ… æ”¯æŒå¤šç§æ’ç­æ¨¡å¼
- âœ… å®ç°æ•°æ®å¯¼å‡ºåŠŸèƒ½

## ğŸ“ å¾…åŠäº‹é¡¹

- [ ] æ·»åŠ æ’ç­æ¨¡æ¿åŠŸèƒ½
- [ ] æ”¯æŒå¤šäººæ’ç­ååŒ
- [ ] å¢åŠ æ›´å¤šç»Ÿè®¡ç»´åº¦
- [ ] ä¼˜åŒ–å¤§æ•°æ®é‡æ€§èƒ½
- [ ] æ”¯æŒå›½é™…åŒ–

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬æ¨¡å—ä½œä¸º CCå°è®° é¡¹ç›®çš„ä¸€éƒ¨åˆ†ï¼Œéµå¾ªé¡¹ç›®æ•´ä½“çš„è®¸å¯è¯ã€‚

---

**æœ€åæ›´æ–°**ï¼š2025-06-13