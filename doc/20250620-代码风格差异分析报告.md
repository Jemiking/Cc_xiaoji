# CCå°è®°ä»£ç é£æ ¼å·®å¼‚åˆ†ææŠ¥å‘Š

## åˆ†ææ¦‚è¿°
- **åˆ†ææ—¶é—´**: 2025-06-20
- **åˆ†æäºº**: Claude
- **åˆ†æèŒƒå›´**: æ‰€æœ‰featureæ¨¡å—ï¼ˆtodoã€habitã€ledgerã€scheduleï¼‰
- **ç›®çš„**: è¯†åˆ«å¹¶è®°å½•å„æ¨¡å—é—´çš„ä»£ç é£æ ¼å·®å¼‚ï¼Œä¸ºåç»­è§„èŒƒåŒ–æä¾›ä¾æ®

## å·®å¼‚åˆ†æè¯¦æƒ…

### 1. æ¶æ„å±‚æ¬¡å®ç°å·®å¼‚ ğŸ—ï¸

| æ¨¡å— | Repositoryæ¥å£ | UseCaseå±‚ | ViewModel | æ¶æ„å®Œæ•´æ€§ |
|-----|---------------|-----------|-----------|-----------|
| Todo | âœ… æœ‰æ¥å£ | âŒ æ—  | âœ… ç®€å• | 60% |
| Habit | âœ… æœ‰æ¥å£ | âŒ æ—  | âœ… ç®€å• | 60% |
| Ledger | âŒ æ— æ¥å£ | âŒ æ—  | âœ… å¤æ‚(600+è¡Œ) | 40% |
| Schedule | âœ… æœ‰æ¥å£ | âœ… å®Œæ•´(9ä¸ª) | âœ… ä¸­ç­‰ | 100% |

**é—®é¢˜**: åªæœ‰Scheduleæ¨¡å—å®ç°äº†å®Œæ•´çš„Clean Architecture

### 2. Repositoryè®¾è®¡å·®å¼‚ ğŸ“¦

#### Todoæ¨¡å—
```kotlin
interface TodoRepository  // æ¥å£
class TaskRepository : TodoRepository  // å®ç°ç±»å‘½åä¸ä¸€è‡´ï¼
```

#### Habitæ¨¡å—
```kotlin
interface HabitRepository  // æ¥å£
class HabitRepositoryImpl : HabitRepository  // æ ‡å‡†å‘½å âœ…
```

#### Ledgeræ¨¡å—
```kotlin
// æ— æ¥å£ï¼Œç›´æ¥ä½¿ç”¨å®ç°ç±»
class TransactionRepository @Inject constructor(...)
class AccountRepository @Inject constructor(...)
```

#### Scheduleæ¨¡å—
```kotlin
interface ScheduleRepository  // æ¥å£
class ScheduleRepositoryImpl : ScheduleRepository  // æ ‡å‡†å‘½å âœ…
```

### 3. ä¾èµ–æ³¨å…¥æ–¹å¼å·®å¼‚ ğŸ’‰

#### Todo/Habit/Schedule - ä½¿ç”¨@Binds
```kotlin
@Module
@InstallIn(SingletonComponent::class)
abstract class TodoModule {
    @Binds
    abstract fun bindTodoRepository(
        todoRepository: TaskRepository
    ): TodoRepository
}
```

#### Ledger - ä½¿ç”¨@Provides
```kotlin
@Module
@InstallIn(SingletonComponent::class)
object LedgerModule {
    @Provides
    @Singleton
    fun provideLedgerViewModel(
        transactionRepository: TransactionRepository,
        // 10+ä¸ªå‚æ•°...
    ): LedgerViewModel = LedgerViewModel(...)
}
```

### 4. UIç»„ä»¶ç»„ç»‡å·®å¼‚ ğŸ¨

| æ¨¡å— | ç»„ç»‡æ–¹å¼ | æ–‡ä»¶æ•° | ä»£ç è¡Œæ•° | å¤æ‚åº¦ |
|-----|---------|--------|----------|--------|
| Todo | å•æ–‡ä»¶ | 1 | 900+ | é«˜è€¦åˆ |
| Habit | ä¸»å±+å›¾è¡¨åŒ… | 5 | 600+ | ä¸­ç­‰ |
| Ledger | é«˜åº¦æ¨¡å—åŒ– | 20+ | 2000+ | ä½è€¦åˆ |
| Schedule | é¡µé¢çº§åˆ†ç¦» | 7 | 1500+ | ä¸­ç­‰ |

### 5. çŠ¶æ€ç®¡ç†å¤æ‚åº¦å·®å¼‚ ğŸ“Š

#### Todo - ç®€å•çŠ¶æ€
```kotlin
data class TodoUiState(
    val tasks: List<TaskEntity> = emptyList(),
    val isLoading: Boolean = false,
    val searchQuery: String = "",
    val selectedFilter: TaskFilterOptions = TaskFilterOptions.ALL,
    val sortOption: TaskSortOption = TaskSortOption.CREATED_DATE
)  // 5ä¸ªå­—æ®µ
```

#### Ledger - å¤æ‚çŠ¶æ€
```kotlin
data class LedgerUiState(
    val transactions: List<TransactionWithDetails> = emptyList(),
    val monthlyStats: MonthlyStats? = null,
    val accounts: List<AccountEntity> = emptyList(),
    val categories: List<CategoryEntity> = emptyList(),
    val budgets: List<BudgetWithCategory> = emptyList(),
    val isLoading: Boolean = false,
    val searchQuery: String = "",
    val selectedAccount: AccountEntity? = null,
    val selectedCategory: CategoryEntity? = null,
    val dateRange: Pair<Long, Long>? = null,
    val transactionType: TransactionType? = null,
    val isSelectionMode: Boolean = false,
    val selectedTransactionIds: Set<Long> = emptySet(),
    val currentMonth: YearMonth = YearMonth.now(),
    val showDrawer: Boolean = false
)  // 15+ä¸ªå­—æ®µ
```

### 6. æµ‹è¯•è¦†ç›–å·®å¼‚ ğŸ§ª

| æ¨¡å— | UseCaseæµ‹è¯• | Repositoryæµ‹è¯• | ViewModelæµ‹è¯• | é›†æˆæµ‹è¯• | æ€»è¦†ç›–ç‡ |
|-----|------------|---------------|--------------|---------|----------|
| Todo | âŒ | âŒ | âœ… (æ–°å¢) | âŒ | ~20% |
| Habit | âŒ | âŒ | âœ… (æ–°å¢) | âŒ | ~20% |
| Ledger | âŒ | âœ… | âœ… (æ–°å¢) | âŒ | ~30% |
| Schedule | âœ… | âŒ | âœ… (æ–°å¢) | âŒ | ~40% |

### 7. é”™è¯¯å¤„ç†æ–¹å¼å·®å¼‚ âš ï¸

#### Todo/Habit - åŸºæœ¬æ— é”™è¯¯å¤„ç†
```kotlin
fun loadTasks() {
    viewModelScope.launch {
        repository.getAllTasks().collect { tasks ->
            _uiState.update { it.copy(tasks = tasks) }
        }
    }
}
```

#### Schedule - å®Œæ•´é”™è¯¯å¤„ç†
```kotlin
fun loadSchedules() {
    viewModelScope.launch {
        try {
            _isLoading.value = true
            val schedules = getMonthScheduleUseCase(currentMonth)
            _schedules.value = schedules
        } catch (e: Exception) {
            _error.value = "åŠ è½½å¤±è´¥: ${e.message}"
        } finally {
            _isLoading.value = false
        }
    }
}
```

### 8. å›½é™…åŒ–ç¨‹åº¦å·®å¼‚ ğŸŒ

| æ¨¡å— | ç¡¬ç¼–ç å­—ç¬¦ä¸² | stringResourceä½¿ç”¨ | å›½é™…åŒ–å°±ç»ª |
|-----|------------|------------------|-----------|
| Todo | è¾ƒå¤š | éƒ¨åˆ† | âŒ |
| Habit | ä¸­ç­‰ | éƒ¨åˆ† | âŒ |
| Ledger | è¾ƒå¤š | æ··åˆ | âŒ |
| Schedule | æ—  | 100% | âœ… |

### 9. ä»£ç æ³¨é‡Šé£æ ¼å·®å¼‚ ğŸ“

| æ¨¡å— | æ³¨é‡Šè¦†ç›–ç‡ | æ³¨é‡Šè¯­è¨€ | æ³¨é‡Šè´¨é‡ |
|-----|-----------|---------|---------|
| Todo | <5% | æ—  | å·® |
| Habit | <5% | æ—  | å·® |
| Ledger | ~20% | ä¸­æ–‡ | ä¸­ç­‰ |
| Schedule | ~40% | ä¸­æ–‡ | å¥½ |

### 10. ViewModelè§„æ¨¡å·®å¼‚ ğŸ“

```
Todo ViewModel: ~200è¡Œï¼ˆåˆç†ï¼‰
Habit ViewModel: ~150è¡Œï¼ˆåˆç†ï¼‰
Ledger ViewModel: 600+è¡Œï¼ˆè¿‡å¤§ï¼Œéœ€è¦æ‹†åˆ†ï¼‰
Schedule ViewModel: ~300è¡Œï¼ˆåˆç†ï¼‰
```

## å…³é”®é—®é¢˜æ€»ç»“

### ä¸¥é‡é—®é¢˜ ğŸ”´
1. **æ¶æ„å®ç°ä¸ä¸€è‡´**: 3/4çš„æ¨¡å—ç¼ºå°‘UseCaseå±‚
2. **Repositoryè®¾è®¡æ··ä¹±**: å‘½åä¸ç»Ÿä¸€ï¼ŒLedgeræ— æ¥å£
3. **ä¾èµ–æ³¨å…¥æ–¹å¼åˆ†è£‚**: Ledgerä½¿ç”¨å®Œå…¨ä¸åŒçš„æ¨¡å¼
4. **LedgerViewModelè¿‡äºåºå¤§**: 600+è¡Œï¼Œè¿åå•ä¸€èŒè´£åŸåˆ™

### ä¸­ç­‰é—®é¢˜ ğŸŸ¡
1. **UIç»„ä»¶ç»„ç»‡å·®å¼‚å¤§**: Todoå•æ–‡ä»¶900+è¡Œ
2. **æµ‹è¯•æ ‡å‡†ä¸ä¸€è‡´**: è¦†ç›–ç‡å·®å¼‚å·¨å¤§
3. **é”™è¯¯å¤„ç†ç¼ºå¤±**: å¤§éƒ¨åˆ†æ¨¡å—æ— é”™è¯¯å¤„ç†
4. **å›½é™…åŒ–ä¸å®Œæ•´**: åªæœ‰Scheduleå®Œå…¨å›½é™…åŒ–

### è½»å¾®é—®é¢˜ ğŸŸ¢
1. **ä»£ç æ³¨é‡Šç¼ºä¹**: æ•´ä½“æ³¨é‡Šç‡ä½
2. **å‘½åè§„èŒƒä¸ç»Ÿä¸€**: å¦‚TaskRepository vs TodoRepository
3. **çŠ¶æ€ç®¡ç†å¤æ‚åº¦å·®å¼‚**: éœ€è¦ç»Ÿä¸€æ¨¡å¼

## å½±å“åˆ†æ

### å¯¹å¼€å‘æ•ˆç‡çš„å½±å“
- æ–°å¼€å‘è€…å­¦ä¹ æˆæœ¬é«˜
- æ¨¡å—é—´ä»£ç å¤ç”¨å›°éš¾
- ç»´æŠ¤æˆæœ¬å¢åŠ 

### å¯¹ä»£ç è´¨é‡çš„å½±å“
- æ¶æ„ä¸€è‡´æ€§å·®
- æµ‹è¯•è¦†ç›–ä¸å‡
- é”™è¯¯å¤„ç†ä¸å®Œå–„

### å¯¹å›¢é˜Ÿåä½œçš„å½±å“
- ç¼ºä¹ç»Ÿä¸€æ ‡å‡†
- ä»£ç å®¡æŸ¥å›°éš¾
- çŸ¥è¯†å…±äº«å—é˜»

## å»ºè®®ä¼˜å…ˆçº§

### P0 - ç«‹å³æ‰§è¡Œ
1. ç»Ÿä¸€Repositoryæ¥å£è®¾è®¡å’Œå‘½å
2. ä¸ºæ‰€æœ‰æ¨¡å—æ·»åŠ UseCaseå±‚
3. ç»Ÿä¸€ä¾èµ–æ³¨å…¥æ–¹å¼ä¸º@Binds

### P1 - çŸ­æœŸæ‰§è¡Œ
1. æ‹†åˆ†LedgerViewModel
2. é‡æ„Todoæ¨¡å—UIç»„ä»¶
3. æ·»åŠ ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶

### P2 - ä¸­æœŸæ‰§è¡Œ
1. å®Œå–„æµ‹è¯•è¦†ç›–
2. ç»Ÿä¸€å›½é™…åŒ–
3. å»ºç«‹ä»£ç è§„èŒƒæ–‡æ¡£

## ç»“è®º

CCå°è®°é¡¹ç›®åœ¨å¿«é€Ÿå‘å±•è¿‡ç¨‹ä¸­äº§ç”Ÿäº†æ˜¾è‘—çš„ä»£ç é£æ ¼å·®å¼‚ï¼Œè¿™äº›å·®å¼‚ä¸»è¦ä½“ç°åœ¨æ¶æ„å®ç°ã€è®¾è®¡æ¨¡å¼ã€ä»£ç ç»„ç»‡ç­‰å¤šä¸ªæ–¹é¢ã€‚Scheduleæ¨¡å—ä½œä¸ºæœ€ååŠ å…¥çš„æ¨¡å—ï¼Œåè€Œå…·æœ‰æœ€å®Œæ•´å’Œè§„èŒƒçš„å®ç°ï¼Œå¯ä»¥ä½œä¸ºå…¶ä»–æ¨¡å—é‡æ„çš„å‚è€ƒæ ‡å‡†ã€‚

å»ºè®®ç«‹å³å¯åŠ¨ä»£ç è§„èŒƒåŒ–å·¥ä½œï¼Œä»¥Scheduleæ¨¡å—ä¸ºåŸºå‡†ï¼Œç»Ÿä¸€å…¶ä»–æ¨¡å—çš„å®ç°æ–¹å¼ï¼Œæé«˜é¡¹ç›®çš„æ•´ä½“è´¨é‡å’Œå¯ç»´æŠ¤æ€§ã€‚

---
*åˆ†æå®Œæˆæ—¶é—´: 2025-06-20 02:00*