# åŸºäºæ–¹æ¡ˆAçš„é¡µé¢è®¾è®¡è§„èŒƒ

> **åˆ›å»ºæ—¥æœŸ**: 2025-07-02  
> **è®¾è®¡æ–¹æ¡ˆ**: æç®€æ‰å¹³åŒ–è®¾è®¡ï¼ˆæ–¹æ¡ˆAï¼‰  
> **å‚è€ƒåŸºå‡†**: HomeScreenä¸»é¡µä¼˜åŒ–åçš„æœ€ç»ˆæ•ˆæœ

## ğŸ“Œ è®¾è®¡æ¼”å˜è¯´æ˜

### ä¸»é¡µè®¾è®¡å†ç¨‹
1. **ç¬¬ä¸€é˜¶æ®µ**ï¼šç°ä»£åŒ–è®¾è®¡ï¼ˆæ¯›ç»ç’ƒã€æ¸å˜ã€é˜´å½±ï¼‰
2. **ç¬¬äºŒé˜¶æ®µ**ï¼šæç®€æ‰å¹³åŒ–ï¼ˆç§»é™¤æ¸å˜ã€å¼±åŒ–é˜´å½±ã€é™ä½é¥±å’Œåº¦ï¼‰âœ… å½“å‰

åŸºäºç”¨æˆ·åé¦ˆï¼Œä¸»é¡µæœ€ç»ˆé‡‡ç”¨äº†**æç®€æ‰å¹³åŒ–æ–¹æ¡ˆï¼ˆæ–¹æ¡ˆAï¼‰**ï¼Œå…¶ä»–é¡µé¢å°†ä¸¥æ ¼éµå¾ªæ­¤è®¾è®¡è¯­è¨€ã€‚

## ğŸ¨ æ ¸å¿ƒè®¾è®¡åŸåˆ™

### 1. è§†è§‰é£æ ¼
- **æ‰å¹³åŒ–è®¾è®¡**ï¼šæ— æ¸å˜ã€æ— æ¯›ç»ç’ƒæ•ˆæœ
- **æå¼±é˜´å½±**ï¼š0-2dpï¼Œå¤šæ•°æƒ…å†µä½¿ç”¨è¾¹æ¡†ä»£æ›¿
- **æŸ”å’Œè‰²è°ƒ**ï¼šä½é¥±å’Œåº¦çš„å“ç‰Œè‰²
- **ç»†è¾¹æ¡†**ï¼š10-20%é€æ˜åº¦
- **ææ·¡èƒŒæ™¯**ï¼š5%é€æ˜åº¦

### 2. æ ¸å¿ƒç»„ä»¶é€‰æ‹©
```kotlin
// âœ… ä½¿ç”¨è¿™äº›ç»„ä»¶
- FlatModuleCard    // æ‰å¹³æ¨¡å—å¡ç‰‡
- FlatButton        // çº¯è‰²æŒ‰é’®
- ModernCard        // ç°ä»£å¡ç‰‡ï¼ˆå¸¦ç»†è¾¹æ¡†ï¼‰
- MaterialTheme     // è¯­ä¹‰åŒ–é¢œè‰²

// âŒ é¿å…ä½¿ç”¨
- GradientButton    // æ¸å˜æŒ‰é’®
- GlassCard         // æ¯›ç»ç’ƒå¡ç‰‡
- ä»»ä½•Brushæ¸å˜æ•ˆæœ
- ç¡¬ç¼–ç é¢œè‰²å€¼
```

## ğŸ“± å…·ä½“é¡µé¢è®¾è®¡æ–¹æ¡ˆ

### 1. LedgerScreenï¼ˆè®°è´¦ä¸»ç•Œé¢ï¼‰

#### è®¾è®¡è¦ç‚¹
```kotlin
// é¡¶éƒ¨æœˆåº¦æ¦‚è§ˆæ¡
Box(
    modifier = Modifier
        .fillMaxWidth()
        .background(
            color = DesignTokens.BrandColors.Ledger.copy(alpha = 0.05f),
            shape = RoundedCornerShape(DesignTokens.BorderRadius.medium)
        )
        .border(
            width = 1.dp,
            color = DesignTokens.BrandColors.Ledger.copy(alpha = 0.2f),
            shape = RoundedCornerShape(DesignTokens.BorderRadius.medium)
        )
)

// äº¤æ˜“åˆ—è¡¨é¡¹
ModernCard(
    backgroundColor = MaterialTheme.colorScheme.surface,
    borderColor = MaterialTheme.colorScheme.outline.copy(alpha = 0.1f),
    elevation = 0.dp
) {
    Row(
        modifier = Modifier
            .fillMaxWidth()
            .padding(DesignTokens.Spacing.medium)
    ) {
        // åˆ†ç±»å›¾æ ‡ - ä½¿ç”¨æ‰å¹³èƒŒæ™¯
        Box(
            modifier = Modifier
                .size(40.dp)
                .background(
                    color = categoryColor.copy(alpha = 0.1f),
                    shape = CircleShape
                )
        ) {
            Icon(
                imageVector = categoryIcon,
                tint = categoryColor,
                modifier = Modifier.align(Alignment.Center)
            )
        }
        
        // äº¤æ˜“ä¿¡æ¯
        Column(modifier = Modifier.weight(1f)) {
            Text(
                text = transactionName,
                style = MaterialTheme.typography.bodyLarge,
                color = MaterialTheme.colorScheme.onSurface
            )
            Text(
                text = accountName,
                style = MaterialTheme.typography.bodySmall,
                color = MaterialTheme.colorScheme.onSurfaceVariant.copy(alpha = 0.6f)
            )
        }
        
        // é‡‘é¢ - ä½¿ç”¨è¯­ä¹‰åŒ–é¢œè‰²
        Text(
            text = amount,
            style = MaterialTheme.typography.titleMedium,
            color = when(type) {
                TransactionType.INCOME -> DesignTokens.BrandColors.Success
                TransactionType.EXPENSE -> DesignTokens.BrandColors.Error
                else -> MaterialTheme.colorScheme.onSurface
            },
            fontWeight = FontWeight.Medium
        )
    }
}

// FAB - æ‰å¹³è®¾è®¡
FloatingActionButton(
    onClick = onAddTransaction,
    containerColor = DesignTokens.BrandColors.Ledger,
    elevation = FloatingActionButtonDefaults.elevation(
        defaultElevation = 1.dp,
        pressedElevation = 2.dp
    )
) {
    Icon(Icons.Default.Add, contentDescription = null, tint = Color.White)
}
```

#### ç»„ä»¶æ‹†åˆ†æ–¹æ¡ˆ
```
LedgerScreen.kt (ä¸»æ–‡ä»¶ ~400è¡Œ)
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ MonthlyOverviewBar.kt
â”‚   â”œâ”€â”€ TransactionItem.kt
â”‚   â”œâ”€â”€ TransactionGroupHeader.kt
â”‚   â””â”€â”€ EmptyTransactionState.kt
â”œâ”€â”€ dialogs/
â”‚   â”œâ”€â”€ AddTransactionDialog.kt
â”‚   â”œâ”€â”€ EditTransactionDialog.kt
â”‚   â””â”€â”€ FilterBottomSheet.kt
â””â”€â”€ sections/
    â”œâ”€â”€ QuickStatsSection.kt
    â””â”€â”€ BatchOperationBar.kt
```

### 2. TodoScreenï¼ˆå¾…åŠç•Œé¢ï¼‰

#### è®¾è®¡è¦ç‚¹
```kotlin
// ä»»åŠ¡åˆ†ç»„æ ‡é¢˜
Row(
    modifier = Modifier
        .fillMaxWidth()
        .padding(horizontal = DesignTokens.Spacing.medium, vertical = DesignTokens.Spacing.small)
) {
    Text(
        text = groupTitle, // "ä»Šå¤©"ã€"æ˜å¤©"ã€"æœ¬å‘¨"
        style = MaterialTheme.typography.titleSmall,
        color = DesignTokens.BrandColors.Todo,
        fontWeight = FontWeight.Medium
    )
    Spacer(modifier = Modifier.weight(1f))
    Text(
        text = "$taskCount é¡¹",
        style = MaterialTheme.typography.bodySmall,
        color = MaterialTheme.colorScheme.onSurfaceVariant.copy(alpha = 0.6f)
    )
}

// ä»»åŠ¡å¡ç‰‡
ModernCard(
    backgroundColor = MaterialTheme.colorScheme.surface,
    borderColor = priorityColor.copy(alpha = 0.2f),
    onClick = onTaskClick
) {
    Row(
        modifier = Modifier.padding(DesignTokens.Spacing.medium),
        verticalAlignment = Alignment.CenterVertically
    ) {
        // å®ŒæˆçŠ¶æ€å¤é€‰æ¡†
        Checkbox(
            checked = task.isCompleted,
            onCheckedChange = onToggleComplete,
            colors = CheckboxDefaults.colors(
                checkedColor = DesignTokens.BrandColors.Todo,
                uncheckedColor = MaterialTheme.colorScheme.onSurfaceVariant
            )
        )
        
        Spacer(modifier = Modifier.width(DesignTokens.Spacing.small))
        
        // ä»»åŠ¡å†…å®¹
        Column(modifier = Modifier.weight(1f)) {
            Text(
                text = task.title,
                style = MaterialTheme.typography.bodyLarge,
                color = if (task.isCompleted) {
                    MaterialTheme.colorScheme.onSurfaceVariant.copy(alpha = 0.6f)
                } else {
                    MaterialTheme.colorScheme.onSurface
                },
                textDecoration = if (task.isCompleted) TextDecoration.LineThrough else null
            )
            
            if (task.dueDate != null) {
                Text(
                    text = formatDueDate(task.dueDate),
                    style = MaterialTheme.typography.bodySmall,
                    color = MaterialTheme.colorScheme.onSurfaceVariant.copy(alpha = 0.6f)
                )
            }
        }
        
        // ä¼˜å…ˆçº§æŒ‡ç¤ºå™¨
        Box(
            modifier = Modifier
                .size(8.dp)
                .background(
                    color = priorityColor,
                    shape = CircleShape
                )
        )
    }
}

// ç©ºçŠ¶æ€
Column(
    modifier = Modifier
        .fillMaxSize()
        .padding(DesignTokens.Spacing.xxl),
    horizontalAlignment = Alignment.CenterHorizontally,
    verticalArrangement = Arrangement.Center
) {
    Icon(
        imageVector = Icons.Default.CheckCircle,
        contentDescription = null,
        modifier = Modifier.size(64.dp),
        tint = MaterialTheme.colorScheme.onSurfaceVariant.copy(alpha = 0.3f)
    )
    Spacer(modifier = Modifier.height(DesignTokens.Spacing.medium))
    Text(
        text = "æ²¡æœ‰å¾…åŠäº‹é¡¹",
        style = MaterialTheme.typography.titleMedium,
        color = MaterialTheme.colorScheme.onSurfaceVariant.copy(alpha = 0.6f)
    )
    Spacer(modifier = Modifier.height(DesignTokens.Spacing.small))
    FlatButton(
        text = "æ·»åŠ ä»»åŠ¡",
        onClick = onAddTask,
        backgroundColor = DesignTokens.BrandColors.Todo
    )
}
```

### 3. HabitScreenï¼ˆä¹ æƒ¯ç•Œé¢ï¼‰

#### è®¾è®¡è¦ç‚¹
```kotlin
// ä¹ æƒ¯å¡ç‰‡
ModernCard(
    backgroundColor = MaterialTheme.colorScheme.surface,
    borderColor = habitColor.copy(alpha = 0.2f),
    onClick = onHabitClick
) {
    Column(modifier = Modifier.padding(DesignTokens.Spacing.medium)) {
        // å¤´éƒ¨ä¿¡æ¯
        Row(
            modifier = Modifier.fillMaxWidth(),
            horizontalArrangement = Arrangement.SpaceBetween,
            verticalAlignment = Alignment.Top
        ) {
            Row(verticalAlignment = Alignment.CenterVertically) {
                // ä¹ æƒ¯å›¾æ ‡
                Box(
                    modifier = Modifier
                        .size(40.dp)
                        .background(
                            color = habitColor.copy(alpha = 0.1f),
                            shape = CircleShape
                        )
                ) {
                    Icon(
                        imageVector = habitIcon,
                        contentDescription = null,
                        tint = habitColor,
                        modifier = Modifier
                            .size(24.dp)
                            .align(Alignment.Center)
                    )
                }
                
                Spacer(modifier = Modifier.width(DesignTokens.Spacing.small))
                
                Column {
                    Text(
                        text = habit.name,
                        style = MaterialTheme.typography.titleMedium,
                        fontWeight = FontWeight.Medium
                    )
                    Text(
                        text = "è¿ç»­ $streakDays å¤©",
                        style = MaterialTheme.typography.bodySmall,
                        color = MaterialTheme.colorScheme.onSurfaceVariant.copy(alpha = 0.6f)
                    )
                }
            }
            
            // ä»Šæ—¥çŠ¶æ€
            if (!habit.isCheckedToday) {
                FlatButton(
                    text = "æ‰“å¡",
                    onClick = onCheckIn,
                    modifier = Modifier.height(32.dp),
                    backgroundColor = habitColor,
                    contentPadding = PaddingValues(horizontal = 16.dp, vertical = 0.dp)
                )
            } else {
                Icon(
                    imageVector = Icons.Default.CheckCircle,
                    contentDescription = "å·²å®Œæˆ",
                    tint = DesignTokens.BrandColors.Success,
                    modifier = Modifier.size(24.dp)
                )
            }
        }
        
        Spacer(modifier = Modifier.height(DesignTokens.Spacing.small))
        
        // è¿›åº¦æ¡
        LinearProgressIndicator(
            progress = weeklyProgress,
            modifier = Modifier
                .fillMaxWidth()
                .height(4.dp)
                .clip(RoundedCornerShape(2.dp)),
            color = habitColor,
            trackColor = habitColor.copy(alpha = 0.1f)
        )
        
        Spacer(modifier = Modifier.height(DesignTokens.Spacing.xs))
        
        Text(
            text = "æœ¬å‘¨ $checkedDays/$targetDays å¤©",
            style = MaterialTheme.typography.labelSmall,
            color = MaterialTheme.colorScheme.onSurfaceVariant.copy(alpha = 0.6f)
        )
    }
}

// ç»Ÿè®¡è§†å›¾ - æç®€åŒ–
Card(
    modifier = Modifier.fillMaxWidth(),
    colors = CardDefaults.cardColors(
        containerColor = MaterialTheme.colorScheme.surfaceVariant.copy(alpha = 0.5f)
    ),
    elevation = CardDefaults.cardElevation(defaultElevation = 0.dp),
    border = BorderStroke(
        width = 1.dp,
        color = MaterialTheme.colorScheme.outline.copy(alpha = 0.1f)
    )
) {
    Row(
        modifier = Modifier
            .fillMaxWidth()
            .padding(DesignTokens.Spacing.medium),
        horizontalArrangement = Arrangement.SpaceEvenly
    ) {
        StatItem(
            value = "$totalCheckIns",
            label = "æ€»æ‰“å¡",
            color = DesignTokens.BrandColors.Success
        )
        StatItem(
            value = "$longestStreak",
            label = "æœ€é•¿è¿ç»­",
            color = DesignTokens.BrandColors.Warning
        )
        StatItem(
            value = "$completionRate%",
            label = "å®Œæˆç‡",
            color = DesignTokens.BrandColors.Info
        )
    }
}
```

### 4. ProfileScreenï¼ˆä¸ªäººä¸­å¿ƒï¼‰

#### è®¾è®¡è¦ç‚¹
```kotlin
// ä¸ªäººä¿¡æ¯å¡ç‰‡
ModernCard(
    backgroundColor = MaterialTheme.colorScheme.primaryContainer.copy(alpha = 0.05f),
    borderColor = MaterialTheme.colorScheme.primary.copy(alpha = 0.2f)
) {
    Row(
        modifier = Modifier
            .fillMaxWidth()
            .padding(DesignTokens.Spacing.large),
        verticalAlignment = Alignment.CenterVertically
    ) {
        // å¤´åƒå ä½
        Box(
            modifier = Modifier
                .size(64.dp)
                .background(
                    color = MaterialTheme.colorScheme.primary.copy(alpha = 0.1f),
                    shape = CircleShape
                )
        ) {
            Icon(
                imageVector = Icons.Default.Person,
                contentDescription = null,
                tint = MaterialTheme.colorScheme.primary,
                modifier = Modifier
                    .size(32.dp)
                    .align(Alignment.Center)
            )
        }
        
        Spacer(modifier = Modifier.width(DesignTokens.Spacing.medium))
        
        Column {
            Text(
                text = user.name,
                style = MaterialTheme.typography.titleLarge,
                fontWeight = FontWeight.Medium
            )
            Text(
                text = "ä½¿ç”¨ $daysSinceJoined å¤©",
                style = MaterialTheme.typography.bodyMedium,
                color = MaterialTheme.colorScheme.onSurfaceVariant.copy(alpha = 0.6f)
            )
        }
    }
}

// è®¾ç½®åˆ†ç»„
Column(
    modifier = Modifier.fillMaxWidth(),
    verticalArrangement = Arrangement.spacedBy(DesignTokens.Spacing.small)
) {
    Text(
        text = "åŸºç¡€è®¾ç½®",
        style = MaterialTheme.typography.titleSmall,
        color = MaterialTheme.colorScheme.primary,
        modifier = Modifier.padding(horizontal = DesignTokens.Spacing.medium)
    )
    
    SettingItem(
        icon = Icons.Default.ColorLens,
        title = "ä¸»é¢˜è®¾ç½®",
        subtitle = "æ·±è‰²æ¨¡å¼ã€åŠ¨æ€é¢œè‰²",
        onClick = onThemeSettings
    )
    
    SettingItem(
        icon = Icons.Default.Notifications,
        title = "é€šçŸ¥è®¾ç½®",
        subtitle = "æé†’ã€å£°éŸ³ã€æŒ¯åŠ¨",
        onClick = onNotificationSettings
    )
}

// è®¾ç½®é¡¹ç»„ä»¶
@Composable
fun SettingItem(
    icon: ImageVector,
    title: String,
    subtitle: String? = null,
    onClick: () -> Unit
) {
    ModernCard(
        onClick = onClick,
        backgroundColor = MaterialTheme.colorScheme.surface,
        borderColor = Color.Transparent,
        elevation = 0.dp
    ) {
        Row(
            modifier = Modifier
                .fillMaxWidth()
                .padding(
                    horizontal = DesignTokens.Spacing.medium,
                    vertical = DesignTokens.Spacing.medium
                ),
            verticalAlignment = Alignment.CenterVertically
        ) {
            Icon(
                imageVector = icon,
                contentDescription = null,
                tint = MaterialTheme.colorScheme.onSurfaceVariant,
                modifier = Modifier.size(24.dp)
            )
            
            Spacer(modifier = Modifier.width(DesignTokens.Spacing.medium))
            
            Column(modifier = Modifier.weight(1f)) {
                Text(
                    text = title,
                    style = MaterialTheme.typography.bodyLarge
                )
                subtitle?.let {
                    Text(
                        text = it,
                        style = MaterialTheme.typography.bodySmall,
                        color = MaterialTheme.colorScheme.onSurfaceVariant.copy(alpha = 0.6f)
                    )
                }
            }
            
            Icon(
                imageVector = Icons.Default.ChevronRight,
                contentDescription = null,
                tint = MaterialTheme.colorScheme.onSurfaceVariant.copy(alpha = 0.6f),
                modifier = Modifier.size(20.dp)
            )
        }
    }
}
```

## ğŸ¨ é€šç”¨ç»„ä»¶è§„èŒƒ

### 1. æ ‡å‡†åˆ—è¡¨é¡¹
```kotlin
@Composable
fun FlatListItem(
    title: String,
    subtitle: String? = null,
    leadingContent: @Composable (() -> Unit)? = null,
    trailingContent: @Composable (() -> Unit)? = null,
    onClick: (() -> Unit)? = null,
    modifier: Modifier = Modifier
) {
    val containerModifier = if (onClick != null) {
        modifier.clickable { onClick() }
    } else modifier
    
    Surface(
        modifier = containerModifier,
        color = MaterialTheme.colorScheme.surface,
        shape = RoundedCornerShape(DesignTokens.BorderRadius.medium)
    ) {
        Row(
            modifier = Modifier
                .fillMaxWidth()
                .padding(DesignTokens.Spacing.medium),
            verticalAlignment = Alignment.CenterVertically
        ) {
            leadingContent?.invoke()
            
            if (leadingContent != null) {
                Spacer(modifier = Modifier.width(DesignTokens.Spacing.medium))
            }
            
            Column(modifier = Modifier.weight(1f)) {
                Text(
                    text = title,
                    style = MaterialTheme.typography.bodyLarge,
                    color = MaterialTheme.colorScheme.onSurface
                )
                subtitle?.let {
                    Text(
                        text = it,
                        style = MaterialTheme.typography.bodySmall,
                        color = MaterialTheme.colorScheme.onSurfaceVariant.copy(alpha = 0.6f)
                    )
                }
            }
            
            trailingContent?.invoke()
        }
    }
}
```

### 2. æ‰å¹³å¯¹è¯æ¡†
```kotlin
@Composable
fun FlatDialog(
    onDismissRequest: () -> Unit,
    title: String,
    content: @Composable () -> Unit,
    confirmButton: @Composable () -> Unit,
    dismissButton: @Composable (() -> Unit)? = null
) {
    AlertDialog(
        onDismissRequest = onDismissRequest,
        title = {
            Text(
                text = title,
                style = MaterialTheme.typography.headlineSmall,
                fontWeight = FontWeight.Medium
            )
        },
        text = content,
        confirmButton = confirmButton,
        dismissButton = dismissButton,
        shape = RoundedCornerShape(DesignTokens.BorderRadius.large),
        containerColor = MaterialTheme.colorScheme.surface,
        tonalElevation = 0.dp
    )
}
```

### 3. æ‰å¹³FAB
```kotlin
@Composable
fun FlatFAB(
    onClick: () -> Unit,
    modifier: Modifier = Modifier,
    containerColor: Color = MaterialTheme.colorScheme.primary,
    content: @Composable () -> Unit
) {
    FloatingActionButton(
        onClick = onClick,
        modifier = modifier,
        containerColor = containerColor,
        contentColor = Color.White,
        elevation = FloatingActionButtonDefaults.elevation(
            defaultElevation = 1.dp,
            pressedElevation = 2.dp,
            focusedElevation = 1.dp,
            hoveredElevation = 2.dp
        ),
        shape = RoundedCornerShape(DesignTokens.BorderRadius.large)
    ) {
        content()
    }
}
```

## ğŸ“ ç»Ÿä¸€è§„èŒƒæ€»ç»“

### é¢œè‰²ä½¿ç”¨
1. **ä¸»è‰²è°ƒ**ï¼šä½¿ç”¨DesignTokens.BrandColorsä¸­çš„æŸ”å’Œè‰²
2. **é€æ˜åº¦**ï¼š
   - èƒŒæ™¯ï¼š5%
   - è¾¹æ¡†ï¼š10-20%
   - æ¬¡è¦æ–‡å­—ï¼š60%
   - ç¦ç”¨çŠ¶æ€ï¼š30%

### é—´è·è§„èŒƒ
- å¡ç‰‡å†…è¾¹è·ï¼š16dp (medium)
- å¡ç‰‡é—´è·ï¼š16dp (medium)  
- å…ƒç´ é—´è·ï¼š8dp (small)
- å›¾æ ‡æ–‡å­—é—´è·ï¼š8dp (small)

### åœ†è§’è§„èŒƒ
- æŒ‰é’®ï¼š4dp (small)
- å¡ç‰‡ï¼š8dp (medium)
- å¯¹è¯æ¡†ï¼š12dp (large)
- FABï¼š12dp (large)

### é˜´å½±è§„èŒƒ
- æ™®é€šå¡ç‰‡ï¼š0dp (ä½¿ç”¨è¾¹æ¡†)
- FABï¼š1dp
- å¯¹è¯æ¡†ï¼š0dp (ä½¿ç”¨tonalElevation)

## ğŸš€ å®æ–½æ­¥éª¤

1. **ç¬¬ä¸€æ­¥**ï¼šåˆ›å»ºé€šç”¨ç»„ä»¶ï¼ˆFlatDialogã€FlatFABã€FlatListItemç­‰ï¼‰
2. **ç¬¬äºŒæ­¥**ï¼šæŒ‰ä¼˜å…ˆçº§é€ä¸ªä¼˜åŒ–é¡µé¢
3. **ç¬¬ä¸‰æ­¥**ï¼šç»Ÿä¸€æµ‹è¯•éªŒè¯

---

**æ ¸å¿ƒåŸåˆ™**ï¼šä¿æŒæç®€ã€çªå‡ºå†…å®¹ã€ç»Ÿä¸€é£æ ¼