# åˆ†ç±»ç³»ç»Ÿä¿®å¤å¿«é€Ÿæ¸…å•

## ğŸš¨ ç´§æ€¥ä¿®å¤ï¼ˆ5åˆ†é’Ÿï¼‰

### 1. ä¿®æ”¹æ–‡ä»¶
`app/src/main/java/com/ccxiaoji/app/data/local/dao/TransactionDao.kt`

### 2. ä¿®æ”¹ä»£ç ï¼ˆç¬¬22è¡Œï¼‰
```diff
@Query("""
    SELECT category, SUM(amountCents) as total 
    FROM transactions 
    WHERE userId = :userId 
    AND createdAt >= :startTime 
    AND createdAt < :endTime 
    AND isDeleted = 0 
+   AND category IS NOT NULL
    GROUP BY category
""")
```

### 3. æµ‹è¯•å‘½ä»¤
```bash
# Windows
debug_database.bat

# Linux/Mac
./debug_database.sh
```

## âœ… éªŒè¯ä¿®å¤

1. **æ¸…ç†æ•°æ®**
   ```bash
   adb shell pm clear com.ccxiaoji.app
   ```

2. **é‡æ–°å®‰è£…**
   ```bash
   gradlew installDebug
   ```

3. **æµ‹è¯•æ­¥éª¤**
   - [ ] æ‰“å¼€åº”ç”¨
   - [ ] ç‚¹å‡»è®°è´¦é¡µé¢ï¼ˆä¸é—ªé€€ï¼‰
   - [ ] æ·»åŠ ä¸€ç¬”äº¤æ˜“ï¼ˆä¸é—ªé€€ï¼‰
   - [ ] è¿”å›æŸ¥çœ‹åˆ—è¡¨ï¼ˆæ­£å¸¸æ˜¾ç¤ºï¼‰

## ğŸ“‹ é—®é¢˜è¿½è¸ª

| çŠ¶æ€ | ä»»åŠ¡ | å¤‡æ³¨ |
|------|------|------|
| ğŸ”´ | ç´§æ€¥ä¿®å¤é—ªé€€ | æ·»åŠ  NULL æ£€æŸ¥ |
| ğŸŸ¡ | æ•°æ®å…¼å®¹å¤„ç† | 24å°æ—¶å†…å®Œæˆ |
| âšª | å®Œæ•´ç³»ç»Ÿè¿ç§» | ä¸€å‘¨å†…å®Œæˆ |

## ğŸ” é”™è¯¯ç‰¹å¾
```
java.lang.NullPointerException: Parameter specified as non-null is null: 
method com.ccxiaoji.app.data.local.dao.CategoryTotal.<init>, parameter category
```

## ğŸ“ è”ç³»æ–¹å¼
- è¯¦ç»†æ–‡æ¡£ï¼š[åˆ†ç±»ç³»ç»Ÿè¿ç§»ä¿®å¤æŒ‡å—](./åˆ†ç±»ç³»ç»Ÿè¿ç§»ä¿®å¤æŒ‡å—.md)
- é—®é¢˜åé¦ˆï¼šåˆ›å»º Issue

---
æ›´æ–°æ—¶é—´ï¼š2025-06-06 21:30