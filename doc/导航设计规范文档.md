# CC小记导航设计规范文档

## 一、设计背景

CC小记是一个综合类生活管理应用，不仅仅是记账工具。应用采用模块化设计，当前包含记账、待办、习惯等模块，未来还会扩展更多功能模块。本文档定义了统一的导航设计规范，确保各模块在保持独立性的同时，提供一致的用户体验。

## 二、设计原则

### 2.1 核心原则
1. **模块独立性**：每个功能模块相对独立，拥有自己的功能体系
2. **导航一致性**：所有模块遵循相同的导航模式和交互方式
3. **功能分层**：根据使用频率和功能属性进行合理分层
4. **扩展性**：为未来新模块预留扩展空间

### 2.2 功能归属原则
- **模块核心功能** → 放在模块内部（侧边菜单）
- **通用工具功能** → 放在"我的"页面
- **快速操作** → 放在模块主页面
- **数据展示** → 首页卡片 + 模块内详情

## 三、整体导航架构

### 3.1 底部导航栏
```
┌─────┬─────┬─────┬─────┬─────┐
│ 首页 │ 待办 │ 记账 │ 习惯 │ 我的 │
└─────┴─────┴─────┴─────┴─────┘
```

**说明**：
- 固定5个标签，不可自定义
- 使用图标+文字的形式
- 当前选中项高亮显示
- 保持现有结构，为综合功能预留空间

### 3.2 模块内部导航模式

```
┌─────────────────────────────┐
│ ☰  模块标题  [筛选器]  🔍  │ ← 顶部栏
├─────────────────────────────┤
│                             │
│      核心内容区域           │
│                             │
│                             │
│                        ⊕    │ ← 浮动操作按钮
└─────────────────────────────┘
     ↑
  侧边菜单
```

## 四、页面详细设计

### 4.1 首页设计

#### 布局结构
```
首页
├── 顶部栏
│   ├── Logo/应用名称
│   └── 通知图标（预留）
│
├── 今日概览卡片
│   ├── 今日日期（大字体）
│   ├── 今日收支总额
│   └── 问候语（早上好/下午好/晚上好）
│
├── 记账模块卡片
│   ├── 标题：记账
│   ├── 今日数据
│   │   ├── 收入：+¥XXX
│   │   └── 支出：-¥XXX
│   ├── 本月预算进度条
│   └── 快速操作：记一笔
│
├── 待办模块卡片
│   ├── 标题：待办
│   ├── 今日待办：X项
│   ├── 已完成：X项
│   └── 快速操作：查看待办
│
├── 习惯模块卡片
│   ├── 标题：习惯
│   ├── 今日打卡：X/X
│   ├── 连续天数：X天
│   └── 快速操作：去打卡
│
└── 底部留白
```

#### 设计规范
- **卡片样式**：Material Design卡片，8dp圆角，轻微阴影
- **卡片间距**：16dp
- **内边距**：16dp
- **颜色方案**：每个模块使用独特的主题色
- **交互**：
  - 点击卡片跳转到对应模块
  - 快速操作按钮直接执行功能
  - 下拉刷新更新所有数据

### 4.2 记账模块设计

#### 主页面结构
```
记账主页面
├── 顶部栏
│   ├── 菜单图标（☰）
│   ├── 标题：记账
│   ├── 月份选择器（2025年5月 ▼）
│   └── 搜索图标（🔍）
│
├── 本月收支概览条
│   ├── 收入：¥XXX
│   ├── 支出：¥XXX
│   └── 结余：¥XXX
│
├── 交易列表
│   ├── 日期分组标题
│   └── 交易项
│       ├── 分类图标
│       ├── 分类名称
│       ├── 备注
│       └── 金额
│
└── 浮动添加按钮（+）
    └── 长按展开：记支出 | 记收入 | 转账
```

#### 侧边菜单结构
```
记账功能菜单
├── 头部
│   ├── 用户头像（小）
│   └── 当前账户：XXX账户
│
├── 数据查看
│   ├── 📊 统计分析
│   └── 💰 资产总览
│
├── 账务管理
│   ├── 💳 账户管理
│   ├── 📁 分类管理
│   └── 🔄 定期交易
│
└── 财务规划
    ├── 📈 预算管理
    └── 🎯 储蓄目标
```

#### 交互规范
- **菜单触发**：点击左上角图标或从左边缘右滑
- **菜单宽度**：屏幕宽度的80%，最大300dp
- **遮罩层**：半透明黑色（透明度60%）
- **动画**：300ms的平滑滑入滑出
- **手势**：支持滑动关闭

### 4.3 "我的"页面设计

#### 页面结构
```
我的
├── 个人信息区
│   ├── 头像（大）
│   ├── 用户名/昵称
│   └── 个人签名
│
├── 模块设置
│   ├── ⚙️ 记账设置
│   │   ├── 默认账户
│   │   ├── 记账提醒
│   │   └── 快速记账设置
│   ├── ⚙️ 待办设置（未来）
│   └── ⚙️ 习惯设置（未来）
│
├── 数据管理
│   ├── 💾 数据备份
│   ├── 📥 数据恢复
│   ├── 📤 数据导出
│   │   ├── 导出记账数据
│   │   ├── 导出待办数据
│   │   └── 导出习惯数据
│   ├── 🔧 批量操作
│   │   ├── 批量删除交易
│   │   ├── 批量修改分类
│   │   └── 批量导入数据
│   └── 🗑️ 清理缓存
│
├── 应用设置
│   ├── 🎨 主题设置
│   ├── 🌐 语言设置
│   ├── 🔤 字体大小
│   └── 🔔 通知设置
│
├── 安全隐私
│   ├── 🔒 应用锁
│   ├── 🛡️ 隐私设置
│   └── 🔑 权限管理
│
└── 其他
    ├── ❓ 使用帮助
    ├── 💬 意见反馈
    ├── ℹ️ 关于我们
    └── 🔄 版本更新
```

#### 设计规范
- **分组样式**：每组使用标题分隔
- **列表项**：图标（24dp）+ 标题 + 副标题/状态
- **分隔线**：组内项目间使用细分隔线
- **点击反馈**：Material波纹效果

## 五、统一交互规范

### 5.1 通用交互模式
1. **侧边菜单**
   - 触发方式：点击菜单图标或左滑手势
   - 关闭方式：点击遮罩、右滑手势或返回键
   - 动画时长：300ms
   - 遮罩透明度：60%

2. **搜索功能**
   - 位置：统一在右上角
   - 展开方式：点击图标展开搜索框
   - 实时搜索：输入300ms后触发

3. **添加操作**
   - 位置：右下角浮动按钮
   - 扩展方式：长按显示更多选项
   - 图标：统一使用"+"

4. **时间切换**
   - 位置：顶部中间
   - 样式：下拉选择器
   - 格式：YYYY年MM月

### 5.2 手势操作
- **下拉刷新**：所有列表页面支持
- **侧滑删除**：列表项支持（需二次确认）
- **长按操作**：显示更多选项
- **双击**：快速回到顶部

### 5.3 导航层级
```
底部导航（一级）
└── 模块主页面（二级）
    ├── 侧边菜单功能（三级）
    └── 详情页面（三级）
```

## 六、视觉设计规范

### 6.1 颜色定义
```
主色调：
- 记账模块：#4CAF50（绿色）
- 待办模块：#2196F3（蓝色）
- 习惯模块：#FF9800（橙色）
- 通用背景：#F5F5F5（浅灰）
```

### 6.2 字体规范
```
标题：16sp Medium
正文：14sp Regular
辅助文字：12sp Regular
金额数字：18sp Medium
```

### 6.3 间距规范
```
页面边距：16dp
卡片间距：16dp
列表项高度：56dp
图标大小：24dp
浮动按钮：56dp
```

## 七、实施指南

### 7.1 开发优先级
1. **第一阶段**：首页模块化改造 ✅ (2025-05-28 完成)
   - ✅ 实现模块卡片组件（TodayOverviewCard、LedgerModuleCard、TodoModuleCard、HabitModuleCard）
   - ✅ 完成数据聚合逻辑（更新HomeViewModel添加今日数据）
   - ✅ 添加快速操作功能（每个模块卡片都有快速操作按钮）

2. **第二阶段**：记账模块导航改造 ✅ (2025-05-28 完成)
   - ✅ 实现侧边菜单框架（使用ModalNavigationDrawer）
   - ✅ 迁移现有功能（所有功能页面已存在并可导航）
   - ✅ 优化主页面展示（添加月份选择器、收支概览条）

3. **第三阶段**："我的"页面改造 ✅ (2025-05-28 完成)
   - ✅ 重组功能分类（个人信息、模块设置、数据管理、应用设置、安全隐私、其他）
   - ✅ 实现模块设置（记账设置、待办设置、习惯设置入口）
   - ✅ 完善数据管理功能（备份、恢复、导出、批量操作、清理缓存）

### 7.2 技术实现要点
1. **侧边菜单**：使用Scaffold的drawerContent
2. **模块卡片**：创建可复用的Card组件
3. **导航管理**：使用Navigation组件统一管理
4. **状态管理**：各模块独立的ViewModel

## 八、未来扩展指南

### 8.1 新模块接入流程
1. 在底部导航预留位置添加入口（如需要）
2. 创建模块主页面，遵循统一布局
3. 实现侧边菜单，包含模块特有功能
4. 在首页添加模块卡片
5. 在"我的"页面添加模块设置

### 8.2 待实现模块示例

#### 待办模块
```
侧边菜单
├── 📊 完成统计
├── 📂 项目管理
├── 🏷️ 标签管理
└── 📅 日程视图
```

#### 习惯模块
```
侧边菜单
├── 📊 习惯统计
├── 🎯 目标管理
├── 🏆 成就系统
└── 📈 进度分析
```

## 九、注意事项

1. **一致性检查**：新功能必须遵循本规范
2. **用户引导**：大版本更新需提供新手引导
3. **性能优化**：首页数据加载需异步处理
4. **适配考虑**：支持不同屏幕尺寸
5. **无障碍**：支持屏幕阅读器

## 十、版本记录

| 版本 | 日期 | 作者 | 说明 |
|------|------|------|------|
| 1.0 | 2025-05-28 | Claude | 初始版本，定义基础导航规范 |
| 1.1 | 2025-05-28 | Claude | 完成所有三个阶段的实施 |

## 十一、实施总结

### 11.1 完成情况
所有三个阶段的导航改造已全部完成：

1. **首页模块化**：
   - 实现了模块化卡片设计（今日概览、记账、待办、习惯）
   - 每个模块卡片包含数据展示和快速操作功能
   - 数据实时更新，提供良好的用户体验

2. **记账模块导航**：
   - 使用 ModalNavigationDrawer 实现侧边菜单
   - 添加月份选择器功能
   - 实现月度收支概览条
   - 所有子功能页面均可正常导航

3. **"我的"页面改造**：
   - 完整实现六大功能分组
   - 个人信息卡片展示
   - 统一的设置项样式和交互
   - 支持未来功能扩展

### 11.2 技术亮点
- 使用 Jetpack Compose 实现所有UI组件
- 遵循 Material Design 3 设计规范
- 组件化开发，提高代码复用性
- 响应式设计，支持不同屏幕尺寸

### 11.3 后续优化建议
1. 完善占位功能的具体实现
2. 添加动画效果提升用户体验
3. 实现深色主题支持
4. 添加手势操作支持
5. 性能优化和内存管理

---

*本文档为CC小记应用的核心设计规范，所有开发人员必须遵循。如有疑问或建议，请联系设计团队。*