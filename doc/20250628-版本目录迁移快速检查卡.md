# 版本目录迁移快速检查卡

## 🚀 快速执行步骤（每个模块）

### 1️⃣ 准备（1分钟）
```bash
git status                                    # 确保干净
./gradlew :shared-user:build                 # 确保能编译
```

### 2️⃣ 分析（3分钟）
```bash
cat shared/user/build.gradle.kts             # 查看文件
rg '"[0-9]+\.[0-9]+\.[0-9]+"' shared/user/build.gradle.kts  # 找版本
```

### 3️⃣ 替换（10分钟）
| 找到 | 替换为 |
|------|--------|
| compileSdk = 34 | compileSdk = libs.versions.compileSdk.get().toInt() |
| minSdk = 26 | minSdk = libs.versions.minSdk.get().toInt() |
| "androidx.core:core-ktx:1.12.0" | libs.androidx.core.ktx |
| "2.7.0" (lifecycle) | libs.androidx.lifecycle.* |
| "2024.02.00" (compose) | platform(libs.compose.bom) |

### 4️⃣ 验证（3分钟）
```bash
./gradlew :shared-user:build                 # 编译检查
git diff shared/user/build.gradle.kts        # 确认只改版本
```

### 5️⃣ 提交（2分钟）
```bash
git add shared/user/build.gradle.kts
git commit -m "refactor: 迁移shared-user模块到版本目录"
```

## ⚡ 常用版本映射速查

### Android配置
```kotlin
compileSdk = libs.versions.compileSdk.get().toInt()
minSdk = libs.versions.minSdk.get().toInt()  
targetSdk = libs.versions.targetSdk.get().toInt()
buildToolsVersion = libs.versions.buildTools.get()
```

### Kotlin配置
```kotlin
kotlinOptions {
    jvmTarget = "17"  // 保持不变
}
composeOptions {
    kotlinCompilerExtensionVersion = libs.versions.compose.compiler.get()
}
```

### 常用依赖
```kotlin
// AndroidX
libs.androidx.core.ktx                    // core-ktx
libs.androidx.lifecycle.runtime.ktx       // lifecycle-runtime-ktx
libs.androidx.lifecycle.viewmodel.compose // lifecycle-viewmodel-compose

// Compose
platform(libs.compose.bom)                // compose-bom
libs.compose.ui                          // ui
libs.compose.material3                   // material3

// Hilt
libs.hilt.android                        // hilt-android
libs.hilt.compiler                       // hilt-compiler (ksp)

// Room
libs.room.runtime                        // room-runtime
libs.room.ktx                           // room-ktx
libs.room.compiler                       // room-compiler (ksp)

// 其他
libs.kotlin.coroutines                   // kotlinx-coroutines
libs.kotlin.datetime                     // kotlinx-datetime
libs.kotlin.serialization.json           // kotlinx-serialization
```

## 🚨 红线规则（绝对不能）
1. ❌ 改变版本号
2. ❌ 添加/删除依赖
3. ❌ 修改import语句
4. ❌ 改动其他文件
5. ❌ 同时改多个模块

## ✅ 完成标准
- [ ] 0个硬编码版本（除versionCode/Name）
- [ ] 编译成功
- [ ] git diff只有版本引用变化
- [ ] 依赖版本保持不变

## 📱 模块顺序
1. shared-user （最简单）
2. shared-sync
3. shared-backup  
4. shared-notification （最复杂）

---
*快速参考卡 - 打印后放在手边*  
*详细说明见：20250628-版本目录迁移执行手册.md*