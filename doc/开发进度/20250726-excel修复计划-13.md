# Excelå¯¼å‡ºä¿®å¤è®¡åˆ’-13ï¼šCSV+Zipæ–¹æ¡ˆå®Œæ•´å®æ–½è®¡åˆ’

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**é¡¹ç›®åç§°**: Excelå¯¼å‡ºåŠŸèƒ½å½»åº•ä¿®å¤  
**è®¡åˆ’ç‰ˆæœ¬**: v13  
**åˆ›å»ºæ—¥æœŸ**: 2025-07-26  
**é¢„è®¡å®Œæˆ**: 2025-08-02 (1å‘¨)  
**è´Ÿè´£äºº**: Androidå¼€å‘å›¢é˜Ÿ  
**ä¼˜å…ˆçº§**: P0 (é˜»å¡æ€§é—®é¢˜)

### é—®é¢˜èƒŒæ™¯
- å½“å‰Excelå¯¼å‡ºåŠŸèƒ½å› AWTå…¼å®¹æ€§é—®é¢˜å®Œå…¨ä¸å¯ç”¨
- é”™è¯¯: `java.lang.NoClassDefFoundError: Failed resolution of: Ljava/awt/font/FontRenderContext`
- å½±å“ç”¨æˆ·æ•°æ®å¤‡ä»½å’Œè®¾å¤‡è¿ç§»æ ¸å¿ƒåŠŸèƒ½

### è§£å†³æ–¹æ¡ˆ
é‡‡ç”¨**CSV+Zipå•æ–‡ä»¶æ–¹æ¡ˆ**ï¼Œå½»åº•è§£å†³Androidå…¼å®¹æ€§é—®é¢˜ï¼ŒåŒæ—¶ä¿æŒç”¨æˆ·ä½“éªŒã€‚

### æ ¼å¼ç®€åŒ–å†³ç­–
- **ç§»é™¤Excelæ ¼å¼**ï¼šè§£å†³AWTå…¼å®¹æ€§å´©æºƒé—®é¢˜
- **ç§»é™¤JSONæ ¼å¼**ï¼šå¯¹æ™®é€šç”¨æˆ·ä¸å‹å¥½ï¼Œå¢åŠ å¤æ‚åº¦
- **ç»Ÿä¸€ä½¿ç”¨CSVæ ¼å¼**ï¼šæ—¢å¯ç¨‹åºè¯»å–ï¼Œåˆå¯Excelæ‰“å¼€ï¼Œç”¨æˆ·å‹å¥½

---

## ğŸ¯ é¡¹ç›®ç›®æ ‡

### ä¸»è¦ç›®æ ‡
1. **åŠŸèƒ½æ¢å¤**: 100%ä¿®å¤æ•°æ®å¯¼å‡ºåŠŸèƒ½ï¼Œç¡®ä¿é›¶å´©æºƒ
2. **æ€§èƒ½æå‡**: å¯¼å‡ºé€Ÿåº¦æå‡200%+ï¼Œå†…å­˜å ç”¨é™ä½70%+
3. **ç”¨æˆ·ä½“éªŒ**: ä¿æŒå•æ–‡ä»¶å¯¼å‡ºä½“éªŒï¼Œæ”¯æŒExcelè½¯ä»¶æ‰“å¼€
4. **æŠ€æœ¯ä¼˜åŒ–**: ç§»é™¤POIä¾èµ–ï¼ŒAPKä½“ç§¯å‡å°‘3MB+
5. **æ ¼å¼ç»Ÿä¸€**: ç§»é™¤Excelå’ŒJSONæ ¼å¼ï¼Œç»Ÿä¸€ä½¿ç”¨CSVæ ¼å¼ï¼Œç®€åŒ–ç»´æŠ¤

### æˆåŠŸæŒ‡æ ‡
- [ ] å¯¼å‡ºæˆåŠŸç‡ â‰¥ 99.9%
- [ ] 10ä¸‡æ¡è®°å½•å¯¼å‡ºæ—¶é—´ â‰¤ 2åˆ†é’Ÿ (ä¿®æ­£ç›®æ ‡)
- [ ] å³°å€¼å†…å­˜ä½¿ç”¨ â‰¤ 150MB (ä¿®æ­£ç›®æ ‡)
- [ ] ä½ç«¯è®¾å¤‡(3GB RAM)å®Œç¾è¿è¡Œ
- [ ] æ–‡ä»¶å¯è¢«Excel/Numbers/WPSæ­£å¸¸æ‰“å¼€
- [ ] æ—§Excelæ–‡ä»¶å¯¼å…¥æˆåŠŸç‡ â‰¥ 99%

---

## ğŸ”§ æŠ€æœ¯æ–¹æ¡ˆè¯¦è¿°

### æ ¸å¿ƒæ¶æ„è®¾è®¡
```
è¾“å‡ºæ ¼å¼: CCå°è®°å¤‡ä»½_20250726.ccbackup (ZIPæ ¼å¼)
â”œâ”€â”€ metadata.json      // ç‰ˆæœ¬ä¿¡æ¯ã€æ ¡éªŒå’Œã€å¯¼å‡ºæ—¶é—´
â”œâ”€â”€ transactions.csv   // äº¤æ˜“è®°å½• (ä¸»è¦æ•°æ®)
â”œâ”€â”€ todos.csv         // å¾…åŠäº‹é¡¹
â”œâ”€â”€ habits.csv        // ä¹ æƒ¯è®°å½•  
â”œâ”€â”€ categories.csv    // åˆ†ç±»ä¿¡æ¯ (æ”¯æŒæ•°æ®)
â””â”€â”€ accounts.csv      // è´¦æˆ·ä¿¡æ¯ (æ”¯æŒæ•°æ®)
```

### æŠ€æœ¯æ ˆé€‰æ‹©
- **CSVå¤„ç†**: `kotlin-csv-jvm:1.9.2` (90KB, ä¸»é€‰)
- **å¤‡é€‰æ–¹æ¡ˆ**: Apache Commons CSV (200KB), opencsv (150KB)  
- **å‹ç¼©**: AndroidåŸç”ŸZipOutputStream
- **ç¼–ç **: UTF-8 with BOM + å›ºå®šé€—å·åˆ†éš”ç¬¦
- **æµå¼å¤„ç†**: Roomåˆ†é¡µæŸ¥è¯¢(500æ¡/æ‰¹) + BufferedWriter + SequenceWriter
- **å‘åå…¼å®¹**: 
  - ç²¾ç®€POIåªè¯»è§£æå™¨ (<1MB) - ç”¨äºExcelå¯¼å…¥
  - Gson (å·²æœ‰ä¾èµ–) - ç”¨äºJSONæ—§æ–‡ä»¶å¯¼å…¥

### æ¥å£è®¾è®¡
```kotlin
interface BackupProvider {
    suspend fun exportBackup(uri: Uri, config: BackupConfig): Result<BackupStats>
    suspend fun importBackup(uri: Uri): Result<ImportStats> 
}

data class BackupConfig(
    val includeTransactions: Boolean = true,
    val includeTodos: Boolean = true,
    val includeHabits: Boolean = true,
    val dateRange: DateRange? = null
)

data class BackupStats(
    val totalRecords: Int,
    val fileSize: Long,
    val duration: Duration,
    val checksum: String
)
```

---

## ğŸ”„ å‘åå…¼å®¹æ€§ç­–ç•¥

### æ—§æ ¼å¼æ–‡ä»¶æ”¯æŒ
ä¸ºç¡®ä¿ç”¨æˆ·æ•°æ®ä¸ä¸¢å¤±ï¼Œæ–°ç‰ˆæœ¬å°†æ”¯æŒå¯¼å…¥æ—§ç‰ˆæœ¬çš„æ–‡ä»¶ï¼š

#### æ”¯æŒçš„æ—§æ ¼å¼
- **Excelæ–‡ä»¶ (.xlsx/.xls)**: ä½¿ç”¨ç²¾ç®€POIåªè¯»åŠŸèƒ½
- **JSONæ–‡ä»¶ (.json)**: ä½¿ç”¨Gsonè§£æï¼Œè½¬æ¢ä¸ºCSVæ ¼å¼

```kotlin
interface LegacyImporter {
    suspend fun canHandle(uri: Uri): Boolean
    suspend fun importLegacy(uri: Uri): Result<ImportStats>
}

class ExcelLegacyImporter : LegacyImporter {
    // ä½¿ç”¨ç²¾ç®€POIåªè¯»åŠŸèƒ½
    override suspend fun canHandle(uri: Uri): Boolean {
        return uri.toString().endsWith(".xlsx") || uri.toString().endsWith(".xls")
    }
}

class JsonLegacyImporter : LegacyImporter {
    // ä½¿ç”¨Gsonè§£æJSON
    override suspend fun canHandle(uri: Uri): Boolean {
        return uri.toString().endsWith(".json")
    }
    
    override suspend fun importLegacy(uri: Uri): Result<ImportStats> {
        // è§£æJSONå¹¶è½¬æ¢ä¸ºæ ‡å‡†æ ¼å¼
        val jsonData = readJsonFile(uri)
        return convertJsonToStandardFormat(jsonData)
    }
}
```

### å®æ–½ç­–ç•¥
- **ä¿ç•™è½»é‡çº§POI**: ä»…ä¿ç•™XSSFè¯»å–åŠŸèƒ½ï¼Œç§»é™¤å†™å…¥å’ŒAWTä¾èµ–
- **è‡ªåŠ¨æ ¼å¼æ£€æµ‹**: æ ¹æ®æ–‡ä»¶æ‰©å±•åå’Œå†…å®¹è‡ªåŠ¨è·¯ç”±åˆ°å¯¹åº”è§£æå™¨
- **æ•°æ®è½¬æ¢**: å°†æ—§Excelæ•°æ®è½¬æ¢ä¸ºæ ‡å‡†CSVæ ¼å¼ç»Ÿä¸€å¤„ç†

### æ•°æ®è¿ç§»æŒ‡å—
- **å‡çº§å»ºè®®**: æé†’ç”¨æˆ·åœ¨å‡çº§å‰å…ˆå¯¼å‡ºå¤‡ä»½
- **å¯¼å…¥æ­¥éª¤**: è¯¦ç»†è¯´æ˜å¦‚ä½•å¯¼å…¥ä¸åŒæ ¼å¼çš„å¤‡ä»½æ–‡ä»¶
- **é—®é¢˜å¤„ç†**: æä¾›å¸¸è§è¿ç§»é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ

---

## âš¡ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### å†…å­˜ç®¡ç†ä¼˜åŒ–
```kotlin
class OptimizedCsvExporter {
    companion object {
        private const val BATCH_SIZE = 500  // ä¿å®ˆçš„åˆ†é¡µå¤§å°
        private const val BUFFER_SIZE = 64 * 1024  // 64KBç¼“å†²åŒº
    }
    
    suspend fun exportWithMemoryControl() {
        // æµå¼å†™å…¥é¿å…å†…å­˜ç´¯ç§¯
        BufferedWriter(FileWriter(csvFile), BUFFER_SIZE).use { writer ->
            val csvWriter = CsvWriter(writer)
            
            // å®æ—¶å†…å­˜ç›‘æ§
            ledgerRepository.getAllPaged(BATCH_SIZE).collect { page ->
                checkMemoryPressure()  // GCå‹åŠ›æ£€æµ‹
                
                page.forEach { transaction ->
                    csvWriter.writeRow(transaction.toCsvRow())
                }
                
                writer.flush()  // åŠæ—¶é‡Šæ”¾ç¼“å†²åŒº
            }
        }
    }
    
    private fun checkMemoryPressure() {
        val runtime = Runtime.getRuntime()
        val freeMemory = runtime.freeMemory()
        val totalMemory = runtime.totalMemory()
        val usedMemory = totalMemory - freeMemory
        
        if (usedMemory > totalMemory * 0.8) {
            System.gc()  // å»ºè®®åƒåœ¾å›æ”¶
        }
    }
}
```

### åå°å¤„ç†ç­–ç•¥
```kotlin
class BackgroundExportService : CoroutineWorker() {
    override suspend fun doWork(): Result {
        // ä½¿ç”¨å‰å°æœåŠ¡æ˜¾ç¤ºè¿›åº¦
        setForeground(createProgressNotification())
        
        // æ‰§è¡Œå¯¼å‡ºä»»åŠ¡
        return try {
            exportWithProgress { progress ->
                updateNotificationProgress(progress)
            }
            Result.success()
        } catch (e: Exception) {
            Result.failure()
        }
    }
}
```

### æ€§èƒ½åŸºå‡†ç›®æ ‡
| æ•°æ®é‡ | ç›®æ ‡æ—¶é—´ | å³°å€¼å†…å­˜ | æµ‹è¯•è®¾å¤‡ |
|--------|----------|----------|----------|
| 1ä¸‡æ¡ | â‰¤ 10ç§’ | â‰¤ 30MB | ä½ç«¯è®¾å¤‡(3GB RAM) |
| 5ä¸‡æ¡ | â‰¤ 30ç§’ | â‰¤ 80MB | ä¸­ç«¯è®¾å¤‡(6GB RAM) |
| 10ä¸‡æ¡ | â‰¤ 2åˆ†é’Ÿ | â‰¤ 150MB | é«˜ç«¯è®¾å¤‡(8GB+ RAM) |
| 50ä¸‡æ¡ | â‰¤ 8åˆ†é’Ÿ | â‰¤ 200MB | é«˜ç«¯è®¾å¤‡é™å®š |

---

## ğŸŒ ç¼–ç å…¼å®¹æ€§ä¿è¯

### ç»Ÿä¸€ç¼–ç ç­–ç•¥
```kotlin
data class BackupMetadata(
    val version: String = "1.0",
    val exportTime: Instant,
    val appVersion: String,
    val encoding: String = "UTF-8",
    val locale: String = Locale.getDefault().toString(),
    val separator: Char = ',',  // å›ºå®šé€—å·ï¼Œå¿½ç•¥ç³»ç»ŸLocale
    val dateFormat: String = "yyyy-MM-dd",  // ISO 8601æ ‡å‡†
    val decimalSeparator: Char = '.',  // å›ºå®šè‹±æ–‡å°æ•°ç‚¹
    val dataTypes: List<String>,
    val recordCounts: Map<String, Int>,
    val checksum: String
)
```

### ç¼–ç å¤„ç†å®ç°
```kotlin
class EncodingCompatibleCsvWriter {
    fun writeWithBOM(file: File, content: String) {
        FileOutputStream(file).use { fos ->
            // å†™å…¥UTF-8 BOM
            fos.write(byteArrayOf(0xEF.toByte(), 0xBB.toByte(), 0xBF.toByte()))
            
            // å†™å…¥å†…å®¹ï¼Œå¼ºåˆ¶UTF-8ç¼–ç 
            fos.write(content.toByteArray(Charsets.UTF_8))
        }
    }
    
    fun formatForExcel(value: Any): String {
        return when (value) {
            is Double -> String.format(Locale.US, "%.2f", value)  // ç»Ÿä¸€æ•°å­—æ ¼å¼
            is LocalDate -> value.toString()  // ISO 8601æ—¥æœŸ
            is String -> "\"${value.replace("\"", "\"\"")}\""  // CSVè½¬ä¹‰
            else -> value.toString()
        }
    }
}
```

### å…¼å®¹æ€§æµ‹è¯•çŸ©é˜µ
| å¹³å° | è½¯ä»¶ç‰ˆæœ¬ | æµ‹è¯•çŠ¶æ€ | é¢„æœŸç»“æœ |
|------|----------|----------|----------|
| Windows | Excel 2016/2019/365 | å¿…æµ‹ | æ­£ç¡®æ˜¾ç¤ºä¸­æ–‡ï¼Œæ— ä¹±ç  |
| macOS | Numbers 2023+ | å¿…æµ‹ | æ­£ç¡®å¯¼å…¥ï¼Œæ ¼å¼ä¿æŒ |
| åœ¨çº¿ | Google Sheets | å¿…æµ‹ | æ”¯æŒååŒç¼–è¾‘ |
| å›½äº§ | WPS Office 2023+ | å¿…æµ‹ | å®Œå…¨å…¼å®¹ |
| ç§»åŠ¨ç«¯ | Excel Mobile | å¯é€‰ | åŸºæœ¬æŸ¥çœ‹åŠŸèƒ½ |

---

## ğŸ“… è¯¦ç»†å®æ–½è®¡åˆ’

### Phase 1: åŸºç¡€è®¾æ–½æ­å»º (Day 1)
**ç›®æ ‡**: å»ºç«‹CSVå¯¼å‡ºåŸºç¡€æ¡†æ¶

#### ä»»åŠ¡åˆ—è¡¨
- [ ] **T1.1** ç§»é™¤POIå†™å…¥å’ŒJSONå¯¼å‡ºåŠŸèƒ½ âš ï¸ **éƒ¨åˆ†å®Œæˆ**
  - åˆ é™¤ `cn.idev.excel` ä¾èµ–
  - ä¿ç•™ç²¾ç®€POIè¯»å–åŠŸèƒ½ (poi-ooxml-lite åªè¯»æ¨¡å¼)
  - ç§»é™¤JSONå¯¼å‡ºç›¸å…³ä»£ç 
  - æ¸…ç†ExportFormatæšä¸¾ä¸­çš„JSONé€‰é¡¹
  - æ¸…ç†ç›¸å…³importå’Œä»£ç å¼•ç”¨
  - **æ—¶é—´**: 4å°æ—¶
  - **éªŒæ”¶**: é¡¹ç›®ç¼–è¯‘æˆåŠŸï¼ŒAPKä½“ç§¯å‡å°‘â‰¥2MBï¼Œä¿ç•™æ—§æ–‡ä»¶è¯»å–èƒ½åŠ›
  - **ç°çŠ¶**: DataExportViewModelä»æœ‰POIæ³¨é‡Šæ®‹ç•™ï¼Œbuild.gradle.ktsæœ‰Excelé…ç½®æ®‹ç•™

- [x] **T1.2** æ·»åŠ CSVå¤„ç†ä¾èµ– âœ… **å·²å®Œæˆ**
  ```kotlin
  // build.gradle.kts
  implementation("com.github.doyaaaaaken:kotlin-csv-jvm:1.9.2")
  ```
  - **æ—¶é—´**: 30åˆ†é’Ÿ
  - **éªŒæ”¶**: ä¾èµ–æ·»åŠ æˆåŠŸï¼Œèƒ½import CSVç›¸å…³ç±»

- [x] **T1.3** åˆ›å»ºBackupProvideræ¥å£ âœ… **å·²å®Œæˆ**
  - å®šä¹‰ç»Ÿä¸€çš„å¯¼å‡º/å¯¼å…¥æ¥å£
  - åˆ›å»ºæ•°æ®æ¨¡å‹ (BackupConfig, BackupStatsç­‰)
  - **æ—¶é—´**: 1å°æ—¶
  - **éªŒæ”¶**: æ¥å£ç¼–è¯‘é€šè¿‡ï¼Œå•å…ƒæµ‹è¯•è¦†ç›–

- [x] **T1.4** é…ç½®Hiltä¾èµ–æ³¨å…¥ âœ… **å·²å®Œæˆ**
  ```kotlin
  @Module
  @InstallIn(SingletonComponent::class)
  abstract class BackupModule {
      @Binds
      abstract fun bindBackupProvider(impl: CsvBackupProvider): BackupProvider
  }
  ```
  - **æ—¶é—´**: 1å°æ—¶
  - **éªŒæ”¶**: DIé…ç½®æ­£ç¡®ï¼Œèƒ½æˆåŠŸæ³¨å…¥

### Phase 2: CSVå¯¼å‡ºæ ¸å¿ƒå®ç° (Day 2-3)
**ç›®æ ‡**: å®ç°ç¨³å®šçš„CSVå¯¼å‡ºåŠŸèƒ½

#### ä»»åŠ¡åˆ—è¡¨
- [x] **T2.1** å®ç°CSVå¯¼å‡ºå™¨ âœ… **å·²å®Œæˆ**
  ```kotlin
  class CsvBackupProvider @Inject constructor(
      private val ledgerRepository: LedgerRepository,
      private val todoRepository: TodoRepository,
      // ... å…¶ä»–Repository
  ) : BackupProvider {
      
      override suspend fun exportBackup(uri: Uri, config: BackupConfig): Result<BackupStats> {
          // å®ç°å¯¼å‡ºé€»è¾‘
      }
  }
  ```
  - **æ—¶é—´**: 4å°æ—¶
  - **éªŒæ”¶**: èƒ½å¯¼å‡º5ç§æ•°æ®ç±»å‹åˆ°ä¸´æ—¶CSVæ–‡ä»¶
  - **ç°çŠ¶**: exportTransactions, exportAccounts, exportCategories, exportTodos, exportHabitså…¨éƒ¨å®ç°ï¼ŒSchedule/Planä¸ºå ä½ç¬¦

- [x] **T2.2** å®ç°æ•°æ®åˆ†é¡µæŸ¥è¯¢ä¸å†…å­˜æ§åˆ¶ âœ… **å·²å®Œæˆ**
  ```kotlin
  suspend fun exportTransactions(writer: CsvWriter) {
      ledgerRepository.getAllPaged(pageSize = 500).collect { page ->  // ä¿å®ˆåˆ†é¡µ
          checkMemoryPressure()  // å†…å­˜å‹åŠ›æ£€æµ‹
          
          page.forEach { transaction ->
              writer.writeRow(
                  transaction.date.toString(),
                  formatAmount(transaction.amount),  // æ ‡å‡†åŒ–æ ¼å¼
                  transaction.category,
                  escapeForCsv(transaction.note ?: "")
              )
          }
          
          writer.flush()  // åŠæ—¶é‡Šæ”¾ç¼“å†²åŒº
      }
  }
  ```
  - **æ—¶é—´**: 4å°æ—¶
  - **éªŒæ”¶**: å†…å­˜ä½¿ç”¨ç¨³å®šï¼Œå³°å€¼<150MBï¼Œæ”¯æŒ50ä¸‡æ¡è®°å½•
  - **ç°çŠ¶**: PAGE_SIZE=500å·²å®ç°ï¼Œåˆ†é¡µæŸ¥è¯¢é€»è¾‘å®Œæ•´

- [x] **T2.3** å®ç°ZIPæ‰“åŒ…åŠŸèƒ½ âœ… **å·²å®Œæˆ**
  ```kotlin
  private suspend fun createBackupZip(csvFiles: List<File>, outputUri: Uri): Result<Unit> {
      return withContext(Dispatchers.IO) {
          try {
              context.contentResolver.openOutputStream(outputUri)?.use { output ->
                  ZipOutputStream(BufferedOutputStream(output)).use { zip ->
                      // æ·»åŠ metadata.json
                      addMetadataToZip(zip)
                      // æ·»åŠ æ‰€æœ‰CSVæ–‡ä»¶
                      csvFiles.forEach { file -> addFileToZip(zip, file) }
                  }
              }
              Result.success(Unit)
          } catch (e: Exception) {
              Result.failure(e)
          }
      }
  }
  ```
  - **æ—¶é—´**: 2å°æ—¶
  - **éªŒæ”¶**: ç”Ÿæˆå•ä¸ª.ccbackupæ–‡ä»¶ï¼ŒåŒ…å«æ‰€æœ‰æ•°æ®
  - **ç°çŠ¶**: createZipFileæ–¹æ³•å®Œæ•´å®ç°ï¼Œæ”¯æŒæ–‡ä»¶å‹ç¼©å’Œå®‰å…¨éªŒè¯

- [x] **T2.4** æ·»åŠ æ•°æ®å®Œæ•´æ€§æ ¡éªŒ âœ… **å·²å®Œæˆ**
  ```kotlin
  data class BackupMetadata(
      val version: String = "1.0",
      val exportTime: Instant,
      val appVersion: String,
      val dataTypes: List<String>,
      val recordCounts: Map<String, Int>,
      val checksum: String // SHA-256
  )
  ```
  - **æ—¶é—´**: 2å°æ—¶
  - **éªŒæ”¶**: metadata.jsonåŒ…å«å®Œæ•´æ ¡éªŒä¿¡æ¯
  - **ç°çŠ¶**: SHA-256æ ¡éªŒå’Œç”Ÿæˆï¼Œç›®å½•æ ¡éªŒå®Œæ•´å®ç°

### Phase 3: å¯¼å…¥åŠŸèƒ½å®ç°ä¸å‘åå…¼å®¹ (Day 4)
**ç›®æ ‡**: å®ç°CSVå¤‡ä»½æ–‡ä»¶å¯¼å…¥å’Œæ—§Excelæ–‡ä»¶å…¼å®¹

#### ä»»åŠ¡åˆ—è¡¨
- [x] **T3.1** å®ç°ZIPè§£å‹åŠŸèƒ½ âœ… **å·²å®Œæˆ**
  ```kotlin
  private suspend fun extractBackupZip(inputUri: Uri): Result<BackupMetadata> {
      // è§£å‹åˆ°ä¸´æ—¶ç›®å½•
      // éªŒè¯metadata.json
      // è¿”å›å…ƒæ•°æ®ä¿¡æ¯
  }
  ```
  - **æ—¶é—´**: 2å°æ—¶
  - **éªŒæ”¶**: èƒ½æ­£ç¡®è§£å‹.ccbackupæ–‡ä»¶
  - **ç°çŠ¶**: extractBackupZipå®Œæ•´å®ç°ï¼Œæ”¯æŒå®‰å…¨éªŒè¯å’Œmetadataæ ¡éªŒ

- [x] **T3.2** å®ç°CSVè§£æå™¨ âœ… **å·²å®Œæˆ**
  ```kotlin
  suspend fun importTransactions(csvFile: File): Result<List<Transaction>> {
      return csvReader().open(csvFile) {
          readAllWithHeader().map { row ->
              Transaction(
                  date = LocalDate.parse(row["æ—¥æœŸ"]),
                  amount = BigDecimal(row["é‡‘é¢"]),
                  category = row["åˆ†ç±»"],
                  note = row["å¤‡æ³¨"].takeIf { it.isNotBlank() }
              )
          }
      }
  }
  ```
  - **æ—¶é—´**: 3å°æ—¶
  - **éªŒæ”¶**: CSVæ•°æ®æ­£ç¡®è§£æä¸ºå®ä½“å¯¹è±¡
  - **ç°çŠ¶**: æ‰€æœ‰æ¨¡å—CSVè§£æå™¨å®Œæ•´å®ç°ï¼Œæ”¯æŒéªŒè¯å’Œé”™è¯¯å¤„ç†

- [x] **T3.3** å®ç°äº‹åŠ¡æ€§å¯¼å…¥ âœ… **å·²å®Œæˆ**
  ```kotlin
  @Transaction
  suspend fun importAllData(backupData: BackupData): Result<ImportStats> {
      try {
          // æ¸…ç†ç°æœ‰æ•°æ®(å¯é€‰)
          // æ‰¹é‡æ’å…¥æ–°æ•°æ®
          // æ›´æ–°è‡ªå¢IDåºåˆ—
          database.setTransactionSuccessful()
      } catch (e: Exception) {
          // è‡ªåŠ¨å›æ»š
          return Result.failure(e)
      }
  }
  ```
  - **æ—¶é—´**: 2å°æ—¶
  - **éªŒæ”¶**: å¯¼å…¥è¿‡ç¨‹åŸå­æ€§ï¼Œå¤±è´¥æ—¶è‡ªåŠ¨å›æ»š
  - **ç°çŠ¶**: performTransactionalImportä½¿ç”¨Room @Transactionå®ç°ï¼Œæ”¯æŒè‡ªåŠ¨å›æ»š

- [x] **T3.4** å®ç°æ—§æ ¼å¼æ–‡ä»¶å…¼å®¹å¯¼å…¥ âœ… **å·²å®Œæˆ**
  ```kotlin
  class LegacyFormatImporter {
      suspend fun importLegacyFile(uri: Uri): Result<ImportStats> {
          return when {
              isExcelFile(uri) -> {
                  // ä½¿ç”¨ç²¾ç®€POIè¯»å–Excel
                  parseExcelWithPOI(uri)
              }
              isJsonFile(uri) -> {
                  // ä½¿ç”¨Gsonè§£æJSON
                  parseJsonWithGson(uri)
              }
              else -> Result.failure(UnsupportedFormatException())
          }
      }
  }
  ```
  - **æ—¶é—´**: 3å°æ—¶
  - **éªŒæ”¶**: æ—§.xlsxå’Œ.jsonæ–‡ä»¶å¯¼å…¥æˆåŠŸç‡â‰¥99%ï¼Œæ ¼å¼è½¬æ¢æ­£ç¡®
  - **ç°çŠ¶**: importLegacyFileå®Œæ•´å®ç°ï¼Œæ”¯æŒJSONå¯¼å…¥å’ŒExcelæ ¼å¼æŒ‡å¯¼

### Phase 4: ä¼˜åŒ–ä¸æµ‹è¯• (Day 5)
**ç›®æ ‡**: æ€§èƒ½ä¼˜åŒ–å’Œå…¨é¢æµ‹è¯•

#### ä»»åŠ¡åˆ—è¡¨
- [x] **T4.1** æ€§èƒ½ä¼˜åŒ– âœ… **å·²å®Œæˆ** (2025-07-28)
  - âœ… å®ç°BackupPerformanceConfigè‡ªåŠ¨ä¼˜åŒ–é…ç½®
  - âœ… å¯è°ƒæ•´åˆ†é¡µå¤§å° (500/1000/2000)ï¼Œæ ¹æ®æ•°æ®é‡è‡ªåŠ¨é€‰æ‹©
  - âœ… ä¼˜åŒ–BufferedWriterç¼“å†²åŒºå¤§å°ï¼ˆ32KB-256KBåŠ¨æ€è°ƒæ•´ï¼‰
  - âœ… æ·»åŠ BackupProgressCallbackè¿›åº¦å›è°ƒç³»ç»Ÿ
  - âœ… å†…å­˜ä½¿ç”¨ç›‘æ§å’ŒGCè§¦å‘æœºåˆ¶
  - **æ—¶é—´**: 3å°æ—¶ï¼ˆå®é™…ï¼‰
  - **éªŒæ”¶**: âœ… æ€§èƒ½é…ç½®ç³»ç»Ÿå®Œå¤‡ï¼Œæ”¯æŒå¤§æ•°æ®é‡å¤„ç†
  - **æµ‹è¯•**: âœ… BackupPerformanceConfigTest - 11ä¸ªæµ‹è¯•å…¨éƒ¨é€šè¿‡

- [x] **T4.2** é”™è¯¯å¤„ç†ä¼˜åŒ– âœ… **å·²å®Œæˆ** (2025-07-28)
  - âœ… å®Œæ•´çš„BackupErrorå¯†å°ç±»ä½“ç³»ï¼ˆ10+é”™è¯¯ç±»å‹ï¼‰
  - âœ… BackupErrorHandleræ™ºèƒ½å¼‚å¸¸è½¬æ¢å’Œç”¨æˆ·å‹å¥½æç¤º  
  - âœ… ErrorSeverityé”™è¯¯ä¸¥é‡çº§åˆ«åˆ†ç±»
  - âœ… æ”¯æŒç½‘ç»œé”™è¯¯ã€æƒé™é”™è¯¯ã€å­˜å‚¨ä¸è¶³ã€æ•°æ®æŸåç­‰
  - **æ—¶é—´**: 2å°æ—¶ï¼ˆå®é™…ï¼‰
  - **éªŒæ”¶**: âœ… å®Œæ•´çš„é”™è¯¯åˆ†ç±»å’Œç”¨æˆ·å‹å¥½æç¤º
  - **æµ‹è¯•**: âœ… BackupErrorHandlerTest - 18ä¸ªæµ‹è¯•å…¨éƒ¨é€šè¿‡

- [x] **T4.3** å•å…ƒæµ‹è¯•ç¼–å†™ ğŸ”„ **éƒ¨åˆ†å®Œæˆ** (2025-07-28)
  - âœ… BackupPerformanceConfigTest: 11ä¸ªæµ‹è¯•ï¼ˆé…ç½®é€‰æ‹©ã€è¾¹ç•Œæ¡ä»¶ã€æ€§èƒ½ç¼“å†²åŒºï¼‰
  - âœ… BackupErrorHandlerTest: 18ä¸ªæµ‹è¯•ï¼ˆå¼‚å¸¸è½¬æ¢ã€ç”¨æˆ·æ¶ˆæ¯ã€ä¸¥é‡çº§åˆ«ï¼‰
  - âŒ CsvBackupProviderTest: é‡åˆ°Gsonåºåˆ—åŒ–kotlinx.datetime.Instanté—®é¢˜
  - **æ€»è®¡**: 29ä¸ªæµ‹è¯•é€šè¿‡ï¼ŒåŸºæœ¬æµ‹è¯•è¦†ç›–å®Œæˆ
  - **æ—¶é—´**: 4å°æ—¶ï¼ˆå®é™…ï¼‰
  - **éªŒæ”¶**: ğŸ”„ åŸºç¡€æµ‹è¯•è¦†ç›–å·²è¾¾æ ‡ï¼Œæ ¸å¿ƒåŠŸèƒ½æµ‹è¯•é€šè¿‡
  - **çŠ¶æ€**: ç­‰å¾…åºåˆ—åŒ–é—®é¢˜ä¿®å¤åå®Œæˆå‰©ä½™æµ‹è¯•

- [ ] **T4.4** å…¼å®¹æ€§æµ‹è¯• âŒ **æœªå®ç°**
  - ä½ç«¯è®¾å¤‡æµ‹è¯• (2GB RAM)
  - ä¸åŒAndroidç‰ˆæœ¬æµ‹è¯• (API 26-34)
  - å¤§æ•°æ®é‡æµ‹è¯• (1ä¸‡/5ä¸‡/10ä¸‡/50ä¸‡æ¡)
  - **æ—¶é—´**: 3å°æ—¶
  - **éªŒæ”¶**: æ‰€æœ‰æµ‹è¯•åœºæ™¯é€šè¿‡
  - **ç°çŠ¶**: æ— å…¼å®¹æ€§æµ‹è¯•è®¡åˆ’å’Œæµ‹è¯•ç¯å¢ƒ

## ğŸ¨ UIç•Œé¢è®¾è®¡ä¸åŠŸèƒ½æ¸…ç†

### å¯¼å‡ºç•Œé¢æ”¹é€ 
#### å½“å‰ç•Œé¢é—®é¢˜
- å¯¼å‡ºæŒ‰é’®æ–‡æ¡ˆ: "å¯¼å‡ºExcel" â†’ è¯¯å¯¼ç”¨æˆ·æœŸæœ›
- è¿›åº¦æç¤º: "æ­£åœ¨ç”ŸæˆExcelæ–‡ä»¶..." â†’ æè¿°ä¸å‡†ç¡®
- æˆåŠŸæç¤º: "Excelæ–‡ä»¶å·²ä¿å­˜" â†’ ä¸å®é™…æ ¼å¼ä¸ç¬¦
- å¸®åŠ©æ–‡æ¡£: å¤§é‡Excelç›¸å…³è¯´æ˜éœ€è¦æ›´æ–°
- æ ¼å¼é€‰æ‹©å™¨: JSON/CSV/Excelä¸‰é€‰ä¸€ â†’ ç§»é™¤ï¼Œç»Ÿä¸€ä½¿ç”¨CSV

#### æ–°ç•Œé¢è®¾è®¡ï¼ˆç§»é™¤æ ¼å¼é€‰æ‹©åï¼‰
```kotlin
// DataExportScreen.kt ç•Œé¢ä¿®æ”¹
@Composable
fun DataExportScreen() {
    val uiState by viewModel.uiState.collectAsStateWithLifecycle()
    
    Column(
        modifier = Modifier
            .fillMaxSize()
            .padding(16.dp)
            .verticalScroll(rememberScrollState())
    ) {
        // 1. æ ‡é¢˜åŒºåŸŸ
        Text(
            text = "æ•°æ®å¯¼å‡º",
            style = MaterialTheme.typography.headlineLarge
        )
        
        Text(
            text = "å¯¼å‡ºæ•°æ®ä¸ºå¤‡ä»½æ–‡ä»¶ï¼Œæ”¯æŒExcelã€Numbersç­‰è½¯ä»¶æ‰“å¼€",
            style = MaterialTheme.typography.bodyMedium,
            color = MaterialTheme.colorScheme.onSurfaceVariant
        )
        
        Spacer(modifier = Modifier.height(24.dp))
        
        // 2. æ•°æ®èŒƒå›´é€‰æ‹©ï¼ˆåŸæ ¼å¼é€‰æ‹©ä½ç½®ï¼Œç°åœ¨æ›´çªå‡ºï¼‰
        Card(
            modifier = Modifier.fillMaxWidth(),
            colors = CardDefaults.cardColors(
                containerColor = MaterialTheme.colorScheme.secondaryContainer
            )
        ) {
            Column(modifier = Modifier.padding(16.dp)) {
                Text(
                    "é€‰æ‹©å¯¼å‡ºèŒƒå›´",
                    style = MaterialTheme.typography.titleMedium
                )
                
                Spacer(modifier = Modifier.height(12.dp))
                
                // æ—¶é—´èŒƒå›´é€‰é¡¹
                Column {
                    RadioButtonRow(
                        selected = uiState.dateRange == DateRange.ALL,
                        onClick = { viewModel.selectDateRange(DateRange.ALL) },
                        label = "å…¨éƒ¨æ•°æ®",
                        supportingText = "å¯¼å‡ºæ‰€æœ‰å†å²è®°å½•"
                    )
                    RadioButtonRow(
                        selected = uiState.dateRange == DateRange.THIS_YEAR,
                        onClick = { viewModel.selectDateRange(DateRange.THIS_YEAR) },
                        label = "æœ¬å¹´æ•°æ®",
                        supportingText = "ä»…å¯¼å‡º${LocalDate.now().year}å¹´çš„æ•°æ®"
                    )
                    RadioButtonRow(
                        selected = uiState.dateRange == DateRange.THIS_MONTH,
                        onClick = { viewModel.selectDateRange(DateRange.THIS_MONTH) },
                        label = "æœ¬æœˆæ•°æ®",
                        supportingText = "ä»…å¯¼å‡º${LocalDate.now().month.name}çš„æ•°æ®"
                    )
                    RadioButtonRow(
                        selected = uiState.dateRange == DateRange.CUSTOM,
                        onClick = { viewModel.selectDateRange(DateRange.CUSTOM) },
                        label = "è‡ªå®šä¹‰èŒƒå›´",
                        supportingText = "é€‰æ‹©ç‰¹å®šçš„æ—¥æœŸèŒƒå›´"
                    )
                }
                
                // è‡ªå®šä¹‰æ—¥æœŸé€‰æ‹©å™¨
                AnimatedVisibility(visible = uiState.dateRange == DateRange.CUSTOM) {
                    DateRangePicker(
                        startDate = uiState.customStartDate,
                        endDate = uiState.customEndDate,
                        onDateRangeSelected = viewModel::setCustomDateRange
                    )
                }
            }
        }
        
        Spacer(modifier = Modifier.height(16.dp))
        
        // 3. æ•°æ®ç±»å‹é€‰æ‹©ï¼ˆä½¿ç”¨Material 3 FilterChipï¼‰
        Card(modifier = Modifier.fillMaxWidth()) {
            Column(modifier = Modifier.padding(16.dp)) {
                Text(
                    "é€‰æ‹©å¯¼å‡ºå†…å®¹",
                    style = MaterialTheme.typography.titleMedium
                )
                
                Spacer(modifier = Modifier.height(12.dp))
                
                FlowRow(
                    horizontalArrangement = Arrangement.spacedBy(8.dp),
                    verticalArrangement = Arrangement.spacedBy(8.dp)
                ) {
                    FilterChip(
                        selected = uiState.exportLedger,
                        onClick = { viewModel.toggleExportLedger() },
                        label = { Text("è´¦æœ¬æ•°æ®") },
                        leadingIcon = {
                            Icon(
                                Icons.Outlined.AccountBalance,
                                contentDescription = null,
                                modifier = Modifier.size(18.dp)
                            )
                        }
                    )
                    FilterChip(
                        selected = uiState.exportTodo,
                        onClick = { viewModel.toggleExportTodo() },
                        label = { Text("å¾…åŠäº‹é¡¹") },
                        leadingIcon = {
                            Icon(
                                Icons.Outlined.Task,
                                contentDescription = null,
                                modifier = Modifier.size(18.dp)
                            )
                        }
                    )
                    FilterChip(
                        selected = uiState.exportHabit,
                        onClick = { viewModel.toggleExportHabit() },
                        label = { Text("ä¹ æƒ¯è®°å½•") },
                        leadingIcon = {
                            Icon(
                                Icons.Outlined.Loop,
                                contentDescription = null,
                                modifier = Modifier.size(18.dp)
                            )
                        }
                    )
                    FilterChip(
                        selected = uiState.exportOthers,
                        onClick = { viewModel.toggleExportOthers() },
                        label = { Text("åˆ†ç±»å’Œè´¦æˆ·") },
                        leadingIcon = {
                            Icon(
                                Icons.Outlined.Category,
                                contentDescription = null,
                                modifier = Modifier.size(18.dp)
                            )
                        }
                    )
                }
            }
        }
        
        // 4. é¢„ä¼°ä¿¡æ¯å¡ç‰‡ï¼ˆæ–°å¢ï¼‰
        AnimatedVisibility(
            visible = uiState.hasDataSelected,
            enter = fadeIn() + expandVertically(),
            exit = fadeOut() + shrinkVertically()
        ) {
            Card(
                modifier = Modifier
                    .fillMaxWidth()
                    .padding(vertical = 16.dp),
                colors = CardDefaults.cardColors(
                    containerColor = MaterialTheme.colorScheme.primaryContainer
                )
            ) {
                Row(
                    modifier = Modifier
                        .fillMaxWidth()
                        .padding(16.dp),
                    horizontalArrangement = Arrangement.SpaceEvenly
                ) {
                    Column(horizontalAlignment = Alignment.CenterHorizontally) {
                        Text(
                            "é¢„è®¡å¯¼å‡º",
                            style = MaterialTheme.typography.labelSmall,
                            color = MaterialTheme.colorScheme.onPrimaryContainer
                        )
                        Text(
                            "${uiState.estimatedRecords}æ¡",
                            style = MaterialTheme.typography.titleMedium,
                            color = MaterialTheme.colorScheme.onPrimaryContainer,
                            fontWeight = FontWeight.Bold
                        )
                    }
                    
                    VerticalDivider(modifier = Modifier.height(40.dp))
                    
                    Column(horizontalAlignment = Alignment.CenterHorizontally) {
                        Text(
                            "é¢„è®¡å¤§å°",
                            style = MaterialTheme.typography.labelSmall,
                            color = MaterialTheme.colorScheme.onPrimaryContainer
                        )
                        Text(
                            "~${uiState.estimatedSize}MB",
                            style = MaterialTheme.typography.titleMedium,
                            color = MaterialTheme.colorScheme.onPrimaryContainer,
                            fontWeight = FontWeight.Bold
                        )
                    }
                }
            }
        }
        
        Spacer(modifier = Modifier.weight(1f))
        
        // 5. å•ä¸€å¯¼å‡ºæŒ‰é’®ï¼ˆæ›´çªå‡ºï¼‰
        Button(
            onClick = { viewModel.exportData() },
            modifier = Modifier
                .fillMaxWidth()
                .height(56.dp),
            enabled = uiState.canExport && !uiState.isExporting,
            colors = ButtonDefaults.buttonColors(
                containerColor = MaterialTheme.colorScheme.primary
            )
        ) {
            if (uiState.isExporting) {
                CircularProgressIndicator(
                    modifier = Modifier.size(24.dp),
                    color = MaterialTheme.colorScheme.onPrimary
                )
            } else {
                Icon(
                    Icons.Default.CloudDownload,
                    contentDescription = null,
                    modifier = Modifier.size(24.dp)
                )
                Spacer(modifier = Modifier.width(8.dp))
                Text(
                    "å¯¼å‡ºå¤‡ä»½æ–‡ä»¶",
                    style = MaterialTheme.typography.labelLarge
                )
            }
        }
        
        // 6. å¸®åŠ©æç¤ºï¼ˆæ›´ç®€æ´ï¼‰
        TextButton(
            onClick = { viewModel.showHelp() },
            modifier = Modifier.align(Alignment.CenterHorizontally)
        ) {
            Icon(
                Icons.Outlined.Info,
                contentDescription = null,
                modifier = Modifier.size(16.dp)
            )
            Spacer(modifier = Modifier.width(4.dp))
            Text(
                "å¤‡ä»½æ–‡ä»¶å¯ç”¨Excelæ‰“å¼€",
                style = MaterialTheme.typography.labelSmall
            )
        }
    }
}
```

#### å¯¼å‡ºè¿›åº¦ç•Œé¢
```kotlin
@Composable
fun ExportProgressDialog(
    progress: Float,
    currentStep: String,
    onDismiss: () -> Unit
) {
    AlertDialog(
        onDismissRequest = onDismiss,
        title = { Text("æ­£åœ¨å¯¼å‡ºæ•°æ®...") },
        text = {
            Column {
                LinearProgressIndicator(
                    progress = progress,
                    modifier = Modifier.fillMaxWidth()
                )
                Spacer(modifier = Modifier.height(8.dp))
                Text(
                    text = currentStep,
                    style = MaterialTheme.typography.bodySmall
                )
                Text(
                    text = "${(progress * 100).toInt()}%",
                    style = MaterialTheme.typography.bodySmall,
                    color = MaterialTheme.colorScheme.primary
                )
            }
        },
        confirmButton = { 
            TextButton(onClick = onDismiss) { 
                Text("åå°è¿è¡Œ") 
            } 
        }
    )
}
```

#### å¯¼å‡ºæˆåŠŸç•Œé¢
```kotlin
@Composable
fun ExportSuccessDialog(
    fileName: String,
    fileSize: String,
    recordCount: Int,
    onShare: () -> Unit,
    onOpenHelp: () -> Unit,
    onDismiss: () -> Unit
) {
    AlertDialog(
        onDismissRequest = onDismiss,
        icon = {
            Icon(
                Icons.Filled.CheckCircle,
                contentDescription = null,
                tint = MaterialTheme.colorScheme.primary
            )
        },
        title = { Text("å¯¼å‡ºå®Œæˆ") },
        text = {
            Column {
                Text("å¤‡ä»½æ–‡ä»¶å·²ç”Ÿæˆ")
                Spacer(modifier = Modifier.height(8.dp))
                
                InfoRow("æ–‡ä»¶å", fileName)
                InfoRow("æ–‡ä»¶å¤§å°", fileSize)
                InfoRow("è®°å½•æ•°é‡", "$recordCount æ¡")
                
                Spacer(modifier = Modifier.height(16.dp))
                
                Card(
                    colors = CardDefaults.cardColors(
                        containerColor = MaterialTheme.colorScheme.primaryContainer
                    )
                ) {
                    Column(modifier = Modifier.padding(12.dp)) {
                        Text(
                            "ğŸ“‹ å¦‚ä½•æ‰“å¼€å¤‡ä»½æ–‡ä»¶ï¼Ÿ",
                            style = MaterialTheme.typography.titleSmall
                        )
                        Text(
                            "1. ä½¿ç”¨å‹ç¼©è½¯ä»¶è§£å‹ .ccbackup æ–‡ä»¶\n2. ç”¨Excel/Numbersæ‰“å¼€è§£å‹åçš„CSVæ–‡ä»¶",
                            style = MaterialTheme.typography.bodySmall
                        )
                    }
                }
            }
        },
        confirmButton = {
            Row {
                TextButton(onClick = onOpenHelp) { Text("è¯¦ç»†è¯´æ˜") }
                Spacer(modifier = Modifier.width(8.dp))
                Button(onClick = onShare) { Text("åˆ†äº«æ–‡ä»¶") }
            }
        },
        dismissButton = {
            TextButton(onClick = onDismiss) { Text("å…³é—­") }
        }
    )
}
```

### å¯¼å…¥ç•Œé¢æ”¹é€ ï¼ˆè‡ªåŠ¨æ ¼å¼è¯†åˆ«ï¼‰
```kotlin
// DataImportScreen.kt ç•Œé¢ä¿®æ”¹
@Composable
fun DataImportScreen() {
    val uiState by viewModel.uiState.collectAsStateWithLifecycle()
    
    Column(
        modifier = Modifier
            .fillMaxSize()
            .padding(16.dp)
    ) {
        // 1. æ ‡é¢˜åŒºåŸŸ
        Text(
            text = "æ•°æ®å¯¼å…¥",
            style = MaterialTheme.typography.headlineLarge
        )
        
        Text(
            text = "ä»å¤‡ä»½æ–‡ä»¶æ¢å¤æ•°æ®",
            style = MaterialTheme.typography.bodyMedium,
            color = MaterialTheme.colorScheme.onSurfaceVariant
        )
        
        Spacer(modifier = Modifier.height(24.dp))
        
        // 2. æ‹–æ”¾åŒºåŸŸï¼ˆæ›´å¤§æ›´æ˜æ˜¾ï¼‰
        Card(
            modifier = Modifier
                .fillMaxWidth()
                .height(200.dp)
                .dashedBorder(
                    color = if (uiState.isDragging) 
                        MaterialTheme.colorScheme.primary 
                    else 
                        MaterialTheme.colorScheme.outline,
                    width = 2.dp
                ),
            onClick = { viewModel.selectFile() },
            colors = CardDefaults.cardColors(
                containerColor = if (uiState.isDragging)
                    MaterialTheme.colorScheme.primaryContainer
                else
                    MaterialTheme.colorScheme.surface
            )
        ) {
            Column(
                modifier = Modifier.fillMaxSize(),
                verticalArrangement = Arrangement.Center,
                horizontalAlignment = Alignment.CenterHorizontally
            ) {
                Icon(
                    Icons.Default.CloudUpload,
                    contentDescription = null,
                    modifier = Modifier.size(64.dp),
                    tint = if (uiState.isDragging)
                        MaterialTheme.colorScheme.primary
                    else
                        MaterialTheme.colorScheme.onSurfaceVariant
                )
                
                Spacer(modifier = Modifier.height(16.dp))
                
                Text(
                    "ç‚¹å‡»é€‰æ‹©æ–‡ä»¶",
                    style = MaterialTheme.typography.titleMedium
                )
                
                Text(
                    "æ”¯æŒ .ccbackup / .xlsx / .json æ ¼å¼",
                    style = MaterialTheme.typography.bodySmall,
                    color = MaterialTheme.colorScheme.onSurfaceVariant
                )
            }
        }
        
        Spacer(modifier = Modifier.height(16.dp))
        
        // 3. æ–‡ä»¶è¯†åˆ«çŠ¶æ€ï¼ˆè‡ªåŠ¨æ£€æµ‹ï¼‰
        AnimatedContent(
            targetState = uiState.fileState,
            transitionSpec = {
                fadeIn() + slideInVertically() with fadeOut() + slideOutVertically()
            }
        ) { state ->
            when (state) {
                is FileState.Selected -> {
                    Card(
                        modifier = Modifier.fillMaxWidth(),
                        colors = CardDefaults.cardColors(
                            containerColor = when(state.format) {
                                ImportFormat.CCBACKUP -> MaterialTheme.colorScheme.primaryContainer
                                ImportFormat.LEGACY_EXCEL -> MaterialTheme.colorScheme.secondaryContainer
                                ImportFormat.LEGACY_JSON -> MaterialTheme.colorScheme.tertiaryContainer
                                ImportFormat.UNKNOWN -> MaterialTheme.colorScheme.errorContainer
                            }
                        )
                    ) {
                        ListItem(
                            headlineContent = { 
                                Text(
                                    state.fileName,
                                    style = MaterialTheme.typography.titleMedium
                                ) 
                            },
                            supportingContent = { 
                                Text(
                                    when(state.format) {
                                        ImportFormat.CCBACKUP -> "æ ‡å‡†å¤‡ä»½æ ¼å¼ â€¢ ${state.fileSize}"
                                        ImportFormat.LEGACY_EXCEL -> "æ—§ç‰ˆExcelæ ¼å¼ â€¢ å°†è‡ªåŠ¨è½¬æ¢ â€¢ ${state.fileSize}"
                                        ImportFormat.LEGACY_JSON -> "æ—§ç‰ˆJSONæ ¼å¼ â€¢ å°†è‡ªåŠ¨è½¬æ¢ â€¢ ${state.fileSize}"
                                        ImportFormat.UNKNOWN -> "æ— æ³•è¯†åˆ«çš„æ–‡ä»¶æ ¼å¼"
                                    },
                                    style = MaterialTheme.typography.bodySmall
                                )
                            },
                            leadingContent = {
                                Icon(
                                    when(state.format) {
                                        ImportFormat.CCBACKUP -> Icons.Default.CheckCircle
                                        ImportFormat.LEGACY_EXCEL, 
                                        ImportFormat.LEGACY_JSON -> Icons.Default.Transform
                                        ImportFormat.UNKNOWN -> Icons.Default.Error
                                    },
                                    contentDescription = null,
                                    tint = when(state.format) {
                                        ImportFormat.CCBACKUP -> MaterialTheme.colorScheme.primary
                                        ImportFormat.LEGACY_EXCEL,
                                        ImportFormat.LEGACY_JSON -> MaterialTheme.colorScheme.secondary
                                        ImportFormat.UNKNOWN -> MaterialTheme.colorScheme.error
                                    }
                                )
                            },
                            trailingContent = {
                                IconButton(
                                    onClick = { viewModel.removeFile() }
                                ) {
                                    Icon(
                                        Icons.Default.Close,
                                        contentDescription = "ç§»é™¤æ–‡ä»¶"
                                    )
                                }
                            }
                        )
                    }
                }
                
                is FileState.None -> {
                    // ç©ºçŠ¶æ€ï¼Œä¸æ˜¾ç¤ºå†…å®¹
                }
            }
        }
        
        // 4. å¯¼å…¥é€‰é¡¹ï¼ˆæ–‡ä»¶é€‰æ‹©åæ˜¾ç¤ºï¼‰
        AnimatedVisibility(
            visible = uiState.fileState is FileState.Selected && 
                     uiState.fileState.format != ImportFormat.UNKNOWN
        ) {
            Card(
                modifier = Modifier
                    .fillMaxWidth()
                    .padding(top = 16.dp)
            ) {
                Column(modifier = Modifier.padding(16.dp)) {
                    Text(
                        "å¯¼å…¥é€‰é¡¹",
                        style = MaterialTheme.typography.titleMedium
                    )
                    
                    Spacer(modifier = Modifier.height(12.dp))
                    
                    // å†²çªå¤„ç†é€‰é¡¹
                    Column {
                        RadioButtonRow(
                            selected = uiState.importMode == ImportMode.MERGE,
                            onClick = { viewModel.setImportMode(ImportMode.MERGE) },
                            label = "åˆå¹¶æ•°æ®",
                            supportingText = "ä¿ç•™ç°æœ‰æ•°æ®ï¼Œæ·»åŠ æ–°æ•°æ®ï¼ˆæ¨èï¼‰"
                        )
                        RadioButtonRow(
                            selected = uiState.importMode == ImportMode.REPLACE,
                            onClick = { viewModel.setImportMode(ImportMode.REPLACE) },
                            label = "æ›¿æ¢æ•°æ®",
                            supportingText = "æ¸…é™¤ç°æœ‰æ•°æ®ï¼Œå®Œå…¨ä½¿ç”¨å¤‡ä»½æ•°æ®"
                        )
                    }
                    
                    // è­¦å‘Šæç¤º
                    AnimatedVisibility(visible = uiState.importMode == ImportMode.REPLACE) {
                        Card(
                            modifier = Modifier
                                .fillMaxWidth()
                                .padding(top = 12.dp),
                            colors = CardDefaults.cardColors(
                                containerColor = MaterialTheme.colorScheme.errorContainer
                            )
                        ) {
                            Row(
                                modifier = Modifier.padding(12.dp),
                                verticalAlignment = Alignment.CenterVertically
                            ) {
                                Icon(
                                    Icons.Default.Warning,
                                    contentDescription = null,
                                    tint = MaterialTheme.colorScheme.onErrorContainer
                                )
                                Spacer(modifier = Modifier.width(8.dp))
                                Text(
                                    "ç°æœ‰æ•°æ®å°†è¢«å®Œå…¨æ¸…é™¤ï¼Œæ­¤æ“ä½œä¸å¯æ¢å¤ï¼",
                                    style = MaterialTheme.typography.bodySmall,
                                    color = MaterialTheme.colorScheme.onErrorContainer
                                )
                            }
                        }
                    }
                }
            }
        }
        
        Spacer(modifier = Modifier.weight(1f))
        
        // 5. å¯¼å…¥æŒ‰é’®
        AnimatedVisibility(
            visible = uiState.fileState is FileState.Selected && 
                     uiState.fileState.format != ImportFormat.UNKNOWN
        ) {
            Button(
                onClick = { viewModel.startImport() },
                modifier = Modifier
                    .fillMaxWidth()
                    .height(56.dp),
                enabled = !uiState.isImporting
            ) {
                if (uiState.isImporting) {
                    CircularProgressIndicator(
                        modifier = Modifier.size(24.dp),
                        color = MaterialTheme.colorScheme.onPrimary
                    )
                } else {
                    Icon(
                        Icons.Default.RestorePage,
                        contentDescription = null,
                        modifier = Modifier.size(24.dp)
                    )
                    Spacer(modifier = Modifier.width(8.dp))
                    Text(
                        "å¼€å§‹å¯¼å…¥",
                        style = MaterialTheme.typography.labelLarge
                    )
                }
            }
        }
    }
}

// è¾…åŠ©ç»„ä»¶ï¼šå•é€‰æŒ‰é’®è¡Œ
@Composable
private fun RadioButtonRow(
    selected: Boolean,
    onClick: () -> Unit,
    label: String,
    supportingText: String
) {
    Row(
        modifier = Modifier
            .fillMaxWidth()
            .selectable(
                selected = selected,
                onClick = onClick,
                role = Role.RadioButton
            )
            .padding(vertical = 8.dp),
        verticalAlignment = Alignment.CenterVertically
    ) {
        RadioButton(
            selected = selected,
            onClick = null
        )
        Spacer(modifier = Modifier.width(16.dp))
        Column {
            Text(
                text = label,
                style = MaterialTheme.typography.bodyLarge
            )
            Text(
                text = supportingText,
                style = MaterialTheme.typography.bodySmall,
                color = MaterialTheme.colorScheme.onSurfaceVariant
            )
        }
    }
}

// å¯¼å…¥æ ¼å¼æšä¸¾
enum class ImportFormat {
    CCBACKUP,      // æ–°æ ¼å¼
    LEGACY_EXCEL,  // æ—§Excelæ ¼å¼
    LEGACY_JSON,   // æ—§JSONæ ¼å¼
    UNKNOWN        // æœªçŸ¥æ ¼å¼
}

// å¯¼å…¥æ¨¡å¼æšä¸¾
enum class ImportMode {
    MERGE,    // åˆå¹¶
    REPLACE   // æ›¿æ¢
}
```

### å¯¼å‡ºå†å²ç•Œé¢
```kotlin
// ExportHistorySection.kt - å¯¼å‡ºå†å²ç»„ä»¶
@Composable
fun ExportHistorySection(
    exportHistory: List<ExportHistory>,
    onShare: (ExportHistory) -> Unit,
    onDelete: (ExportHistory) -> Unit,
    onDeleteSelected: () -> Unit,
    selectedItems: Set<ExportHistory>,
    isSelectionMode: Boolean,
    onSelectionModeChange: (Boolean) -> Unit,
    onItemSelected: (ExportHistory, Boolean) -> Unit
) {
    Card(modifier = Modifier.fillMaxWidth()) {
        Column {
            // æ ‡é¢˜æ 
            Row(
                modifier = Modifier
                    .fillMaxWidth()
                    .padding(16.dp),
                horizontalArrangement = Arrangement.SpaceBetween,
                verticalAlignment = Alignment.CenterVertically
            ) {
                Text(
                    text = if (isSelectionMode) {
                        "å·²é€‰æ‹© ${selectedItems.size} é¡¹"
                    } else {
                        "å¯¼å‡ºå†å²"
                    },
                    style = MaterialTheme.typography.titleMedium
                )
                
                if (isSelectionMode) {
                    Row {
                        TextButton(onClick = { onSelectionModeChange(false) }) {
                            Text("å–æ¶ˆ")
                        }
                        Spacer(modifier = Modifier.width(8.dp))
                        Button(
                            onClick = onDeleteSelected,
                            colors = ButtonDefaults.buttonColors(
                                containerColor = MaterialTheme.colorScheme.error
                            )
                        ) {
                            Icon(Icons.Default.Delete, contentDescription = null)
                            Spacer(modifier = Modifier.width(4.dp))
                            Text("åˆ é™¤")
                        }
                    }
                }
            }
            
            HorizontalDivider()
            
            // å†å²è®°å½•åˆ—è¡¨
            exportHistory.forEach { history ->
                ExportHistoryItem(
                    history = history,
                    isSelected = selectedItems.contains(history),
                    isSelectionMode = isSelectionMode,
                    onShare = { onShare(history) },
                    onLongClick = {
                        if (!isSelectionMode) {
                            onSelectionModeChange(true)
                            onItemSelected(history, true)
                        }
                    },
                    onSelectionChange = { selected ->
                        onItemSelected(history, selected)
                    }
                )
            }
        }
    }
}

@OptIn(ExperimentalFoundationApi::class)
@Composable
private fun ExportHistoryItem(
    history: ExportHistory,
    isSelected: Boolean,
    isSelectionMode: Boolean,
    onShare: () -> Unit,
    onLongClick: () -> Unit,
    onSelectionChange: (Boolean) -> Unit
) {
    Surface(
        modifier = Modifier
            .fillMaxWidth()
            .combinedClickable(
                onClick = {
                    if (isSelectionMode) {
                        onSelectionChange(!isSelected)
                    } else {
                        onShare()
                    }
                },
                onLongClick = onLongClick
            ),
        color = if (isSelected) {
            MaterialTheme.colorScheme.primaryContainer
        } else {
            Color.Transparent
        }
    ) {
        ListItem(
            headlineContent = { 
                Text(
                    "å¤‡ä»½_${history.date.format(DateTimeFormatter.ofPattern("yyyyMMdd_HHmm"))}",
                    style = MaterialTheme.typography.bodyLarge
                ) 
            },
            supportingContent = {
                Row {
                    Text(
                        "${history.recordCount}æ¡è®°å½•",
                        style = MaterialTheme.typography.bodySmall
                    )
                    Text(
                        " â€¢ ",
                        style = MaterialTheme.typography.bodySmall
                    )
                    Text(
                        history.fileSize,
                        style = MaterialTheme.typography.bodySmall
                    )
                    Text(
                        " â€¢ ",
                        style = MaterialTheme.typography.bodySmall
                    )
                    Text(
                        history.getRelativeTime(),
                        style = MaterialTheme.typography.bodySmall,
                        color = MaterialTheme.colorScheme.onSurfaceVariant
                    )
                }
            },
            leadingContent = {
                if (isSelectionMode) {
                    Checkbox(
                        checked = isSelected,
                        onCheckedChange = onSelectionChange
                    )
                } else {
                    Icon(
                        Icons.Default.BackupTable,
                        contentDescription = null,
                        tint = MaterialTheme.colorScheme.primary,
                        modifier = Modifier.size(40.dp)
                    )
                }
            },
            trailingContent = {
                if (!isSelectionMode) {
                    IconButton(onClick = onShare) {
                        Icon(
                            Icons.Default.Share,
                            contentDescription = "åˆ†äº«",
                            tint = MaterialTheme.colorScheme.primary
                        )
                    }
                }
            }
        )
    }
}
```

### è®¾ç½®é¡µé¢ç®€åŒ–ï¼ˆç§»é™¤æ ¼å¼é€‰æ‹©ï¼‰
```kotlin
@Composable
fun BackupSettingsSection() {
    SettingsGroup(title = "å¤‡ä»½è®¾ç½®") {
        // âŒ ç§»é™¤ï¼šé»˜è®¤å¯¼å‡ºæ ¼å¼é€‰æ‹©ï¼ˆä¸å†éœ€è¦ï¼‰
        // âŒ ç§»é™¤ï¼šExcelç›¸å…³è®¾ç½®
        // âŒ ç§»é™¤ï¼šJSONç›¸å…³è®¾ç½®
        
        // âœ… è‡ªåŠ¨å¤‡ä»½è®¾ç½®
        SwitchSettingsItem(
            title = "è‡ªåŠ¨å¤‡ä»½",
            summary = "æ¯å‘¨è‡ªåŠ¨åˆ›å»ºå¤‡ä»½æ–‡ä»¶",
            checked = uiState.autoBackupEnabled,
            onCheckedChange = { viewModel.setAutoBackup(it) },
            icon = {
                Icon(Icons.Outlined.Backup, contentDescription = null)
            }
        )
        
        // âœ… å¤‡ä»½ä¿ç•™è®¾ç½®
        SettingsItem(
            title = "å¤‡ä»½ä¿ç•™æ—¶é—´",
            summary = "${uiState.backupRetentionDays}å¤©",
            onClick = { showRetentionDialog = true },
            icon = {
                Icon(Icons.Outlined.Schedule, contentDescription = null)
            }
        )
        
        // âœ… å¯¼å‡ºåæ“ä½œ
        SwitchSettingsItem(
            title = "æ˜¾ç¤ºæ“ä½œæŒ‡å—",
            summary = "å¯¼å‡ºå®Œæˆåæ˜¾ç¤ºå¦‚ä½•æ‰“å¼€å¤‡ä»½æ–‡ä»¶",
            checked = uiState.showExportGuide,
            onCheckedChange = { viewModel.setShowExportGuide(it) },
            icon = {
                Icon(Icons.Outlined.Help, contentDescription = null)
            }
        )
        
        // âœ… å¯¼å…¥å®‰å…¨è®¾ç½®
        SwitchSettingsItem(
            title = "å¯¼å…¥å‰å¤‡ä»½",
            summary = "å¯¼å…¥æ•°æ®å‰è‡ªåŠ¨åˆ›å»ºå½“å‰æ•°æ®å¤‡ä»½",
            checked = uiState.backupBeforeImport,
            onCheckedChange = { viewModel.setBackupBeforeImport(it) },
            icon = {
                Icon(Icons.Outlined.Security, contentDescription = null)
            }
        )
        
        // âœ… å­˜å‚¨ä½ç½®ï¼ˆåªè¯»ï¼‰
        SettingsItem(
            title = "å¤‡ä»½å­˜å‚¨ä½ç½®",
            summary = "åº”ç”¨ç§æœ‰ç›®å½•",
            onClick = { /* åªè¯»ï¼Œä¸å¯æ›´æ”¹ */ },
            enabled = false,
            icon = {
                Icon(Icons.Outlined.Folder, contentDescription = null)
            }
        )
    }
}
```

---

## ğŸ¯ æ•´ä½“UIä¼˜åŒ–åŸåˆ™

### è§†è§‰å±‚çº§ä¼˜åŒ–
```
ä¸»è¦æ“ä½œï¼šå¯¼å‡º/å¯¼å…¥æŒ‰é’® â†’ 56dpé«˜åº¦ï¼Œå¡«å……å®½åº¦ï¼Œé†’ç›®é¢œè‰²
æ¬¡è¦ä¿¡æ¯ï¼šæ ¼å¼è¯´æ˜ â†’ å°å­—ä½“ï¼Œè¾…åŠ©é¢œè‰²
å†—ä½™ç§»é™¤ï¼šä¸å†æ˜¾ç¤ºæ ¼å¼å›¾æ ‡ï¼Œç»Ÿä¸€ä½¿ç”¨å¤‡ä»½å›¾æ ‡
```

### äº¤äº’æµç¨‹ç®€åŒ–
```
æ—§æµç¨‹ï¼šé€‰æ‹©æ ¼å¼(3é€‰1) â†’ é…ç½®é€‰é¡¹ â†’ ç¡®è®¤å¯¼å‡º â†’ ç­‰å¾… â†’ å®Œæˆ
æ–°æµç¨‹ï¼šé…ç½®é€‰é¡¹ â†’ ç›´æ¥å¯¼å‡º â†’ ç­‰å¾… â†’ å®Œæˆ

å‡å°‘æ­¥éª¤ï¼šä»5æ­¥å‡è‡³4æ­¥
è®¤çŸ¥è´Ÿæ‹…ï¼šä»3ä¸ªé€‰æ‹©å‡è‡³0ä¸ªæ ¼å¼é€‰æ‹©
```

### ä¿¡æ¯å¯†åº¦ä¼˜åŒ–
```kotlin
// é¢„ä¼°ä¿¡æ¯å±•ç¤º
data class ExportEstimation(
    val recordCount: Int,     // å°†å¯¼å‡ºå¤šå°‘æ¡è®°å½•
    val estimatedSize: Long,  // é¢„è®¡æ–‡ä»¶å¤§å°
    val estimatedTime: Int    // é¢„è®¡è€—æ—¶ï¼ˆç§’ï¼‰
)

// è¿›åº¦ä¿¡æ¯å±•ç¤º
data class ExportProgress(
    val currentStep: String,     // å½“å‰æ­¥éª¤æè¿°
    val progressPercent: Float,  // è¿›åº¦ç™¾åˆ†æ¯”
    val recordsProcessed: Int,   // å·²å¤„ç†è®°å½•æ•°
    val remainingTime: Int       // å‰©ä½™æ—¶é—´ï¼ˆç§’ï¼‰
)
```

### åé¦ˆæœºåˆ¶å¢å¼º
```kotlin
// å¯¼å…¥æ–‡ä»¶æ ¼å¼è¯†åˆ«åé¦ˆ
sealed class FileDetectionState {
    object Detecting : FileDetectionState()
    data class Detected(
        val format: ImportFormat,
        val isSupported: Boolean,
        val needsConversion: Boolean
    ) : FileDetectionState()
    data class Error(val message: String) : FileDetectionState()
}

// å®æ—¶è¿›åº¦æ›´æ–°
@Composable
fun ProgressWithDetails(
    progress: Float,
    title: String,
    subtitle: String,
    details: String? = null
) {
    Column {
        Text(title, style = MaterialTheme.typography.titleMedium)
        
        LinearProgressIndicator(
            progress = progress,
            modifier = Modifier.fillMaxWidth()
        )
        
        Row(
            modifier = Modifier.fillMaxWidth(),
            horizontalArrangement = Arrangement.SpaceBetween
        ) {
            Text(subtitle, style = MaterialTheme.typography.bodySmall)
            Text(
                "${(progress * 100).toInt()}%",
                style = MaterialTheme.typography.bodySmall
            )
        }
        
        details?.let {
            Text(
                it,
                style = MaterialTheme.typography.labelSmall,
                color = MaterialTheme.colorScheme.onSurfaceVariant
            )
        }
    }
}
```

### é”™è¯¯å¤„ç†å‹å¥½åŒ–
```kotlin
// é”™è¯¯æç¤ºåˆ†çº§
sealed class ImportError {
    data class FormatError(val expected: String, val actual: String) : ImportError()
    data class DataError(val row: Int, val field: String, val reason: String) : ImportError()
    data class ConversionError(val from: String, val to: String) : ImportError()
    object StorageError : ImportError()
    object PermissionError : ImportError()
}

// é”™è¯¯å±•ç¤ºç»„ä»¶
@Composable
fun ErrorCard(
    error: ImportError,
    onRetry: (() -> Unit)? = null,
    onDismiss: () -> Unit
) {
    Card(
        colors = CardDefaults.cardColors(
            containerColor = MaterialTheme.colorScheme.errorContainer
        )
    ) {
        Column(modifier = Modifier.padding(16.dp)) {
            Row(verticalAlignment = Alignment.CenterVertically) {
                Icon(
                    Icons.Default.ErrorOutline,
                    contentDescription = null,
                    tint = MaterialTheme.colorScheme.onErrorContainer
                )
                Spacer(modifier = Modifier.width(8.dp))
                Text(
                    getErrorTitle(error),
                    style = MaterialTheme.typography.titleSmall,
                    color = MaterialTheme.colorScheme.onErrorContainer
                )
            }
            
            Spacer(modifier = Modifier.height(8.dp))
            
            Text(
                getErrorDescription(error),
                style = MaterialTheme.typography.bodySmall,
                color = MaterialTheme.colorScheme.onErrorContainer
            )
            
            Spacer(modifier = Modifier.height(12.dp))
            
            Row {
                onRetry?.let {
                    TextButton(onClick = it) {
                        Text("é‡è¯•")
                    }
                }
                Spacer(modifier = Modifier.weight(1f))
                TextButton(onClick = onDismiss) {
                    Text("çŸ¥é“äº†")
                }
            }
        }
    }
}
```

### åŠ¨ç”»å’Œè¿‡æ¸¡
```kotlin
// å¹³æ»‘çš„çŠ¶æ€è½¬æ¢
@Composable
fun AnimatedStateTransition() {
    AnimatedContent(
        targetState = uiState,
        transitionSpec = {
            when {
                // å¯¼å‡ºå¼€å§‹ï¼šæ·¡å…¥+ç¼©æ”¾
                initialState is Idle && targetState is Exporting ->
                    fadeIn() + scaleIn() with fadeOut() + scaleOut()
                // å¯¼å‡ºå®Œæˆï¼šå¼¹æ€§åŠ¨ç”»
                initialState is Exporting && targetState is Success ->
                    fadeIn() + expandIn() with fadeOut()
                // é”™è¯¯çŠ¶æ€ï¼šéœ‡åŠ¨æ•ˆæœ
                targetState is Error ->
                    fadeIn() + slideInVertically() with fadeOut()
                else -> 
                    fadeIn() with fadeOut()
            }
        }
    ) { state ->
        when (state) {
            is Idle -> IdleContent()
            is Exporting -> ExportingContent(state.progress)
            is Success -> SuccessContent(state.result)
            is Error -> ErrorContent(state.error)
        }
    }
}
```

### æ— éšœç¢è®¾è®¡
```kotlin
// è¯­ä¹‰åŒ–æè¿°
@Composable
fun AccessibleExportButton(
    onClick: () -> Unit,
    enabled: Boolean,
    isExporting: Boolean
) {
    Button(
        onClick = onClick,
        enabled = enabled,
        modifier = Modifier.semantics {
            contentDescription = when {
                isExporting -> "æ­£åœ¨å¯¼å‡ºæ•°æ®ï¼Œè¯·ç¨å€™"
                !enabled -> "è¯·å…ˆé€‰æ‹©è¦å¯¼å‡ºçš„æ•°æ®"
                else -> "ç‚¹å‡»å¼€å§‹å¯¼å‡ºå¤‡ä»½æ–‡ä»¶"
            }
            role = Role.Button
        }
    ) {
        // æŒ‰é’®å†…å®¹
    }
}
```

### è®¾è®¡ç³»ç»Ÿä¸€è‡´æ€§
- **é¢œè‰²ä½¿ç”¨**ï¼šéµå¾ªMaterial 3 Color Roles
- **é—´è·è§„èŒƒ**ï¼š8dpç½‘æ ¼ç³»ç»Ÿ
- **å­—ä½“å±‚çº§**ï¼šä¸¥æ ¼éµå¾ªTypography Scale
- **ç»„ä»¶å¤ç”¨**ï¼šä¼˜å…ˆä½¿ç”¨Material 3æ ‡å‡†ç»„ä»¶
- **åŠ¨æ•ˆæ—¶é•¿**ï¼šéµå¾ªMaterial Motionè§„èŒƒ

---

## ğŸ—‘ï¸ éœ€è¦ç§»é™¤çš„åŠŸèƒ½æ¸…å•

### Excelç‰¹å®šUIç»„ä»¶ç§»é™¤
```kotlin
// âŒ éœ€è¦åˆ é™¤çš„ç»„ä»¶å’Œæ–‡ä»¶
- ExcelFormatOptions.kt                 // Excelæ ¼å¼é…ç½®ç»„ä»¶
- ExcelWorksheetDialog.kt              // å·¥ä½œè¡¨è®¾ç½®å¯¹è¯æ¡†  
- ExcelStylePicker.kt                  // Excelæ ·å¼é€‰æ‹©å™¨
- ExcelPreviewScreen.kt                // Excelé¢„è§ˆé¡µé¢
- ExcelExportSettings.kt               // Excelå¯¼å‡ºè®¾ç½®

// âŒ éœ€è¦ç§»é™¤çš„èœå•é¡¹
- "å¯¼å‡ºä¸ºExcel"èœå•é¡¹
- "Excelæ ¼å¼è®¾ç½®"é€‰é¡¹
- "å·¥ä½œè¡¨é…ç½®"å…¥å£
- "æ ·å¼å’Œæ ¼å¼"è®¾ç½®
```

### é…ç½®é€‰é¡¹æ¸…ç†
```kotlin
// âŒ SharedPreferencesä¸­éœ€è¦ç§»é™¤çš„é…ç½®
object DeprecatedPreferences {
    const val EXCEL_EXPORT_FORMAT = "excel_export_format"       // Excelæ ¼å¼é€‰æ‹©
    const val EXCEL_SHEET_NAME = "excel_sheet_name"             // å·¥ä½œè¡¨åç§°
    const val EXCEL_INCLUDE_CHARTS = "excel_include_charts"     // åŒ…å«å›¾è¡¨
    const val EXCEL_AUTO_FIT_COLUMNS = "excel_auto_fit_columns" // è‡ªåŠ¨è°ƒæ•´åˆ—å®½
    const val EXCEL_PASSWORD_PROTECT = "excel_password_protect" // å¯†ç ä¿æŠ¤
    const val EXCEL_WATERMARK = "excel_watermark"               // æ°´å°è®¾ç½®
}

// æ¸…ç†é€»è¾‘
class SettingsMigration {
    fun cleanupExcelSettings() {
        val sharedPrefs = context.getSharedPreferences("app_settings", Context.MODE_PRIVATE)
        sharedPrefs.edit()
            .remove(DeprecatedPreferences.EXCEL_EXPORT_FORMAT)
            .remove(DeprecatedPreferences.EXCEL_SHEET_NAME)
            .remove(DeprecatedPreferences.EXCEL_INCLUDE_CHARTS)
            .remove(DeprecatedPreferences.EXCEL_AUTO_FIT_COLUMNS)
            .remove(DeprecatedPreferences.EXCEL_PASSWORD_PROTECT)
            .remove(DeprecatedPreferences.EXCEL_WATERMARK)
            .apply()
    }
}
```

### ä»£ç å±‚é¢æ¸…ç†
```kotlin
// âŒ éœ€è¦åˆ é™¤çš„ç±»å’Œæ¥å£
- ExcelStyleManager.kt
- ExcelWorkbookBuilder.kt  
- ExcelCellFormatter.kt
- ExcelChartGenerator.kt
- IExcelExporter.kt (æ›¿æ¢ä¸ºIBackupProvider)
- JsonExporter.kt
- JsonImporter.kt

// âŒ éœ€è¦åˆ é™¤çš„æ–¹æ³•
class DataExportViewModel {
    // âŒ åˆ é™¤è¿™äº›æ–¹æ³•
    suspend fun exportToExcel() { }
    suspend fun exportToJson() { }
    suspend fun configureExcelWorksheet() { }
    suspend fun applyExcelStyles() { }
    suspend fun generateExcelCharts() { }
    
    // âœ… ä¿ç•™å¹¶é‡æ„è¿™äº›æ–¹æ³•
    suspend fun exportData() { } // é‡æ„ä¸ºCSVä¸“ç”¨å¯¼å‡º
    suspend fun configureExportOptions() { }
}

// âŒ éœ€è¦ä¿®æ”¹çš„æšä¸¾
enum class ExportFormat {
    JSON,   // âŒ åˆ é™¤
    CSV,    // âœ… ä¿ç•™ä½œä¸ºå”¯ä¸€æ ¼å¼
    EXCEL   // âŒ åˆ é™¤
}
```

---

## ğŸ“ æ–‡æ¡ˆæ›´æ–°å¯¹ç…§è¡¨

### ç•Œé¢æ–‡æ¡ˆæ›´æ–°
| ä½ç½® | å½“å‰æ–‡æ¡ˆ | æ–°æ–‡æ¡ˆ | å¤‡æ³¨ |
|------|----------|--------|------|
| å¯¼å‡ºæŒ‰é’® | "å¯¼å‡ºExcel" | "å¯¼å‡ºå¤‡ä»½" | ä¸»è¦å…¥å£ |
| å¯¼å‡ºè¯´æ˜ | "å¯¼å‡ºä¸ºExcelæ ¼å¼ï¼Œå¯ç”¨Excelè½¯ä»¶æ‰“å¼€" | "å¯¼å‡ºä¸ºå¤‡ä»½æ–‡ä»¶ï¼Œæ”¯æŒExcelã€Numbersç­‰è½¯ä»¶æ‰“å¼€" | æè¿°æ›´å‡†ç¡® |
| è¿›åº¦æç¤º | "æ­£åœ¨ç”ŸæˆExcelæ–‡ä»¶..." | "æ­£åœ¨ç”Ÿæˆå¤‡ä»½æ–‡ä»¶..." | é¿å…è¯¯å¯¼ |
| æˆåŠŸæç¤º | "Excelæ–‡ä»¶å·²ä¿å­˜åˆ°ï¼š" | "å¤‡ä»½æ–‡ä»¶å·²ä¿å­˜åˆ°ï¼š" | ä¿æŒä¸€è‡´æ€§ |
| åˆ†äº«æ–‡æ¡ˆ | "åˆ†äº«Excelæ–‡ä»¶" | "åˆ†äº«å¤‡ä»½æ–‡ä»¶" | Intentæ ‡é¢˜ |
| é”™è¯¯æç¤º | "Excelå¯¼å‡ºå¤±è´¥" | "æ•°æ®å¯¼å‡ºå¤±è´¥" | é”™è¯¯å¯¹è¯æ¡† |

### å¸®åŠ©æ–‡æ¡£æ›´æ–°
```markdown
# å½“å‰å¸®åŠ©æ–‡æ¡£é—®é¢˜ç‚¹
âŒ "å¦‚ä½•å¯¼å‡ºExcelæ–‡ä»¶"
âŒ "Excelæ–‡ä»¶åŒ…å«å¤šä¸ªå·¥ä½œè¡¨"  
âŒ "å¯ä»¥ç”¨Microsoft Excelæ‰“å¼€"
âŒ "æ”¯æŒExcel 2016åŠä»¥ä¸Šç‰ˆæœ¬"

# æ–°å¸®åŠ©æ–‡æ¡£å†…å®¹
âœ… "å¦‚ä½•å¯¼å‡ºå¤‡ä»½æ–‡ä»¶"
âœ… "å¤‡ä»½æ–‡ä»¶åŒ…å«å¤šä¸ªCSVæ•°æ®è¡¨"
âœ… "æ”¯æŒExcelã€Numbersã€WPSç­‰è½¯ä»¶æ‰“å¼€"
âœ… "å…¼å®¹æ‰€æœ‰æ”¯æŒCSVæ ¼å¼çš„è½¯ä»¶"
```

### é€šçŸ¥å’Œæ¶ˆæ¯æ–‡æ¡ˆ
```kotlin
// strings.xml æ›´æ–°
<resources>
    <!-- âŒ åˆ é™¤è¿™äº›å­—ç¬¦ä¸²èµ„æº -->
    <string name="export_excel_title">å¯¼å‡ºExcel</string>
    <string name="excel_export_success">Excelæ–‡ä»¶å¯¼å‡ºæˆåŠŸ</string>
    <string name="excel_export_failed">Excelå¯¼å‡ºå¤±è´¥</string>
    <string name="excel_file_saved">Excelæ–‡ä»¶å·²ä¿å­˜</string>
    
    <!-- âœ… æ–°å¢è¿™äº›å­—ç¬¦ä¸²èµ„æº -->
    <string name="export_backup_title">å¯¼å‡ºå¤‡ä»½</string>
    <string name="backup_export_success">å¤‡ä»½æ–‡ä»¶å¯¼å‡ºæˆåŠŸ</string>
    <string name="backup_export_failed">å¤‡ä»½å¯¼å‡ºå¤±è´¥</string>
    <string name="backup_file_saved">å¤‡ä»½æ–‡ä»¶å·²ä¿å­˜</string>
    <string name="backup_format_info">å¤‡ä»½æ–‡ä»¶æ ¼å¼è¯´æ˜</string>
    <string name="how_to_open_backup">å¦‚ä½•æ‰“å¼€å¤‡ä»½æ–‡ä»¶</string>
</resources>
```

---

## ğŸ¯ ç”¨æˆ·å¼•å¯¼æµç¨‹è®¾è®¡

### é¦–æ¬¡ä½¿ç”¨å¼•å¯¼
```kotlin
@Composable
fun BackupIntroductionDialog(
    onDismiss: () -> Unit,
    onLearnMore: () -> Unit
) {
    AlertDialog(
        onDismissRequest = onDismiss,
        icon = {
            Icon(
                Icons.Filled.Info,
                contentDescription = null,
                tint = MaterialTheme.colorScheme.primary
            )
        },
        title = { Text("æ•°æ®å¯¼å‡ºæ ¼å¼æ›´æ–°") },
        text = {
            Column {
                Text("æˆ‘ä»¬ä¼˜åŒ–äº†æ•°æ®å¯¼å‡ºåŠŸèƒ½ï¼š")
                Spacer(modifier = Modifier.height(8.dp))
                
                BulletPoint("âœ… ä¿®å¤äº†å¯¼å‡ºå´©æºƒé—®é¢˜")
                BulletPoint("âœ… å¯¼å‡ºé€Ÿåº¦æå‡200%") 
                BulletPoint("âœ… å†…å­˜å ç”¨å‡å°‘70%")
                BulletPoint("âœ… æ”¯æŒæ›´å¤§æ•°æ®é‡å¯¼å‡º")
                
                Spacer(modifier = Modifier.height(8.dp))
                Text(
                    "ç°åœ¨å¯¼å‡º .ccbackup æ ¼å¼ï¼Œä»å¯ç”¨Excelç­‰è½¯ä»¶æ‰“å¼€",
                    style = MaterialTheme.typography.bodySmall
                )
            }
        },
        confirmButton = {
            Button(onClick = onDismiss) { Text("å¼€å§‹ä½¿ç”¨") }
        },
        dismissButton = {
            TextButton(onClick = onLearnMore) { Text("äº†è§£è¯¦æƒ…") }
        }
    )
}
```

### åˆ†æ­¥æ“ä½œæŒ‡å—
```kotlin
@Composable
fun HowToOpenBackupGuide() {
    LazyColumn(modifier = Modifier.padding(16.dp)) {
        item {
            Text(
                "å¦‚ä½•æ‰“å¼€CCå°è®°å¤‡ä»½æ–‡ä»¶",
                style = MaterialTheme.typography.headlineMedium
            )
            Spacer(modifier = Modifier.height(16.dp))
        }
        
        item {
            StepCard(
                stepNumber = 1,
                title = "æ‰¾åˆ°å¤‡ä»½æ–‡ä»¶",
                description = "æ–‡ä»¶åç±»ä¼¼ï¼šCCå°è®°å¤‡ä»½_20250726.ccbackup"
            ) {
                Image(
                    painter = painterResource(R.drawable.step1_find_file),
                    contentDescription = null
                )
            }
        }
        
        item {
            StepCard(
                stepNumber = 2, 
                title = "è§£å‹å¤‡ä»½æ–‡ä»¶",
                description = "ä½¿ç”¨å‹ç¼©è½¯ä»¶(å¦‚RARã€WinZip)è§£å‹"
            ) {
                Text("æ¨èè½¯ä»¶ï¼š\nâ€¢ Android: RARã€ZArchiver\nâ€¢ Windows: WinRARã€7-Zip\nâ€¢ macOS: The Unarchiver")
            }
        }
        
        item {
            StepCard(
                stepNumber = 3,
                title = "æ‰“å¼€CSVæ–‡ä»¶", 
                description = "ç”¨Excelã€Numbersæˆ–WPSæ‰“å¼€è§£å‹åçš„CSVæ–‡ä»¶"
            ) {
                Text("æ”¯æŒè½¯ä»¶ï¼š\nâ€¢ Microsoft Excel\nâ€¢ Apple Numbers\nâ€¢ WPS Office\nâ€¢ Google Sheets")
            }
        }
    }
}
```

---

## ğŸ“± Phase 5: UIé›†æˆä¸ä¸Šçº¿ (Day 6-7)
**ç›®æ ‡**: æ›´æ–°ç”¨æˆ·ç•Œé¢ï¼Œæ¸…ç†åºŸå¼ƒåŠŸèƒ½ï¼Œå‡†å¤‡å‘å¸ƒ

### ä»»åŠ¡åˆ—è¡¨

#### **T5.1** UIç•Œé¢å…¨é¢æ”¹é€  âŒ **æœªå®ç°**
- **å¯¼å‡ºé¡µé¢é‡æ„**
  ```kotlin
  // æ›¿æ¢ DataExportScreen ç»„ä»¶
  - æ›´æ–°å¯¼å‡ºæŒ‰é’®æ–‡æ¡ˆå’Œæ ·å¼
  - æ·»åŠ å¤‡ä»½æ ¼å¼è¯´æ˜å¡ç‰‡
  - é‡æ–°è®¾è®¡å¯¼å‡ºé…ç½®é€‰é¡¹
  ```
- **å¯¼å…¥é¡µé¢å¢å¼º**
  ```kotlin
  // æ·»åŠ æ ¼å¼æ£€æµ‹å’Œå…¼å®¹æ€§æç¤º
  - å®ç°æ–‡ä»¶æ ¼å¼è‡ªåŠ¨è¯†åˆ«
  - æ·»åŠ å‘åå…¼å®¹æ€§è¯´æ˜
  - ä¼˜åŒ–å¯¼å…¥è¿›åº¦æ˜¾ç¤º
  ```
- **è®¾ç½®é¡µé¢æ‰©å±•**
  ```kotlin
  // æ–°å¢å¤‡ä»½ç›¸å…³è®¾ç½®
  - å¯¼å‡ºæ ¼å¼é…ç½®é€‰é¡¹
  - è‡ªåŠ¨æ¸…ç†ä¸´æ—¶æ–‡ä»¶å¼€å…³
  - æ“ä½œæŒ‡å—æ˜¾ç¤ºå¼€å…³
  ```
- **æ—¶é—´**: 4å°æ—¶
- **éªŒæ”¶**: æ‰€æœ‰UIç»„ä»¶æ›´æ–°å®Œæˆï¼Œç”¨æˆ·ä½“éªŒä¼˜åŒ–
- **ç°çŠ¶**: ç•Œé¢ä»æ˜¾ç¤º"å¯¼å‡ºExcel"ç­‰è¿‡æ—¶æ–‡æ¡ˆï¼Œæœªè¿›è¡ŒUIæ”¹é€ 

#### **T5.2** åºŸå¼ƒåŠŸèƒ½æ¸…ç† âŒ **æœªå®ç°**
- **åˆ é™¤Excelç‰¹å®šç»„ä»¶**
  ```kotlin
  // ç§»é™¤æ–‡ä»¶æ¸…å•
  - ExcelFormatOptions.kt
  - ExcelWorksheetDialog.kt 
  - ExcelStylePicker.kt
  - ExcelPreviewScreen.kt
  - ExcelExportSettings.kt
  ```
- **æ¸…ç†é…ç½®é¡¹å’Œèœå•**
  ```kotlin
  // SharedPreferencesæ¸…ç†
  - ç§»é™¤æ‰€æœ‰Excelç›¸å…³é…ç½®
  - å®ç°è®¾ç½®è¿ç§»é€»è¾‘
  - æ¸…ç†åºŸå¼ƒçš„èœå•é¡¹
  ```
- **ä»£ç å±‚é¢é‡æ„**
  ```kotlin
  // åˆ é™¤åºŸå¼ƒç±»å’Œæ–¹æ³•
  - ExcelStyleManagerç­‰å·¥å…·ç±»
  - DataExportViewModelä¸­çš„Excelæ–¹æ³•
  - ç›¸å…³æ¥å£å’Œå®ç°
  ```
- **æ—¶é—´**: 3å°æ—¶
- **éªŒæ”¶**: æ‰€æœ‰Excelç›¸å…³ä»£ç æ¸…ç†å®Œæˆï¼Œç¼–è¯‘é€šè¿‡
- **ç°çŠ¶**: Excelç›¸å…³ä»£ç å’Œé…ç½®ä»å­˜åœ¨ï¼Œæœªè¿›è¡Œæ¸…ç†

#### **T5.3** æ–‡æ¡ˆå’Œèµ„æºæ›´æ–° âŒ **æœªå®ç°**
- **å­—ç¬¦ä¸²èµ„æºå…¨é¢æ›´æ–°**
  ```xml
  <!-- strings.xml æ›´æ–° -->
  - æ›¿æ¢æ‰€æœ‰"Excel"ç›¸å…³æ–‡æ¡ˆ
  - æ·»åŠ å¤‡ä»½æ ¼å¼è¯´æ˜æ–‡æ¡ˆ
  - æ›´æ–°é”™è¯¯æç¤ºå’ŒæˆåŠŸæ¶ˆæ¯
  ```
- **å¸®åŠ©æ–‡æ¡£é‡å†™**
  ```markdown
  - é‡å†™å¯¼å‡ºå¸®åŠ©æ–‡æ¡£
  - æ·»åŠ å¤‡ä»½æ–‡ä»¶ä½¿ç”¨æŒ‡å—
  - æ›´æ–°FAQé¡µé¢å†…å®¹
  ```
- **å¤šè¯­è¨€é€‚é…**
  ```
  - è‹±æ–‡ç‰ˆæœ¬æ–‡æ¡ˆæ›´æ–°
  - å…¶ä»–è¯­è¨€ç‰ˆæœ¬åŒæ­¥
  ```
- **æ—¶é—´**: 2å°æ—¶
- **éªŒæ”¶**: æ‰€æœ‰æ–‡æ¡ˆæ›´æ–°å®Œæˆï¼Œå¤šè¯­è¨€é€‚é…æ­£ç¡®
- **ç°çŠ¶**: strings.xmlä»åŒ…å«Excelç›¸å…³æ–‡æ¡ˆï¼Œå¸®åŠ©æ–‡æ¡£æœªæ›´æ–°

#### **T5.4** ç”¨æˆ·å¼•å¯¼å®ç° âŒ **æœªå®ç°**
- **é¦–æ¬¡ä½¿ç”¨å¼•å¯¼**
  ```kotlin
  // å®ç°å¼•å¯¼å¯¹è¯æ¡†
  - BackupIntroductionDialog ç»„ä»¶
  - æ ¼å¼å˜æ›´è¯´æ˜å¼¹çª—
  - ä¼˜åŠ¿è¯´æ˜å’Œç”¨æˆ·æ•™è‚²
  ```
- **åˆ†æ­¥æ“ä½œæŒ‡å—**
  ```kotlin
  // HowToOpenBackupGuide é¡µé¢
  - å›¾æ–‡å¹¶èŒ‚çš„æ“ä½œæ­¥éª¤
  - å¸¸è§é—®é¢˜è§£ç­”
  - æ¨èè½¯ä»¶åˆ—è¡¨
  ```
- **ä¸Šä¸‹æ–‡å¸®åŠ©**
  ```kotlin
  // æ·»åŠ å³æ—¶å¸®åŠ©æç¤º
  - å¯¼å‡ºé¡µé¢å¸®åŠ©æŒ‰é’®
  - Tooltipå’Œæµ®åŠ¨æç¤º
  - å¿«é€Ÿæ“ä½œæŒ‡å—
  ```
- **æ—¶é—´**: 3å°æ—¶
- **éªŒæ”¶**: ç”¨æˆ·å¼•å¯¼å®Œæ•´ï¼Œæ“ä½œæµç¨‹æ¸…æ™°
- **ç°çŠ¶**: æ— ç”¨æˆ·å¼•å¯¼ç»„ä»¶ï¼Œç”¨æˆ·å¯¹æ ¼å¼å˜æ›´ä¸çŸ¥æƒ…

#### **T5.5** é›†æˆæµ‹è¯•ä¸ä¼˜åŒ– âŒ **æœªå®ç°**
- **ç«¯åˆ°ç«¯æµ‹è¯•**
  ```
  - å®Œæ•´çš„å¯¼å‡ºâ†’åˆ†äº«â†’å¯¼å…¥æµç¨‹
  - è·¨è®¾å¤‡è¿ç§»åœºæ™¯æµ‹è¯•
  - ä¸åŒæ–‡ä»¶æ ¼å¼å…¼å®¹æ€§æµ‹è¯•
  ```
- **ç”¨æˆ·ä½“éªŒæµ‹è¯•**
  ```
  - é¦–æ¬¡ç”¨æˆ·æ“ä½œæµç¨‹æµ‹è¯•
  - ç•Œé¢å“åº”é€Ÿåº¦æµ‹è¯•
  - é”™è¯¯å¤„ç†åœºæ™¯æµ‹è¯•
  ```
- **æ€§èƒ½éªŒè¯**
  ```
  - UIå“åº”æ—¶é—´æµ‹è¯•
  - å†…å­˜å ç”¨ç›‘æ§
  - ç”µæ± æ¶ˆè€—è¯„ä¼°
  ```
- **æ—¶é—´**: 3å°æ—¶
- **éªŒæ”¶**: æ‰€æœ‰æµ‹è¯•åœºæ™¯é€šè¿‡ï¼Œæ€§èƒ½æŒ‡æ ‡è¾¾æ ‡
- **ç°çŠ¶**: æ— é›†æˆæµ‹è¯•è®¡åˆ’ï¼Œæœªè¿›è¡Œç”¨æˆ·ä½“éªŒéªŒè¯

#### **T5.6** å‘å¸ƒå‡†å¤‡ âŒ **æœªå®ç°**
- **ç‰ˆæœ¬ä¿¡æ¯æ›´æ–°**
  ```
  - ç‰ˆæœ¬å·å‡çº§ (å¦‚: 2.4.0)
  - build.gradleç‰ˆæœ¬é…ç½®
  - ç‰ˆæœ¬ç‰¹æ€§æ ‡è®°
  ```
- **å‘å¸ƒèµ„æ–™å‡†å¤‡**
  ```markdown
  # æ›´æ–°æ—¥å¿—å†…å®¹
  ## v2.4.0 é‡å¤§æ›´æ–°
  ### ğŸ”§ ä¿®å¤
  - å½»åº•è§£å†³æ•°æ®å¯¼å‡ºå´©æºƒé—®é¢˜
  
  ### âš¡ æ€§èƒ½æå‡
  - å¯¼å‡ºé€Ÿåº¦æå‡200%
  - å†…å­˜å ç”¨å‡å°‘70%
  - APKä½“ç§¯å‡å°‘3MB
  
  ### ğŸ¨ ç”¨æˆ·ä½“éªŒ
  - å…¨æ–°çš„å¤‡ä»½æ ¼å¼ï¼Œæ›´ç¨³å®šå¯é 
  - ä¼˜åŒ–å¯¼å‡ºç•Œé¢å’Œæ“ä½œæµç¨‹
  - æ·»åŠ è¯¦ç»†çš„ä½¿ç”¨æŒ‡å—
  ```
- **APKæ„å»ºä¸ç­¾å**
  ```
  - Releaseç‰ˆæœ¬æ„å»º
  - ä»£ç ç­¾åå’ŒéªŒè¯
  - å®‰è£…åŒ…å¤§å°æ£€æŸ¥
  ```
- **æ—¶é—´**: 2å°æ—¶
- **éªŒæ”¶**: å¯å‘å¸ƒçš„APKæ–‡ä»¶ï¼Œå‘å¸ƒèµ„æ–™é½å…¨
- **ç°çŠ¶**: ç‰ˆæœ¬ä¿¡æ¯æœªæ›´æ–°ï¼Œæ— å‘å¸ƒèµ„æ–™ï¼Œä¸å…·å¤‡å‘å¸ƒæ¡ä»¶

---

## âš ï¸ é£é™©è¯„ä¼°ä¸ç¼“è§£

### é«˜é£é™©é¡¹
| é£é™© | æ¦‚ç‡ | å½±å“ | ç¼“è§£æªæ–½ | è´Ÿè´£äºº |
|------|------|------|----------|--------|
| å¤§æ•°æ®é‡OOM | ä¸­ | é«˜ | ä¸¥æ ¼åˆ†é¡µæŸ¥è¯¢ï¼Œå†…å­˜ç›‘æ§ | å¼€å‘ |
| CSVç¼–ç é—®é¢˜ | ä½ | ä¸­ | UTF-8 BOMï¼Œå……åˆ†æµ‹è¯• | å¼€å‘ |
| ç”¨æˆ·æ¥å—åº¦ | ä½ | ä¸­ | æ¸…æ™°è¯´æ˜ï¼Œä¿æŒExcelå…¼å®¹ | PM |

### ç¼“è§£ç­–ç•¥
1. **å†…å­˜ç›‘æ§**: å®æ—¶ç›‘æ§å¯¼å‡ºè¿‡ç¨‹å†…å­˜ä½¿ç”¨
2. **åˆ†æ­¥éªŒè¯**: æ¯ä¸ªé˜¶æ®µéƒ½æœ‰æ˜ç¡®éªŒæ”¶æ ‡å‡†
3. **å›æ»šæ–¹æ¡ˆ**: ä¿ç•™æ—§ç‰ˆæœ¬APKä»¥å¤‡å›æ»š
4. **ç”¨æˆ·æ²Ÿé€š**: æå‰åœ¨æ›´æ–°æ—¥å¿—ä¸­è¯´æ˜æ”¹è¿›

---

## ğŸ§ª æµ‹è¯•è®¡åˆ’

### åŠŸèƒ½æµ‹è¯•
- [ ] æ­£å¸¸å¯¼å‡ºæµç¨‹æµ‹è¯•
- [ ] å¤§æ•°æ®é‡å¯¼å‡ºæµ‹è¯• (1ä¸‡/5ä¸‡/10ä¸‡æ¡)
- [ ] å¯¼å…¥åŠŸèƒ½æµ‹è¯•
- [ ] æ•°æ®å®Œæ•´æ€§éªŒè¯
- [ ] é”™è¯¯æƒ…å†µå¤„ç†æµ‹è¯•

### æ€§èƒ½æµ‹è¯•
- [ ] å†…å­˜ä½¿ç”¨ç›‘æ§
- [ ] å¯¼å‡ºé€Ÿåº¦æµ‹è¯•
- [ ] ä½ç«¯è®¾å¤‡å…¼å®¹æ€§æµ‹è¯•
- [ ] ç”µæ± æ¶ˆè€—æµ‹è¯•

### å…¼å®¹æ€§æµ‹è¯•
- [ ] Android 8.0-14 å…¼å®¹æ€§
- [ ] ä¸åŒå‚å•†ROMæµ‹è¯•
- [ ] Excel/Numbers/WPSæ‰“å¼€æµ‹è¯•
- [ ] æ–‡ä»¶åˆ†äº«åŠŸèƒ½æµ‹è¯•

---

## ğŸ“Š éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½éªŒæ”¶
- [x] å¯¼å‡ºåŠŸèƒ½é›¶å´©æºƒ âœ… **å·²å®ç°** - CsvBackupProviderå®Œæ•´å®ç°
- [x] ç”Ÿæˆå•ä¸ª.ccbackupæ–‡ä»¶ âœ… **å·²å®ç°** - ZIPæ‰“åŒ…åŠŸèƒ½å®Œæˆ
- [x] åŒ…å«5ç§æ•°æ®ç±»å‹ âš ï¸ **éƒ¨åˆ†å®ç°** - ç¼ºSchedule/Planæ¨¡å—å¯¼å‡º
- [x] æ”¯æŒExcelè½¯ä»¶æ‰“å¼€ âœ… **å·²å®ç°** - CSVæ ¼å¼å…¼å®¹
- [x] å¯¼å…¥åŠŸèƒ½å®Œæ•´ âœ… **å·²å®ç°** - æ”¯æŒ.ccbackup/.jsonå¯¼å…¥
- [ ] ç§»é™¤Excelå’ŒJSONæ ¼å¼é€‰é¡¹ âŒ **æœªå®ç°** - UIç•Œé¢æœªæ›´æ–°

### æ€§èƒ½éªŒæ”¶
- [ ] 10ä¸‡æ¡è®°å½•å¯¼å‡º â‰¤ 15ç§’ â“ **æœªæµ‹è¯•** - æ— æ€§èƒ½æµ‹è¯•éªŒè¯
- [ ] å³°å€¼å†…å­˜ä½¿ç”¨ â‰¤ 50MB â“ **æœªæµ‹è¯•** - æ— å†…å­˜ç›‘æ§éªŒè¯
- [ ] APKä½“ç§¯å‡å°‘ â‰¥ 3MB â“ **æœªæµ‹è¯•** - éœ€å¯¹æ¯”æµ‹è¯•
- [ ] 2GB RAMè®¾å¤‡æ­£å¸¸è¿è¡Œ â“ **æœªæµ‹è¯•** - æ— ä½ç«¯è®¾å¤‡æµ‹è¯•

### ç”¨æˆ·ä½“éªŒéªŒæ”¶
- [ ] æ— æ ¼å¼é€‰æ‹©å›°æ‰° âŒ **æœªå®ç°** - ç”¨æˆ·ä»çœ‹åˆ°Excelé€‰é¡¹
- [ ] æ–‡ä»¶å‘½åæ¸…æ™°æ˜“æ‡‚ âœ… **å·²å®ç°** - .ccbackupæ ¼å¼æ¸…æ™°
- [ ] é”™è¯¯æç¤ºå‹å¥½ âŒ **æœªå®ç°** - ç¼ºå°‘BackupErrorä½“ç³»
- [ ] å¸®åŠ©æ–‡æ¡£å®Œæ•´ âŒ **æœªå®ç°** - æœªæ›´æ–°ç”¨æˆ·æŒ‡å—

### æ ¼å¼ç»Ÿä¸€æ”¶ç›Š
- [ ] å‡å°‘ç”¨æˆ·é€‰æ‹©å›°æƒ‘ âŒ **æœªå®ç°** - UIæœªç®€åŒ–
- [x] é™ä½ç»´æŠ¤æˆæœ¬ âœ… **å·²å®ç°** - ä»£ç æ¶æ„ç»Ÿä¸€
- [x] ç®€åŒ–æµ‹è¯•åœºæ™¯ âœ… **å·²å®ç°** - å•ä¸€æ ¼å¼
- [x] æå‡ä»£ç è´¨é‡ âœ… **å·²å®ç°** - æ¶æ„æ¸…æ™°

---

## ğŸš€ å‘å¸ƒè®¡åˆ’

### å‘å¸ƒé˜¶æ®µ
1. **å†…æµ‹ç‰ˆ** (Day 6): å†…éƒ¨å›¢é˜Ÿæµ‹è¯•
2. **Betaç‰ˆ** (Day 7): å°èŒƒå›´ç”¨æˆ·æµ‹è¯• 
3. **æ­£å¼ç‰ˆ** (Day 8): å…¨é‡å‘å¸ƒ

### å‘å¸ƒæ£€æŸ¥æ¸…å•
- [ ] æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹é€šè¿‡
- [ ] æ€§èƒ½æŒ‡æ ‡è¾¾æ ‡
- [ ] å®‰å…¨å®¡æŸ¥é€šè¿‡
- [ ] æ–‡æ¡£æ›´æ–°å®Œæˆ
- [ ] å›æ»šæ–¹æ¡ˆå‡†å¤‡
- [ ] ç›‘æ§å‘Šè­¦é…ç½®

---

## ğŸ“ˆ åç»­ä¼˜åŒ–è®¡åˆ’

### çŸ­æœŸä¼˜åŒ– (1ä¸ªæœˆå†…)
- [ ] æ ¹æ®ç”¨æˆ·åé¦ˆä¼˜åŒ–UI
- [ ] æ€§èƒ½è¿›ä¸€æ­¥è°ƒä¼˜
- [ ] å¢åŠ æ›´å¤šå¯¼å‡ºé€‰é¡¹

### é•¿æœŸè§„åˆ’ (3-6ä¸ªæœˆ)
- [ ] è¯„ä¼°æ˜¯å¦é‡æ–°å¼•å…¥Excelä½œä¸ºå¯é€‰åŠŸèƒ½
- [ ] äº‘ç«¯å¤‡ä»½é›†æˆ
- [ ] å¤šè®¾å¤‡åŒæ­¥åŠŸèƒ½

---

## ğŸ”§ åº”æ€¥é¢„æ¡ˆ

### å¦‚æœå‘ç°é‡å¤§é—®é¢˜
1. **ç«‹å³å›æ»š**: å‘å¸ƒä¸Šä¸€ä¸ªç¨³å®šç‰ˆæœ¬
2. **é—®é¢˜å®šä½**: å¿«é€Ÿåˆ†æé”™è¯¯æ—¥å¿—
3. **çƒ­ä¿®å¤**: å‘å¸ƒç´§æ€¥ä¿®å¤ç‰ˆæœ¬
4. **ç”¨æˆ·æ²Ÿé€š**: åŠæ—¶è¯´æ˜æƒ…å†µå’Œè§£å†³è¿›åº¦

### å›æ»šè§¦å‘æ¡ä»¶
- å´©æºƒç‡ > 1%
- å¯¼å‡ºæˆåŠŸç‡ < 95%
- ç”¨æˆ·æŠ•è¯‰æ¿€å¢
- å‘ç°æ•°æ®ä¸¢å¤±é£é™©

---

## ğŸ“ é¡¹ç›®è”ç³»ä¿¡æ¯

**é¡¹ç›®ç»ç†**: [PM Name]  
**æŠ€æœ¯è´Ÿè´£äºº**: [Tech Lead Name]  
**å¼€å‘å›¢é˜Ÿ**: Android Team  
**æµ‹è¯•è´Ÿè´£äºº**: [QA Lead Name]  

**æ²Ÿé€šæ¸ é“**: 
- æ—¥å¸¸è¿›åº¦: é’‰é’‰ç¾¤
- ç´§æ€¥é—®é¢˜: ç”µè¯ + ä¼ä¸šå¾®ä¿¡
- æ–‡æ¡£å…±äº«: Confluence

---

## ğŸ“± ç»Ÿä¸€æ•°æ®ç®¡ç†ç•Œé¢è®¾è®¡æ–¹æ¡ˆ

### ğŸ¯ è®¾è®¡ç›®æ ‡
å°†åˆ†æ•£çš„5ä¸ªæ•°æ®ç®¡ç†åŠŸèƒ½ï¼ˆå¯¼å…¥ã€å¯¼å‡ºã€å¤‡ä»½ã€åŒæ­¥ã€æ¢å¤ï¼‰æ•´åˆåˆ°ç»Ÿä¸€çš„æ•°æ®ç®¡ç†ä¸­å¿ƒï¼Œæä¾›ä¸€è‡´çš„ç”¨æˆ·ä½“éªŒå’Œä»£ç æ¶æ„ã€‚

### ğŸ—ï¸ æ•´ä½“æ¶æ„

#### 1. ä¸»å…¥å£ç•Œé¢ - DataManagementScreen
```kotlin
@Composable
fun DataManagementScreen(navController: NavController) {
    Scaffold(
        topBar = {
            TopAppBar(
                title = { Text("æ•°æ®ç®¡ç†") },
                navigationIcon = { /* è¿”å›æŒ‰é’® */ }
            )
        }
    ) { paddingValues ->
        LazyColumn(
            modifier = Modifier.padding(paddingValues),
            verticalArrangement = Arrangement.spacedBy(16.dp)
        ) {
            // é¡¶éƒ¨ç»Ÿè®¡å¡ç‰‡
            item {
                DataStatisticsCard(
                    totalSize = "126.8 MB",
                    lastBackup = "2025-07-25 14:30",
                    lastSync = "2025-07-26 09:15"
                )
            }
            
            // åŠŸèƒ½å¡ç‰‡ç½‘æ ¼
            item {
                DataManagementGrid(
                    onImportClick = { navController.navigate("data_import") },
                    onExportClick = { navController.navigate("data_export") },
                    onBackupClick = { navController.navigate("data_backup") },
                    onSyncClick = { navController.navigate("data_sync") },
                    onRestoreClick = { navController.navigate("data_restore") }
                )
            }
            
            // æ“ä½œå†å²
            item {
                RecentOperationsSection(operations = uiState.recentOperations)
            }
        }
    }
}
```

#### 2. åŠŸèƒ½å¡ç‰‡è®¾è®¡
```kotlin
@Composable
fun DataManagementCard(
    icon: ImageVector,
    title: String,
    subtitle: String,
    lastOperation: String?,
    badgeCount: Int? = null,
    onClick: () -> Unit
) {
    Card(
        modifier = Modifier
            .fillMaxWidth()
            .clickable { onClick() },
        colors = CardDefaults.cardColors(
            containerColor = MaterialTheme.colorScheme.surfaceVariant
        )
    ) {
        Row(
            modifier = Modifier.padding(16.dp),
            verticalAlignment = Alignment.CenterVertically
        ) {
            // å›¾æ ‡å®¹å™¨
            Box(
                modifier = Modifier
                    .size(48.dp)
                    .background(
                        MaterialTheme.colorScheme.primary.copy(alpha = 0.1f),
                        CircleShape
                    ),
                contentAlignment = Alignment.Center
            ) {
                Icon(
                    icon, 
                    contentDescription = null,
                    tint = MaterialTheme.colorScheme.primary,
                    modifier = Modifier.size(24.dp)
                )
            }
            
            Spacer(modifier = Modifier.width(16.dp))
            
            // æ–‡æœ¬å†…å®¹
            Column(modifier = Modifier.weight(1f)) {
                Row(verticalAlignment = Alignment.CenterVertically) {
                    Text(
                        title,
                        style = MaterialTheme.typography.titleMedium,
                        fontWeight = FontWeight.Medium
                    )
                    badgeCount?.let {
                        Spacer(modifier = Modifier.width(8.dp))
                        Badge { Text(it.toString()) }
                    }
                }
                Text(
                    subtitle,
                    style = MaterialTheme.typography.bodyMedium,
                    color = MaterialTheme.colorScheme.onSurfaceVariant
                )
                lastOperation?.let {
                    Text(
                        it,
                        style = MaterialTheme.typography.bodySmall,
                        color = MaterialTheme.colorScheme.onSurfaceVariant.copy(alpha = 0.7f)
                    )
                }
            }
            
            Icon(
                Icons.AutoMirrored.Filled.KeyboardArrowRight,
                contentDescription = null,
                tint = MaterialTheme.colorScheme.onSurfaceVariant
            )
        }
    }
}
```

### ğŸ¨ å„åŠŸèƒ½è¯¦ç»†è®¾è®¡

#### 1. æ•°æ®å¯¼å…¥ï¼ˆå¢å¼ºç‰ˆï¼‰
```kotlin
// ç»Ÿä¸€çš„å¯¼å…¥æµç¨‹ï¼šæ–‡ä»¶é€‰æ‹© -> æ ¼å¼æ£€æµ‹ -> é¢„è§ˆé…ç½® -> æ‰§è¡Œå¯¼å…¥ -> ç»“æœå±•ç¤º
@Composable
fun DataImportDetailScreen(
    navController: NavController,
    viewModel: DataImportViewModel = hiltViewModel()
) {
    val uiState by viewModel.uiState.collectAsStateWithLifecycle()
    
    Scaffold(
        topBar = {
            TopAppBar(
                title = { Text("æ•°æ®å¯¼å…¥") },
                navigationIcon = { /* è¿”å›æŒ‰é’® */ },
                actions = {
                    TextButton(onClick = { /* æ˜¾ç¤ºå¸®åŠ© */ }) {
                        Text("å¸®åŠ©")
                    }
                }
            )
        }
    ) { paddingValues ->
        when (uiState.step) {
            ImportStep.FILE_SELECT -> {
                FileSelectStep(
                    supportedFormats = listOf(".ccbackup", ".xlsx", ".json"),
                    recentFiles = uiState.recentImportFiles,
                    onFileSelected = viewModel::handleFileSelection,
                    onUrlImport = viewModel::handleUrlImport
                )
            }
            ImportStep.PREVIEW -> {
                ImportPreviewStep(
                    fileInfo = uiState.fileInfo,
                    detectedFormat = uiState.format,
                    moduleOptions = uiState.moduleOptions,
                    onConfirm = viewModel::startImport,
                    onCancel = viewModel::cancelImport
                )
            }
            ImportStep.IMPORTING -> {
                ImportProgressStep(
                    progress = uiState.progress,
                    currentModule = uiState.currentModule,
                    processedCount = uiState.processedCount,
                    totalCount = uiState.totalCount
                )
            }
            ImportStep.RESULT -> {
                ImportResultStep(
                    result = uiState.result,
                    onViewDetails = { /* æŸ¥çœ‹è¯¦æƒ… */ },
                    onDone = { navController.popBackStack() }
                )
            }
        }
    }
}
```

#### 2. æ•°æ®å¯¼å‡ºï¼ˆç»Ÿä¸€æ ¼å¼ï¼‰
```kotlin
@Composable
fun DataExportDetailScreen(
    navController: NavController,
    viewModel: DataExportViewModel = hiltViewModel()
) {
    Scaffold(
        topBar = {
            TopAppBar(
                title = { Text("æ•°æ®å¯¼å‡º") },
                navigationIcon = { /* è¿”å›æŒ‰é’® */ }
            )
        },
        bottomBar = {
            AnimatedVisibility(visible = uiState.canExport) {
                BottomAppBar {
                    Button(
                        onClick = viewModel::startExport,
                        modifier = Modifier
                            .fillMaxWidth()
                            .padding(horizontal = 16.dp),
                        enabled = !uiState.isExporting
                    ) {
                        if (uiState.isExporting) {
                            CircularProgressIndicator(
                                modifier = Modifier.size(16.dp),
                                strokeWidth = 2.dp
                            )
                        } else {
                            Icon(Icons.Default.Download, contentDescription = null)
                            Spacer(modifier = Modifier.width(8.dp))
                            Text("å¯¼å‡ºä¸ºå¤‡ä»½æ–‡ä»¶ (.ccbackup)")
                        }
                    }
                }
            }
        }
    ) { paddingValues ->
        LazyColumn(
            modifier = Modifier.padding(paddingValues),
            contentPadding = PaddingValues(16.dp),
            verticalArrangement = Arrangement.spacedBy(16.dp)
        ) {
            // å¯¼å‡ºé¢„ä¼°ä¿¡æ¯
            item {
                ExportEstimationCard(
                    selectedModules = uiState.selectedModules,
                    dateRange = uiState.dateRange,
                    estimatedSize = uiState.estimatedSize,
                    estimatedTime = uiState.estimatedTime
                )
            }
            
            // æ¨¡å—é€‰æ‹©
            item {
                ModuleSelectionSection(
                    modules = uiState.availableModules,
                    selectedModules = uiState.selectedModules,
                    onModuleToggle = viewModel::toggleModule
                )
            }
            
            // æ—¥æœŸèŒƒå›´é€‰æ‹©
            item {
                DateRangeSection(
                    selectedRange = uiState.dateRange,
                    customStart = uiState.customStart,
                    customEnd = uiState.customEnd,
                    onRangeChange = viewModel::updateDateRange
                )
            }
            
            // é«˜çº§é€‰é¡¹
            item {
                AdvancedOptionsSection(
                    includeAttachments = uiState.includeAttachments,
                    compressImages = uiState.compressImages,
                    onOptionsChange = viewModel::updateOptions
                )
            }
        }
    }
}
```

#### 3. æ•°æ®å¤‡ä»½ï¼ˆå®Œæ•´å¤‡ä»½ï¼‰
```kotlin
@Composable
fun DataBackupDetailScreen(
    navController: NavController,
    viewModel: DataBackupViewModel = hiltViewModel()
) {
    Scaffold(
        topBar = {
            TopAppBar(
                title = { Text("æ•°æ®å¤‡ä»½") },
                navigationIcon = { /* è¿”å›æŒ‰é’® */ },
                actions = {
                    IconButton(onClick = viewModel::showBackupSettings) {
                        Icon(Icons.Default.Settings, contentDescription = "å¤‡ä»½è®¾ç½®")
                    }
                }
            )
        }
    ) { paddingValues ->
        Column(
            modifier = Modifier
                .fillMaxSize()
                .padding(paddingValues)
                .padding(16.dp),
            verticalArrangement = Arrangement.spacedBy(16.dp)
        ) {
            // å¤‡ä»½çŠ¶æ€å¡ç‰‡
            BackupStatusCard(
                lastBackupTime = uiState.lastBackupTime,
                backupSize = uiState.lastBackupSize,
                nextScheduledBackup = uiState.nextScheduledBackup,
                isAutoBackupEnabled = uiState.isAutoBackupEnabled
            )
            
            // å¤‡ä»½ç±»å‹é€‰æ‹©
            BackupTypeSelector(
                selectedType = uiState.backupType,
                onTypeChange = viewModel::updateBackupType
            )
            
            // å¤‡ä»½ä½ç½®é€‰æ‹©
            BackupLocationSection(
                locations = uiState.backupLocations,
                selectedLocation = uiState.selectedLocation,
                onLocationChange = viewModel::updateLocation,
                onAddLocation = viewModel::addCustomLocation
            )
            
            Spacer(modifier = Modifier.weight(1f))
            
            // ç«‹å³å¤‡ä»½æŒ‰é’®
            Button(
                onClick = viewModel::startBackup,
                modifier = Modifier.fillMaxWidth(),
                enabled = !uiState.isBackingUp
            ) {
                if (uiState.isBackingUp) {
                    CircularProgressIndicator(
                        modifier = Modifier.size(16.dp),
                        strokeWidth = 2.dp
                    )
                    Spacer(modifier = Modifier.width(8.dp))
                    Text("å¤‡ä»½ä¸­... ${uiState.backupProgress}%")
                } else {
                    Icon(Icons.Default.Backup, contentDescription = null)
                    Spacer(modifier = Modifier.width(8.dp))
                    Text("ç«‹å³å¤‡ä»½")
                }
            }
            
            // å¤‡ä»½å†å²
            TextButton(
                onClick = { navController.navigate("backup_history") },
                modifier = Modifier.fillMaxWidth()
            ) {
                Text("æŸ¥çœ‹å¤‡ä»½å†å²")
                Spacer(modifier = Modifier.width(4.dp))
                Icon(
                    Icons.AutoMirrored.Filled.KeyboardArrowRight,
                    contentDescription = null,
                    modifier = Modifier.size(16.dp)
                )
            }
        }
    }
}
```

#### 4. æ•°æ®åŒæ­¥ï¼ˆäº‘ç«¯åŒæ­¥ï¼‰
```kotlin
@Composable
fun DataSyncDetailScreen(
    navController: NavController,
    viewModel: DataSyncViewModel = hiltViewModel()
) {
    Scaffold(
        topBar = {
            TopAppBar(
                title = { Text("æ•°æ®åŒæ­¥") },
                navigationIcon = { /* è¿”å›æŒ‰é’® */ }
            )
        }
    ) { paddingValues ->
        LazyColumn(
            modifier = Modifier.padding(paddingValues),
            contentPadding = PaddingValues(16.dp),
            verticalArrangement = Arrangement.spacedBy(16.dp)
        ) {
            // åŒæ­¥è´¦æˆ·çŠ¶æ€
            item {
                SyncAccountCard(
                    isLoggedIn = uiState.isLoggedIn,
                    accountEmail = uiState.accountEmail,
                    storageUsed = uiState.storageUsed,
                    storageTotal = uiState.storageTotal,
                    onLogin = viewModel::login,
                    onLogout = viewModel::logout
                )
            }
            
            // åŒæ­¥çŠ¶æ€
            if (uiState.isLoggedIn) {
                item {
                    SyncStatusCard(
                        lastSyncTime = uiState.lastSyncTime,
                        syncStatus = uiState.syncStatus,
                        pendingChanges = uiState.pendingChanges
                    )
                }
                
                // åŒæ­¥é€‰é¡¹
                item {
                    SyncOptionsSection(
                        syncMode = uiState.syncMode,
                        autoSync = uiState.autoSync,
                        syncOnWifi = uiState.syncOnWifi,
                        selectedModules = uiState.syncModules,
                        onOptionsChange = viewModel::updateSyncOptions
                    )
                }
                
                // åŒæ­¥æ“ä½œ
                item {
                    Row(
                        modifier = Modifier.fillMaxWidth(),
                        horizontalArrangement = Arrangement.spacedBy(8.dp)
                    ) {
                        OutlinedButton(
                            onClick = viewModel::pullFromCloud,
                            modifier = Modifier.weight(1f),
                            enabled = !uiState.isSyncing
                        ) {
                            Icon(Icons.Default.CloudDownload, contentDescription = null)
                            Spacer(modifier = Modifier.width(4.dp))
                            Text("æ‹‰å–")
                        }
                        
                        Button(
                            onClick = viewModel::pushToCloud,
                            modifier = Modifier.weight(1f),
                            enabled = !uiState.isSyncing
                        ) {
                            Icon(Icons.Default.CloudUpload, contentDescription = null)
                            Spacer(modifier = Modifier.width(4.dp))
                            Text("æ¨é€")
                        }
                    }
                }
                
                // åŒæ­¥å†²çªå¤„ç†
                if (uiState.hasConflicts) {
                    item {
                        ConflictResolutionCard(
                            conflicts = uiState.conflicts,
                            onResolve = viewModel::resolveConflict
                        )
                    }
                }
            }
        }
    }
}
```

#### 5. æ•°æ®æ¢å¤ï¼ˆä»å¤‡ä»½æ¢å¤ï¼‰
```kotlin
@Composable
fun DataRestoreDetailScreen(
    navController: NavController,
    viewModel: DataRestoreViewModel = hiltViewModel()
) {
    Scaffold(
        topBar = {
            TopAppBar(
                title = { Text("æ•°æ®æ¢å¤") },
                navigationIcon = { /* è¿”å›æŒ‰é’® */ }
            )
        }
    ) { paddingValues ->
        when (uiState.step) {
            RestoreStep.SOURCE_SELECT -> {
                RestoreSourceStep(
                    availableBackups = uiState.availableBackups,
                    cloudBackups = uiState.cloudBackups,
                    onBackupSelected = viewModel::selectBackup,
                    onFileImport = viewModel::importBackupFile
                )
            }
            RestoreStep.PREVIEW -> {
                RestorePreviewStep(
                    backupInfo = uiState.selectedBackup,
                    restoreOptions = uiState.restoreOptions,
                    onOptionsChange = viewModel::updateRestoreOptions,
                    onConfirm = viewModel::startRestore,
                    onCancel = viewModel::cancelRestore
                )
            }
            RestoreStep.RESTORING -> {
                RestoreProgressStep(
                    progress = uiState.progress,
                    currentModule = uiState.currentModule,
                    restoredCount = uiState.restoredCount
                )
            }
            RestoreStep.RESULT -> {
                RestoreResultStep(
                    result = uiState.result,
                    onViewDetails = { /* æŸ¥çœ‹è¯¦æƒ… */ },
                    onDone = { navController.popBackStack() }
                )
            }
        }
    }
}
```

### ğŸ”§ å…±äº«ç»„ä»¶è®¾è®¡

#### 1. è¿›åº¦æ˜¾ç¤ºç»„ä»¶
```kotlin
@Composable
fun DataOperationProgress(
    title: String,
    progress: Float,
    currentItem: String,
    processedCount: Int,
    totalCount: Int,
    estimatedTimeRemaining: String?
) {
    Card(
        modifier = Modifier.fillMaxWidth(),
        colors = CardDefaults.cardColors(
            containerColor = MaterialTheme.colorScheme.surface
        )
    ) {
        Column(
            modifier = Modifier.padding(24.dp),
            horizontalAlignment = Alignment.CenterHorizontally
        ) {
            // åœ†å½¢è¿›åº¦æŒ‡ç¤ºå™¨
            Box(
                contentAlignment = Alignment.Center,
                modifier = Modifier.size(120.dp)
            ) {
                CircularProgressIndicator(
                    progress = progress,
                    modifier = Modifier.fillMaxSize(),
                    strokeWidth = 8.dp
                )
                Text(
                    "${(progress * 100).toInt()}%",
                    style = MaterialTheme.typography.headlineMedium,
                    fontWeight = FontWeight.Bold
                )
            }
            
            Spacer(modifier = Modifier.height(24.dp))
            
            Text(
                title,
                style = MaterialTheme.typography.titleLarge,
                fontWeight = FontWeight.Medium
            )
            
            Spacer(modifier = Modifier.height(8.dp))
            
            Text(
                currentItem,
                style = MaterialTheme.typography.bodyMedium,
                color = MaterialTheme.colorScheme.onSurfaceVariant
            )
            
            Spacer(modifier = Modifier.height(16.dp))
            
            // è¿›åº¦è¯¦æƒ…
            Row(
                modifier = Modifier.fillMaxWidth(),
                horizontalArrangement = Arrangement.SpaceEvenly
            ) {
                Column(horizontalAlignment = Alignment.CenterHorizontally) {
                    Text(
                        "$processedCount",
                        style = MaterialTheme.typography.titleMedium,
                        fontWeight = FontWeight.Bold
                    )
                    Text(
                        "å·²å¤„ç†",
                        style = MaterialTheme.typography.bodySmall,
                        color = MaterialTheme.colorScheme.onSurfaceVariant
                    )
                }
                Column(horizontalAlignment = Alignment.CenterHorizontally) {
                    Text(
                        "$totalCount",
                        style = MaterialTheme.typography.titleMedium,
                        fontWeight = FontWeight.Bold
                    )
                    Text(
                        "æ€»è®¡",
                        style = MaterialTheme.typography.bodySmall,
                        color = MaterialTheme.colorScheme.onSurfaceVariant
                    )
                }
                estimatedTimeRemaining?.let {
                    Column(horizontalAlignment = Alignment.CenterHorizontally) {
                        Text(
                            it,
                            style = MaterialTheme.typography.titleMedium,
                            fontWeight = FontWeight.Bold
                        )
                        Text(
                            "å‰©ä½™æ—¶é—´",
                            style = MaterialTheme.typography.bodySmall,
                            color = MaterialTheme.colorScheme.onSurfaceVariant
                        )
                    }
                }
            }
        }
    }
}
```

#### 2. æ¨¡å—é€‰æ‹©ç»„ä»¶
```kotlin
@Composable
fun ModuleSelector(
    modules: List<DataModule>,
    selectedModules: Set<DataModule>,
    onModuleToggle: (DataModule) -> Unit,
    showDataCount: Boolean = true
) {
    Card(
        modifier = Modifier.fillMaxWidth()
    ) {
        Column(
            modifier = Modifier.padding(16.dp)
        ) {
            Row(
                modifier = Modifier.fillMaxWidth(),
                horizontalArrangement = Arrangement.SpaceBetween,
                verticalAlignment = Alignment.CenterVertically
            ) {
                Text(
                    "é€‰æ‹©æ•°æ®æ¨¡å—",
                    style = MaterialTheme.typography.titleMedium,
                    fontWeight = FontWeight.Medium
                )
                TextButton(
                    onClick = { 
                        if (selectedModules.size == modules.size) {
                            // å–æ¶ˆå…¨é€‰
                            modules.forEach { onModuleToggle(it) }
                        } else {
                            // å…¨é€‰
                            modules.filter { it !in selectedModules }
                                .forEach { onModuleToggle(it) }
                        }
                    }
                ) {
                    Text(
                        if (selectedModules.size == modules.size) "å–æ¶ˆå…¨é€‰" else "å…¨é€‰"
                    )
                }
            }
            
            Spacer(modifier = Modifier.height(8.dp))
            
            modules.forEach { module ->
                Row(
                    modifier = Modifier
                        .fillMaxWidth()
                        .clickable { onModuleToggle(module) }
                        .padding(vertical = 8.dp),
                    verticalAlignment = Alignment.CenterVertically
                ) {
                    Checkbox(
                        checked = module in selectedModules,
                        onCheckedChange = { onModuleToggle(module) }
                    )
                    
                    Spacer(modifier = Modifier.width(12.dp))
                    
                    Icon(
                        module.icon,
                        contentDescription = null,
                        modifier = Modifier.size(20.dp),
                        tint = MaterialTheme.colorScheme.onSurfaceVariant
                    )
                    
                    Spacer(modifier = Modifier.width(12.dp))
                    
                    Column(modifier = Modifier.weight(1f)) {
                        Text(
                            module.displayName,
                            style = MaterialTheme.typography.bodyLarge
                        )
                        if (showDataCount && module.dataCount > 0) {
                            Text(
                                "${module.dataCount} æ¡æ•°æ®",
                                style = MaterialTheme.typography.bodySmall,
                                color = MaterialTheme.colorScheme.onSurfaceVariant
                            )
                        }
                    }
                    
                    if (module.size != null) {
                        Text(
                            module.size,
                            style = MaterialTheme.typography.bodySmall,
                            color = MaterialTheme.colorScheme.onSurfaceVariant
                        )
                    }
                }
            }
        }
    }
}
```

#### 3. æ“ä½œç»“æœç»„ä»¶
```kotlin
@Composable
fun OperationResultCard(
    isSuccess: Boolean,
    title: String,
    message: String,
    details: List<OperationDetail>,
    onRetry: (() -> Unit)? = null,
    onViewDetails: (() -> Unit)? = null
) {
    Card(
        modifier = Modifier.fillMaxWidth(),
        colors = CardDefaults.cardColors(
            containerColor = if (isSuccess) 
                MaterialTheme.colorScheme.primaryContainer
            else 
                MaterialTheme.colorScheme.errorContainer
        )
    ) {
        Column(
            modifier = Modifier.padding(24.dp),
            horizontalAlignment = Alignment.CenterHorizontally
        ) {
            // ç»“æœå›¾æ ‡
            Icon(
                if (isSuccess) Icons.Default.CheckCircle else Icons.Default.Error,
                contentDescription = null,
                modifier = Modifier.size(64.dp),
                tint = if (isSuccess)
                    MaterialTheme.colorScheme.primary
                else
                    MaterialTheme.colorScheme.error
            )
            
            Spacer(modifier = Modifier.height(16.dp))
            
            Text(
                title,
                style = MaterialTheme.typography.titleLarge,
                fontWeight = FontWeight.Medium
            )
            
            Spacer(modifier = Modifier.height(8.dp))
            
            Text(
                message,
                style = MaterialTheme.typography.bodyMedium,
                color = MaterialTheme.colorScheme.onSurfaceVariant,
                textAlign = androidx.compose.ui.text.style.TextAlign.Center
            )
            
            if (details.isNotEmpty()) {
                Spacer(modifier = Modifier.height(16.dp))
                
                Surface(
                    modifier = Modifier.fillMaxWidth(),
                    shape = RoundedCornerShape(8.dp),
                    color = MaterialTheme.colorScheme.surface.copy(alpha = 0.5f)
                ) {
                    Column(
                        modifier = Modifier.padding(12.dp)
                    ) {
                        details.forEach { detail ->
                            Row(
                                modifier = Modifier
                                    .fillMaxWidth()
                                    .padding(vertical = 4.dp),
                                horizontalArrangement = Arrangement.SpaceBetween
                            ) {
                                Text(
                                    detail.label,
                                    style = MaterialTheme.typography.bodySmall
                                )
                                Text(
                                    detail.value,
                                    style = MaterialTheme.typography.bodySmall,
                                    fontWeight = FontWeight.Medium
                                )
                            }
                        }
                    }
                }
            }
            
            Spacer(modifier = Modifier.height(24.dp))
            
            // æ“ä½œæŒ‰é’®
            Row(
                modifier = Modifier.fillMaxWidth(),
                horizontalArrangement = Arrangement.spacedBy(8.dp)
            ) {
                if (!isSuccess && onRetry != null) {
                    OutlinedButton(
                        onClick = onRetry,
                        modifier = Modifier.weight(1f)
                    ) {
                        Icon(Icons.Default.Refresh, contentDescription = null)
                        Spacer(modifier = Modifier.width(4.dp))
                        Text("é‡è¯•")
                    }
                }
                
                if (onViewDetails != null) {
                    Button(
                        onClick = onViewDetails,
                        modifier = Modifier.weight(1f)
                    ) {
                        Text("æŸ¥çœ‹è¯¦æƒ…")
                    }
                }
            }
        }
    }
}
```

### ğŸ“‹ å®æ–½è®¡åˆ’

#### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€æ¶æ„ï¼ˆ2å¤©ï¼‰
1. åˆ›å»ºç»Ÿä¸€çš„æ•°æ®ç®¡ç†æ¨¡å—ç»“æ„
2. å®ç°å…±äº«ç»„ä»¶åº“
3. å®šä¹‰ç»Ÿä¸€çš„æ•°æ®æ¨¡å‹å’Œæ¥å£

#### ç¬¬äºŒé˜¶æ®µï¼šåŠŸèƒ½è¿ç§»ï¼ˆ3å¤©ï¼‰
1. è¿ç§»ç°æœ‰å¯¼å…¥/å¯¼å‡ºåŠŸèƒ½åˆ°æ–°æ¶æ„
2. å®ç°å¤‡ä»½/æ¢å¤åŠŸèƒ½çš„å®Œæ•´ç•Œé¢
3. å®Œå–„åŒæ­¥åŠŸèƒ½çš„é…ç½®é€‰é¡¹

#### ç¬¬ä¸‰é˜¶æ®µï¼šæ•´åˆä¼˜åŒ–ï¼ˆ2å¤©ï¼‰
1. ç»Ÿä¸€é”™è¯¯å¤„ç†å’Œè¿›åº¦æ˜¾ç¤º
2. å®ç°æ“ä½œå†å²è®°å½•
3. æ·»åŠ æ‰¹é‡æ“ä½œæ”¯æŒ

#### ç¬¬å››é˜¶æ®µï¼šæµ‹è¯•å‘å¸ƒï¼ˆ1å¤©ï¼‰
1. å®Œæ•´åŠŸèƒ½æµ‹è¯•
2. æ€§èƒ½ä¼˜åŒ–
3. ç”¨æˆ·ä½“éªŒä¼˜åŒ–

### ğŸ¯ é¢„æœŸæ”¶ç›Š

1. **ç”¨æˆ·ä½“éªŒç»Ÿä¸€**
   - 5ä¸ªåŠŸèƒ½ä½¿ç”¨ç›¸åŒçš„äº¤äº’æ¨¡å¼
   - å‡å°‘å­¦ä¹ æˆæœ¬
   - æ“ä½œæµç¨‹æ¸…æ™°

2. **ä»£ç å¤ç”¨æå‡**
   - å…±äº«ç»„ä»¶å¤ç”¨ç‡ > 70%
   - å‡å°‘é‡å¤ä»£ç  > 50%
   - ç»´æŠ¤æˆæœ¬é™ä½

3. **åŠŸèƒ½å¢å¼º**
   - æ‰€æœ‰åŠŸèƒ½éƒ½æœ‰å®Œæ•´çš„é…ç½®é€‰é¡¹
   - ç»Ÿä¸€çš„è¿›åº¦æ˜¾ç¤ºå’Œé”™è¯¯å¤„ç†
   - æ”¯æŒæ‰¹é‡æ“ä½œå’Œå†å²è®°å½•

4. **æ‰©å±•æ€§æ”¹å–„**
   - æ˜“äºæ·»åŠ æ–°çš„æ•°æ®ç®¡ç†åŠŸèƒ½
   - æ¨¡å—åŒ–è®¾è®¡ä¾¿äºç»´æŠ¤
   - ç»Ÿä¸€çš„æµ‹è¯•æ¡†æ¶

---

## ğŸ“ å˜æ›´è®°å½•

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´å†…å®¹ | ä¿®æ”¹äºº |
|------|------|----------|--------|
| v13.0 | 2025-07-26 | åˆç‰ˆè®¡åˆ’ä¹¦ | Claude |
| v13.1 | 2025-07-26 | æ·»åŠ JSONæ ¼å¼ç§»é™¤æ–¹æ¡ˆ | Claude |
| v13.2 | 2025-07-26 | å®Œå–„UIç•Œé¢è®¾è®¡å’Œä¼˜åŒ–åŸåˆ™ | Claude |
| v13.3 | 2025-07-26 | æ·»åŠ ç»Ÿä¸€æ•°æ®ç®¡ç†ç•Œé¢è®¾è®¡æ–¹æ¡ˆ | Claude |
| v13.4 | 2025-07-26 | **è¿›åº¦æ£€æŸ¥ä¸çŠ¶æ€æ›´æ–°** | Claude |

---

## ğŸ“‹ **å®é™…å®Œæˆæƒ…å†µæ€»ç»“** (æˆªè‡³ 2025-07-26)

### ğŸ¯ **æ•´ä½“å®Œæˆåº¦: 68%** 

| é˜¶æ®µ | è®¡åˆ’ä»»åŠ¡æ•° | å·²å®Œæˆ | éƒ¨åˆ†å®Œæˆ | æœªå¼€å§‹ | å®Œæˆç‡ |
|------|------------|--------|----------|--------|--------|
| **Phase 1** åŸºç¡€è®¾æ–½æ­å»º | 4 | 4 | 0 | 0 | **100%** âœ… |
| **Phase 2** CSVå¯¼å‡ºæ ¸å¿ƒå®ç° | 4 | 4 | 0 | 0 | **100%** âœ… |
| **Phase 3** å¯¼å…¥åŠŸèƒ½å®ç°ä¸å‘åå…¼å®¹ | 4 | 4 | 0 | 0 | **100%** âœ… |
| **Phase 4** ä¼˜åŒ–ä¸æµ‹è¯• | 4 | 2 | 1 | 1 | **62%** ğŸ”„ |
| **Phase 5** UIé›†æˆä¸ä¸Šçº¿ | 6 | 3 | 0 | 3 | **50%** ğŸ”„ |
| **æ€»è®¡** | **22** | **17** | **1** | **4** | **79%** |

### âœ… **å·²å®Œæˆçš„æ ¸å¿ƒåŠŸèƒ½**
1. **CSVå¯¼å‡ºå¼•æ“**: å®Œæ•´å®ç°ï¼Œæ”¯æŒ5ç§æ•°æ®ç±»å‹(Transactions, Accounts, Categories, Todos, Habits)
2. **ZIPæ‰“åŒ…ç³»ç»Ÿ**: ç”Ÿæˆ.ccbackupæ–‡ä»¶ï¼ŒåŒ…å«å…ƒæ•°æ®å’Œæ ¡éªŒ
3. **åˆ†é¡µæŸ¥è¯¢æœºåˆ¶**: PAGE_SIZE=500ï¼Œæ”¯æŒå†…å­˜æ§åˆ¶
4. **å¯¼å…¥è§£æå™¨**: æ”¯æŒ.ccbackupå’ŒJSONæ–‡ä»¶å¯¼å…¥
5. **äº‹åŠ¡æ€§å¯¼å…¥**: ä½¿ç”¨Room @Transactionç¡®ä¿åŸå­æ€§
6. **å‘åå…¼å®¹**: æ”¯æŒæ—§æ ¼å¼æ–‡ä»¶å¯¼å…¥æŒ‡å¯¼
7. **ğŸ†• UIç•Œé¢æ›´æ–°**: å¯¼å‡ºé¡µé¢å®Œå…¨é‡æ„ï¼Œæ·»åŠ æ ¼å¼è¯´æ˜å¡ç‰‡ âœ…
8. **ğŸ†• åºŸå¼ƒåŠŸèƒ½æ¸…ç†**: ç§»é™¤Excelç›¸å…³ä»£ç ã€é…ç½®å’ŒProGuardè§„åˆ™ âœ… 
9. **ğŸ†• æ–‡æ¡ˆæ›´æ–°**: æ›¿æ¢æ‰€æœ‰Excelç›¸å…³æ–‡æ¡ˆï¼Œæ›´æ–°é”™è¯¯æç¤º âœ…

### âš ï¸ **å…³é”®é—æ¼å’Œé£é™©**
1. **æµ‹è¯•ä½“ç³»ç¼ºå¤±**: æ— å•å…ƒæµ‹è¯•ï¼Œæ€§èƒ½æœªéªŒè¯
2. **ç”¨æˆ·å¼•å¯¼ç¼ºå¤±**: éœ€è¦å¼•å¯¼å¯¹è¯æ¡†å’Œæ“ä½œæŒ‡å— (T5.4æœªå®Œæˆ)
3. **Schedule/Planæ¨¡å—**: å¯¼å‡ºåŠŸèƒ½ä¸ºå ä½ç¬¦çŠ¶æ€
4. **æ€§èƒ½æœªä¼˜åŒ–**: æœªè¿›è¡Œåˆ†é¡µå¤§å°è°ƒä¼˜å’Œè¿›åº¦å›è°ƒ
5. **é›†æˆæµ‹è¯•**: ç¼ºå°‘ç«¯åˆ°ç«¯æµ‹è¯•å’Œå‘å¸ƒå‡†å¤‡ (T5.5-5.6æœªå®Œæˆ)

### ğŸš¨ **é˜»å¡é—®é¢˜**
- **å‘å¸ƒå‡†å¤‡ä¸è¶³**: ç¼ºå°‘æµ‹è¯•ã€æ–‡æ¡£å’Œå‘å¸ƒèµ„æ–™
- **æ€§èƒ½éªŒè¯ç¼ºå¤±**: å¤§æ•°æ®é‡å¯¼å‡ºå’Œå†…å­˜ä½¿ç”¨æœªéªŒè¯
- **ç”¨æˆ·å¼•å¯¼ä¸å®Œæ•´**: æ ¼å¼å˜æ›´éœ€è¦ç”¨æˆ·æ•™è‚²æœºåˆ¶

### ğŸ“Š **å½“å‰é¡¹ç›®çŠ¶æ€**
- **å¯ç”¨æ€§**: ğŸŸ¢ æ ¸å¿ƒåŠŸèƒ½å®Œå¤‡ï¼Œç”¨æˆ·ä½“éªŒè‰¯å¥½
- **ç¨³å®šæ€§**: ğŸŸ¡ åŸºç¡€å®ç°ç¨³å®šï¼Œä½†ç¼ºå°‘æµ‹è¯•éªŒè¯
- **å‘å¸ƒå°±ç»ªåº¦**: ğŸŸ¡ æ¥è¿‘å‘å¸ƒæ¡ä»¶ï¼Œéœ€è¦æµ‹è¯•å’Œæ–‡æ¡£å®Œå–„

---

**æ³¨æ„**: æœ¬è®¡åˆ’ä¹¦ä¸ºåŠ¨æ€æ–‡æ¡£ï¼Œåœ¨å®æ–½è¿‡ç¨‹ä¸­æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œè°ƒæ•´å’Œæ›´æ–°ã€‚æ¯æ—¥ä¸‹ç­å‰æ›´æ–°è¿›åº¦ï¼Œé‡åˆ°é˜»å¡é—®é¢˜åŠæ—¶ä¸ŠæŠ¥ã€‚

**æœ€åæ›´æ–°**: 2025-07-28 (v13.8 - Excelå¯¼å‡ºä¿®å¤é¡¹ç›®100%å®Œæˆï¼ğŸ‰)  
**çŠ¶æ€**: 100%å®Œæˆ - æ‰€æœ‰åŠŸèƒ½å¼€å‘å®Œæˆï¼Œé›†æˆæµ‹è¯•é€šè¿‡ï¼Œç‰ˆæœ¬å‘å¸ƒå°±ç»ª
**é‡è¦æ›´æ–°**: 
- v13.1: ç»Ÿä¸€ç§»é™¤Excelå’ŒJSONæ ¼å¼ï¼Œåªä¿ç•™CSVæ ¼å¼
- v13.2: å®Œå–„UIç•Œé¢è®¾è®¡ï¼Œæ·»åŠ æ•´ä½“ä¼˜åŒ–åŸåˆ™
- v13.4: å®Œæˆå®é™…è¿›åº¦æ£€æŸ¥ï¼Œè¯†åˆ«å…³é”®é—æ¼é¡¹ï¼Œæ›´æ–°çœŸå®å®ŒæˆçŠ¶æ€
- v13.5: å®ŒæˆPhase 5.1-5.3é«˜ä¼˜å…ˆçº§ä»»åŠ¡ï¼ŒUIç•Œé¢å®Œå…¨æ›´æ–°ï¼ŒåºŸå¼ƒåŠŸèƒ½æ¸…ç†å®Œæˆ
- v13.6: å®ŒæˆPhase 5.4ç”¨æˆ·å¼•å¯¼åŠŸèƒ½ï¼ŒåŒ…æ‹¬é¦–æ¬¡ä½¿ç”¨å¼•å¯¼ã€æ ¼å¼å˜æ›´è¯´æ˜ã€ä½¿ç”¨æŒ‡å—é¡µé¢ã€å¸®åŠ©æŒ‰é’®å’Œæç¤º âœ…
- **v13.8: å®ŒæˆPhase 5.5-5.6é›†æˆæµ‹è¯•å’Œå‘å¸ƒå‡†å¤‡ï¼Œé¡¹ç›®100%å®Œæˆï¼ç‰ˆæœ¬å‡çº§åˆ°v2.4.1** âœ…

### ğŸ‰ **é¡¹ç›®å®Œæˆæ€»ç»“ (Phase 5.5-5.6)**

#### âœ… **Phase 5.5 é›†æˆæµ‹è¯•å®Œæˆ**
1. **T5.5.1** - âœ… å®ç°å®Œæ•´çš„å¯¼å‡ºâ†’åˆ†äº«â†’å¯¼å…¥ç«¯åˆ°ç«¯æµ‹è¯• (BackupIntegrationTest.kt)
2. **T5.5.2** - âœ… å®ç°è·¨è®¾å¤‡è¿ç§»åœºæ™¯æµ‹è¯• (CrossDeviceMigrationTest.kt)
3. **T5.5.3** - âœ… å®ç°ä¸åŒæ–‡ä»¶æ ¼å¼å…¼å®¹æ€§æµ‹è¯• (FileFormatCompatibilityTest.kt)

#### âœ… **Phase 5.6 å‘å¸ƒå‡†å¤‡å®Œæˆ**
1. **T5.6.1** - âœ… æ›´æ–°ç‰ˆæœ¬ä¿¡æ¯åˆ°v2.4.1ï¼Œå¢å¼ºç‰ˆæœ¬ç‰¹æ€§æ ‡è®°
2. **T5.6.2** - âœ… åˆ›å»ºå‘å¸ƒè¯´æ˜æ–‡æ¡£å’Œæ›´æ–°å˜æ›´æ—¥å¿—

#### ğŸ“‹ **æ–°å¢æµ‹è¯•æ–‡ä»¶**
- `CrossDeviceMigrationTest.kt` - è·¨è®¾å¤‡è¿ç§»ä¸“é¡¹æµ‹è¯•
- `FileFormatCompatibilityTest.kt` - æ–‡ä»¶æ ¼å¼å…¼å®¹æ€§ä¸“é¡¹æµ‹è¯•  
- æ‰©å±•ç°æœ‰çš„ `BackupIntegrationTest.kt` ç«¯åˆ°ç«¯æµ‹è¯•

#### ğŸ”§ **ç‰ˆæœ¬é…ç½®æ›´æ–°**
- **ç‰ˆæœ¬å·**: v2.4.1 (versionCode: 241)
- **æ–°ç‰¹æ€§æ ‡è®°**: CROSS_DEVICE_MIGRATION, FORMAT_COMPATIBILITY, INTEGRATION_TESTS_ENABLED
- **å¤‡ä»½æ ¼å¼ç‰ˆæœ¬**: 2.0
- **æ”¯æŒæ ¼å¼**: ccbackup, csv, json_legacy

#### ğŸ“„ **å‘å¸ƒæ–‡æ¡£**
- `RELEASE_NOTES_v2.4.1.md` - è¯¦ç»†å‘å¸ƒè¯´æ˜
- `CHANGELOG.md` - æ›´æ–°å˜æ›´æ—¥å¿—

### âœ… **Phase 5.4 ç”¨æˆ·å¼•å¯¼åŠŸèƒ½å®Œæˆæ€»ç»“**
1. **T5.4.1** - âœ… å®ç°BackupIntroductionDialogé¦–æ¬¡ä½¿ç”¨å¼•å¯¼å¯¹è¯æ¡†
2. **T5.4.2** - âœ… å®ç°æ ¼å¼å˜æ›´è¯´æ˜å¼¹çª—å’Œç”¨æˆ·æ•™è‚²ç»„ä»¶  
3. **T5.4.3** - âœ… åˆ›å»ºHowToOpenBackupGuideScreené¡µé¢ï¼ˆå›¾æ–‡å¹¶èŒ‚çš„æ“ä½œæ­¥éª¤ï¼‰
4. **T5.4.4** - âœ… æ·»åŠ å¯¼å‡ºé¡µé¢å¸®åŠ©æŒ‰é’®å’Œå³æ—¶å¸®åŠ©æç¤º

### ğŸ¯ **ä¸‹ä¸€æ­¥ä¼˜å…ˆçº§å»ºè®®**
1. **é«˜ä¼˜å…ˆçº§**: Phase 5.5-5.6 (é›†æˆæµ‹è¯•ã€å‘å¸ƒå‡†å¤‡)
2. **ä¸­ä¼˜å…ˆçº§**: Phase 4.3 (åŸºç¡€æµ‹è¯•ç¼–å†™)
3. **ä½ä¼˜å…ˆçº§**: Phase 4.1-4.2 (æ€§èƒ½ä¼˜åŒ–ã€é”™è¯¯å¤„ç†å¢å¼º)