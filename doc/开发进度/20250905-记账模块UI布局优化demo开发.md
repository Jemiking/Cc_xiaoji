# è®°è´¦æ¨¡å—UIå¸ƒå±€ä¼˜åŒ–Demoå¼€å‘è§„èŒƒ

> ğŸ“… åˆ›å»ºæ—¥æœŸï¼š2025-09-05  
> ğŸ¯ ç›®æ ‡ï¼šç»Ÿä¸€è®°è´¦æ¨¡å—Demoçš„UIé£æ ¼ï¼Œç¡®ä¿æ‰€æœ‰é¡µé¢å…·æœ‰ä¸€è‡´çš„è§†è§‰ä½“éªŒ  
> ğŸ“ ä½ç½®ï¼š`feature/ledger/src/main/kotlin/.../demo/unified/`

## ä¸€ã€é¡¹ç›®èƒŒæ™¯

### 1.1 ç°çŠ¶åˆ†æ
- **å·²å®Œæˆ**ï¼šäº¤æ˜“åˆ—è¡¨å’Œæ·»åŠ äº¤æ˜“é¡µé¢å·²ä¼˜åŒ–ï¼ˆOptimizedTransactionListPageã€OptimizedAddTransactionPageï¼‰
- **å¾…ä¼˜åŒ–**ï¼šè´¦æˆ·ã€åˆ†ç±»ã€ç»Ÿè®¡ã€è®¾ç½®ç­‰é¡µé¢ä»ä½¿ç”¨åŸºç¡€å®ç°
- **æ ¸å¿ƒé—®é¢˜**ï¼šé¡µé¢é—´è§†è§‰é£æ ¼ä¸ç»Ÿä¸€ï¼Œç¼ºå°‘ä¸€è‡´çš„äº¤äº’ä½“éªŒ

### 1.2 è®¾è®¡ç›®æ ‡
- å»ºç«‹ç»Ÿä¸€çš„è§†è§‰è¯­è¨€å’Œäº¤äº’æ¨¡å¼
- æ”¯æŒåŒé£æ ¼åˆ‡æ¢ï¼ˆBALANCEDå¹³è¡¡é£æ ¼ / HIERARCHICALå±‚æ¬¡é£æ ¼ï¼‰
- æä¾›æµç•…çš„åŠ¨ç”»è¿‡æ¸¡æ•ˆæœ
- ç¡®ä¿æ‰€æœ‰é¡µé¢éµå¾ªç›¸åŒçš„è®¾è®¡è§„èŒƒ

## äºŒã€æ ¸å¿ƒè®¾è®¡åŸåˆ™

### 2.1 è®¾è®¡ç†å¿µ
- **ä¸€è‡´æ€§**ï¼šæ‰€æœ‰é¡µé¢ä½¿ç”¨ç›¸åŒçš„è®¾è®¡è¯­è¨€
- **å±‚æ¬¡æ„Ÿ**ï¼šé€šè¿‡é—´è·ã€é¢œè‰²ã€å¤§å°å»ºç«‹è§†è§‰å±‚æ¬¡
- **å“åº”æ€§**ï¼šåŠæ—¶çš„è§†è§‰åé¦ˆå’ŒçŠ¶æ€å˜åŒ–
- **ç®€æ´æ€§**ï¼šå‡å°‘è§†è§‰å™ªéŸ³ï¼Œçªå‡ºæ ¸å¿ƒåŠŸèƒ½

### 2.2 é£æ ¼ç³»ç»Ÿ
å¤ç”¨ç°æœ‰é¢†åŸŸæ¨¡å‹ï¼Œé¿å…é‡å¤å®šä¹‰ï¼š
```kotlin
// å¼•ç”¨è‡ªï¼šfeature/ledger/src/.../domain/model/LedgerUIPreferences.kt:21
enum class LedgerUIStyle {
    BALANCED,      // å¹³è¡¡é£æ ¼ï¼šä¸°å¯Œçš„è§†è§‰å…ƒç´ ã€æ¸å˜èƒŒæ™¯ã€emojiå›¾æ ‡
    HIERARCHICAL   // å±‚æ¬¡é£æ ¼ï¼šæç®€è®¾è®¡ã€çº¯è‰²èƒŒæ™¯ã€çº¿æ¡å›¾æ ‡
}
```

## ä¸‰ã€è§†è§‰è§„èŒƒ

### 3.1 é¢œè‰²ç³»ç»Ÿ

å¼•ç”¨ç»Ÿä¸€çš„è®¾è®¡ä»¤ç‰Œï¼Œé¿å…åŒå¤„ç»´æŠ¤ï¼š
```kotlin
// å¼•ç”¨è‡ªï¼šcore/ui/src/main/kotlin/com/ccxiaoji/ui/theme/DesignTokens.kt
object BrandColors {
    val Ledger = Color(0xFF66BB6A)     // ä¸»è‰²-æŸ”å’Œç»¿
    val Primary = Color(0xFF4A90E2)    // ä¸»é¢˜è“
    val Secondary = Color(0xFF9C27B0)  // è¾…åŠ©ç´«
    
    // è¯­ä¹‰è‰²
    val Success = Color(0xFF66BB6A)    // æˆåŠŸ/æ”¶å…¥
    val Error = Color(0xFFEF5350)      // é”™è¯¯/æ”¯å‡º
    val Warning = Color(0xFFFFA726)    // è­¦å‘Š
    val Info = Color(0xFF42A5F5)       // ä¿¡æ¯
}
```

#### ä½¿ç”¨è§„åˆ™
- **æ”¶å…¥ç›¸å…³**ï¼šå§‹ç»ˆä½¿ç”¨ Success ç»¿è‰²
- **æ”¯å‡ºç›¸å…³**ï¼šå§‹ç»ˆä½¿ç”¨ Error çº¢è‰²
- **ä¸»è¦æ“ä½œ**ï¼šä½¿ç”¨ Ledger å“ç‰Œè‰²
- **æ¬¡è¦ä¿¡æ¯**ï¼šä½¿ç”¨ onSurfaceVariant ç°è‰²

### 3.2 é—´è·ç³»ç»Ÿ
```kotlin
// å¼•ç”¨è‡ªï¼šcore/ui/src/main/kotlin/com/ccxiaoji/ui/theme/DesignTokens.kt
object DesignTokens.Spacing {
    val xs = 4.dp      // æå°é—´è·
    val small = 8.dp   // å°é—´è·
    val medium = 16.dp // ä¸­ç­‰é—´è·ï¼ˆæ ‡å‡†ï¼‰
    val large = 24.dp  // å¤§é—´è·
    val xl = 32.dp     // ç‰¹å¤§é—´è·
}
```

#### ä½¿ç”¨è§„åˆ™
- **é¡µé¢è¾¹è·**ï¼š`DesignTokens.Spacing.medium`
- **å¡ç‰‡å†…è¾¹è·**ï¼š`DesignTokens.Spacing.medium`
- **åˆ—è¡¨é¡¹é—´è·**ï¼š`DesignTokens.Spacing.small`
- **ç»„ä»¶å†…éƒ¨é—´è·**ï¼š`DesignTokens.Spacing.small` æˆ– `xs`

### 3.3 åœ†è§’ç³»ç»Ÿ
```kotlin
// å¼•ç”¨è‡ªï¼šcore/ui/src/main/kotlin/com/ccxiaoji/ui/theme/DesignTokens.kt
object DesignTokens.BorderRadius {
    val small = 4.dp   // å°åœ†è§’ï¼ˆæŒ‰é’®ã€èŠ¯ç‰‡ï¼‰
    val medium = 8.dp  // ä¸­åœ†è§’ï¼ˆå¡ç‰‡ã€è¾“å…¥æ¡†ï¼‰
    val large = 12.dp  // å¤§åœ†è§’ï¼ˆåº•éƒ¨å¼¹çª—ã€ç‰¹æ®Šå¡ç‰‡ï¼‰
    val xl = 16.dp     // ç‰¹å¤§åœ†è§’ï¼ˆå…¨å±å¼¹çª—ï¼‰
}
```

### 3.4 é˜´å½±ç³»ç»Ÿ
```kotlin
// å¼•ç”¨è‡ªï¼šcore/ui/src/main/kotlin/com/ccxiaoji/ui/theme/DesignTokens.kt
object DesignTokens.Elevation {
    val flat = 0.dp    // æ‰å¹³ï¼ˆæ— é˜´å½±ï¼‰
    val low = 1.dp     // ä½é˜´å½±ï¼ˆå¡ç‰‡ï¼‰
    val medium = 2.dp  // ä¸­é˜´å½±ï¼ˆæµ®åŠ¨å…ƒç´ ï¼‰
    val high = 4.dp    // é«˜é˜´å½±ï¼ˆå¼¹çª—ã€FABï¼‰
}
```

## å››ã€ç»„ä»¶è§„èŒƒ

### 4.1 å¿…é¡»ä½¿ç”¨çš„ç»Ÿä¸€ç»„ä»¶

#### æ•°æ®æ¦‚è§ˆæ  - UnifiedOverviewBar
```kotlin
@Composable
fun UnifiedOverviewBar(
    primaryValue: String,      // ä¸»è¦æ•°å€¼
    primaryLabel: String,      // ä¸»è¦æ ‡ç­¾
    secondaryItems: List<Pair<String, String>>, // æ¬¡è¦æŒ‡æ ‡
    accentColor: Color,        // å¼ºè°ƒè‰²
    modifier: Modifier = Modifier
)
```
**ä½¿ç”¨åœºæ™¯**ï¼šæ‰€æœ‰é¡µé¢é¡¶éƒ¨çš„æ•°æ®å±•ç¤º

#### æ“ä½œæ  - UnifiedActionBar
```kotlin
@Composable
fun UnifiedActionBar(
    filterOptions: List<FilterOption>?,
    primaryAction: ActionConfig?,
    secondaryActions: List<ActionConfig>,
    modifier: Modifier = Modifier
)
```
**ä½¿ç”¨åœºæ™¯**ï¼šç­›é€‰å’Œå¿«æ·æ“ä½œ

#### åˆ—è¡¨é¡¹ - UnifiedListItem
```kotlin
@Composable
fun UnifiedListItem(
    title: String,
    subtitle: String? = null,
    leadingContent: @Composable (() -> Unit)? = null,
    trailingContent: @Composable (() -> Unit)? = null,
    onClick: (() -> Unit)? = null
)
```
**ä½¿ç”¨åœºæ™¯**ï¼šæ‰€æœ‰åˆ—è¡¨å±•ç¤º

#### ç©ºçŠ¶æ€ - UnifiedEmptyState
```kotlin
@Composable
fun UnifiedEmptyState(
    icon: ImageVector,
    title: String,
    message: String,
    actionLabel: String? = null,
    onAction: (() -> Unit)? = null
)
```
**ä½¿ç”¨åœºæ™¯**ï¼šæ— æ•°æ®æ—¶çš„å±•ç¤º

### 4.2 é£æ ¼åŒ–ç»„ä»¶å·¥å‚
```kotlin
// æ‰€æœ‰æ”¯æŒé£æ ¼åˆ‡æ¢çš„ç»„ä»¶éƒ½é€šè¿‡å·¥å‚åˆ›å»º
StyleableComponentFactory.TransactionItem(
    transaction = transaction,
    style = currentStyle,
    // ...
)
```

## äº”ã€é¡µé¢ç»“æ„è§„èŒƒ

### 5.1 æ ‡å‡†é¡µé¢ç»“æ„
```kotlin
@Composable
fun StandardPage() {
    Column(modifier = Modifier.fillMaxSize()) {
        // 1. æ•°æ®æ¦‚è§ˆåŒºï¼ˆå¿…é€‰ï¼‰
        UnifiedOverviewBar(...)
        
        // 2. ç­›é€‰/TabåŒºï¼ˆå¯é€‰ï¼‰
        FilterSection(...)
        
        // 3. æ“ä½œæ ï¼ˆå¯é€‰ï¼‰
        UnifiedActionBar(...)
        
        // 4. å†…å®¹åŒºï¼ˆå¿…é€‰ï¼‰
        ContentArea(...)
    }
    
    // 5. FABæ‚¬æµ®æŒ‰é’®ï¼ˆå¯é€‰ï¼‰
    Box {
        FloatingActionButton(...)
    }
}
```

### 5.2 é¡µé¢é—´è·è§„èŒƒ
- **é¡¶éƒ¨æ¦‚è§ˆæ **ï¼šä¸Šè¾¹è· mediumï¼Œä¸‹è¾¹è· xs
- **ç­›é€‰åŒº**ï¼šæ°´å¹³è¾¹è· mediumï¼Œå‚ç›´è¾¹è· small
- **å†…å®¹åŒº**ï¼šcontentPadding = medium
- **FABä½ç½®**ï¼šå³ä¸‹è§’ï¼Œè¾¹è· mediumï¼Œåº•éƒ¨è¾¹è· large

## å…­ã€åŠ¨ç”»è§„èŒƒ

### 6.1 åŠ¨æ•ˆä»¤ç‰ŒåŒ–ç³»ç»Ÿï¼ˆå»ºè®®æ–°å¢åˆ° DesignTokensï¼‰
```kotlin
// å»ºè®®æ·»åŠ åˆ°ï¼šcore/ui/src/main/kotlin/com/ccxiaoji/ui/theme/DesignTokens.kt
object DesignTokens.Motion {
    // åŠ¨ç”»æ—¶é•¿
    object Duration {
        const val fast = 150       // å¿«é€Ÿè¿‡æ¸¡ï¼ˆèŠ¯ç‰‡é€‰æ‹©ã€å°å…ƒç´ ï¼‰
        const val normal = 300     // æ ‡å‡†è¿‡æ¸¡ï¼ˆé¡µé¢åˆ‡æ¢ã€åˆ—è¡¨é¡¹ï¼‰
        const val slow = 500       // ç¼“æ…¢è¿‡æ¸¡ï¼ˆå¤§å‹åŠ¨ç”»ã€é¦–æ¬¡åŠ è½½ï¼‰
    }
    
    // åŠ¨ç”»å»¶è¿Ÿ
    object Delay {
        const val stagger = 50     // åˆ—è¡¨é¡¹é”™å¼€å»¶è¿Ÿ
        const val cascade = 100    // çº§è”åŠ¨ç”»å»¶è¿Ÿ
    }
    
    // ç¼“åŠ¨å‡½æ•°ï¼ˆå»ºè®®ç»Ÿä¸€ä½¿ç”¨ tween æˆ– springï¼‰
    fun standardEasing() = tween<Float>(Duration.normal)
    fun emphasizedEasing() = spring<Float>(dampingRatio = 0.8f, stiffness = 380f)
}
```

ä½¿ç”¨ç¤ºä¾‹ï¼š
```kotlin
// æ›¿ä»£ç¡¬ç¼–ç çš„ tween(300)
animationSpec = tween(DesignTokens.Motion.Duration.normal)

// åˆ—è¡¨é¡¹é”™å¼€åŠ¨ç”»
delayMillis = index * DesignTokens.Motion.Delay.stagger
```

### 6.2 åŠ¨ç”»ç±»å‹
```kotlin
// é¡µé¢åˆ‡æ¢
fadeIn(tween(300)) + slideInVertically { it / 4 }

// åˆ—è¡¨é¡¹è¿›å…¥ï¼ˆé”™å¼€åŠ¨ç”»ï¼‰
items.forEachIndexed { index, item ->
    AnimatedVisibility(
        enter = fadeIn(
            tween(300, delayMillis = index * 50)
        )
    )
}

// æ•°å€¼å˜åŒ–
AnimatedContent(
    targetState = value,
    transitionSpec = {
        fadeIn(tween(300)) togetherWith fadeOut(tween(300))
    }
)
```

### 6.3 åŠ¨ç”»ä½¿ç”¨è§„åˆ™
- **åˆ—è¡¨é¡¹**ï¼šé”™å¼€50msè¿›å…¥ï¼Œè¥é€ æµç•…æ„Ÿ
- **æ•°å€¼å˜åŒ–**ï¼šä½¿ç”¨AnimatedContentæ·¡å…¥æ·¡å‡º
- **Tabåˆ‡æ¢**ï¼šæ°´å¹³æ»‘åŠ¨è¿‡æ¸¡
- **å±•å¼€/æ”¶èµ·**ï¼šä½¿ç”¨expandVertically/shrinkVertically

## ä¸ƒã€å®æ–½è®¡åˆ’

### 7.1 ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€è§„èŒƒè½åœ°ï¼ˆå·²å®Œæˆï¼‰
- [x] ä¼˜åŒ–äº¤æ˜“åˆ—è¡¨é¡µé¢ (OptimizedTransactionListPage)
- [x] ä¼˜åŒ–æ·»åŠ äº¤æ˜“é¡µé¢ (OptimizedAddTransactionPage)
- [x] åˆ›å»ºç»Ÿä¸€ç»„ä»¶åº“ (UnifiedLayoutComponents)

### 7.2 ç¬¬äºŒé˜¶æ®µï¼šå…¨é¢ç»Ÿä¸€åŒ–ï¼ˆè¿›è¡Œä¸­ï¼‰
- [ ] ä¼˜åŒ–è´¦æˆ·èµ„äº§é¡µé¢ (AccountAssetPage, AccountManagePage, AssetAnalysisPage)
- [ ] ä¼˜åŒ–åˆ†ç±»ç®¡ç†é¡µé¢ (CategoryGridPage, CategoryEditPage)
- [ ] ä¼˜åŒ–ç»Ÿè®¡åˆ†æé¡µé¢ (StatisticsOverviewPage, ChartAnalysisPage, ReportExportPage)
- [ ] ä¼˜åŒ–è®¾ç½®ç›¸å…³é¡µé¢ (LedgerSettingsPage, AutoLedgerPage, DataPortPage)

### 7.3 ç¬¬ä¸‰é˜¶æ®µï¼šç»†èŠ‚å®Œå–„
- [ ] æ·»åŠ åŠ è½½çŠ¶æ€åŠ¨ç”»
- [ ] å®Œå–„é”™è¯¯çŠ¶æ€å±•ç¤º
- [ ] å®ç°å…¨å±€é£æ ¼åˆ‡æ¢
- [ ] ä¼˜åŒ–è¿‡æ¸¡åŠ¨ç”»ç»†èŠ‚

## å…«ã€å¼€å‘æ£€æŸ¥æ¸…å•

### æ¯ä¸ªé¡µé¢å¿…é¡»æ£€æŸ¥ï¼š
- [ ] ä½¿ç”¨ UnifiedOverviewBar ä½œä¸ºé¡¶éƒ¨æ•°æ®å±•ç¤º
- [ ] éµå¾ªæ ‡å‡†é¡µé¢ç»“æ„
- [ ] ä½¿ç”¨ DesignTokens ä¸­å®šä¹‰çš„é¢œè‰²å’Œé—´è·
- [ ] å®ç°ç©ºçŠ¶æ€å±•ç¤º
- [ ] æ·»åŠ é€‚å½“çš„åŠ¨ç”»æ•ˆæœ
- [ ] æ”¯æŒé£æ ¼åˆ‡æ¢ï¼ˆå¦‚é€‚ç”¨ï¼‰
- [ ] FABæŒ‰é’®ä½ç½®ç»Ÿä¸€ï¼ˆå³ä¸‹è§’ï¼‰
- [ ] åˆ—è¡¨ä½¿ç”¨ UnifiedListItem æˆ– StyleableTransactionItem
- [ ] å¡ç‰‡ä½¿ç”¨ç»Ÿä¸€çš„åœ†è§’å’Œé˜´å½±

### ä»£ç è§„èŒƒï¼š
- [ ] ç»„ä»¶æ‹†åˆ†åˆç†ï¼Œé¿å…è¿‡å¤§çš„å•ä¸€ç»„ä»¶
- [ ] ä½¿ç”¨rememberå’ŒmutableStateOfç®¡ç†çŠ¶æ€
- [ ] é¿å…ç¡¬ç¼–ç é¢œè‰²å€¼ï¼Œä½¿ç”¨DesignTokens
- [ ] æ·»åŠ é€‚å½“çš„Modifierå‚æ•°ä»¥æ”¯æŒè‡ªå®šä¹‰

## ä¹ã€éªŒæ”¶æ ‡å‡†

### 9.1 é¡µé¢æ”¹é€ éªŒæ”¶æ¸…å•
æ¯ä¸ªä¼˜åŒ–åçš„é¡µé¢å¿…é¡»æ»¡è¶³ä»¥ä¸‹éªŒæ”¶ç‚¹ï¼š

#### åŸºç¡€è¦æ±‚
- [ ] **ç»„ä»¶ä½¿ç”¨**ï¼šä½¿ç”¨ç»Ÿä¸€ç»„ä»¶ï¼ˆUnifiedOverviewBarã€UnifiedListItemç­‰ï¼‰
- [ ] **å¸ƒå±€ä¸€è‡´æ€§**ï¼šéµå¾ªæ ‡å‡†é¡µé¢ç»“æ„ï¼ˆæ¦‚è§ˆâ†’ç­›é€‰â†’å†…å®¹â†’FABï¼‰
- [ ] **åŠ¨æ•ˆè¾¾æ ‡**ï¼šæ‰€æœ‰åŠ¨ç”»ä½¿ç”¨Motionä»¤ç‰Œï¼Œæ—¶é•¿ç¬¦åˆè§„èŒƒ
- [ ] **é£æ ¼æ”¯æŒ**ï¼šæ­£ç¡®å®ç°BALANCEDå’ŒHIERARCHICALä¸¤ç§é£æ ¼åˆ‡æ¢

#### æ— éšœç¢è¦æ±‚
- [ ] **TalkBackå¯è¯»æ€§**ï¼šæ‰€æœ‰äº¤äº’å…ƒç´ è®¾ç½®contentDescription
- [ ] **é¢œè‰²å¯¹æ¯”åº¦**ï¼šæ–‡å­—ä¸èƒŒæ™¯å¯¹æ¯”åº¦â‰¥4.5:1ï¼ˆå°å­—ï¼‰æˆ–3:1ï¼ˆå¤§å­—ï¼‰
- [ ] **è§¦æ§ç›®æ ‡**ï¼šå¯ç‚¹å‡»åŒºåŸŸâ‰¥48dpÃ—48dp
- [ ] **å­—å·ç¼©æ”¾**ï¼šæ”¯æŒç³»ç»Ÿå­—ä½“ç¼©æ”¾è®¾ç½®ï¼ˆ0.85x-1.3xï¼‰

#### å›½é™…åŒ–è¦æ±‚
- [ ] **æ–‡æœ¬å›½é™…åŒ–**ï¼šæ‰€æœ‰æ–‡æœ¬ä½¿ç”¨stringResource
- [ ] **è´§å¸æ ¼å¼åŒ–**ï¼šä½¿ç”¨æœ¬åœ°åŒ–è´§å¸æ ¼å¼ï¼ˆÂ¥/$ç­‰ï¼‰
- [ ] **æ—¥æœŸæ—¶é—´**ï¼šæ ¹æ®localeæ˜¾ç¤ºé€‚å½“æ ¼å¼
- [ ] **RTLæ”¯æŒ**ï¼šå¸ƒå±€æ”¯æŒä»å³åˆ°å·¦è¯­è¨€ï¼ˆé˜¿æ‹‰ä¼¯è¯­ç­‰ï¼‰

#### æ€§èƒ½è¦æ±‚
- [ ] **é‡ç»„ä¼˜åŒ–**ï¼šåˆç†ä½¿ç”¨rememberé¿å…ä¸å¿…è¦çš„é‡ç»„
- [ ] **åˆ—è¡¨æ€§èƒ½**ï¼šå¤§åˆ—è¡¨ä½¿ç”¨LazyColumn/LazyGrid
- [ ] **å›¾ç‰‡ä¼˜åŒ–**ï¼šä½¿ç”¨é€‚å½“çš„å›¾ç‰‡åŠ è½½ç­–ç•¥
- [ ] **å¯åŠ¨æ—¶é—´**ï¼šé¡µé¢é¦–æ¬¡æ¸²æŸ“<500ms

### 9.2 æ€§èƒ½æµ‹è¯•æ–¹æ¡ˆ
```kotlin
// å»ºè®®ä½¿ç”¨ Macrobenchmark è¿›è¡Œæ€§èƒ½æµ‹è¯•
@Test
fun measurePageStartup() {
    benchmarkRule.measureRepeated(
        packageName = "com.ccxiaoji.app",
        metrics = listOf(StartupTimingMetric(), FrameTimingMetric()),
        startupMode = StartupMode.COLD,
        iterations = 5
    ) {
        startActivityAndWait()
        // æµ‹è¯•é¡µé¢åŠ è½½æ€§èƒ½
    }
}
```

## åã€ç¤ºä¾‹ä»£ç æ¨¡æ¿

### 10.1 æ ‡å‡†é¡µé¢æ¨¡æ¿
```kotlin
@Composable
fun OptimizedXxxPage(navController: NavController) {
    var currentStyle by remember { mutableStateOf(LedgerUIStyle.BALANCED) }
    
    Column(
        modifier = Modifier
            .fillMaxSize()
            .background(MaterialTheme.colorScheme.background)
    ) {
        // æ•°æ®æ¦‚è§ˆ
        UnifiedOverviewBar(
            primaryValue = "ä¸»è¦æ•°å€¼",
            primaryLabel = "æ ‡ç­¾",
            secondaryItems = listOf(
                "æ¬¡è¦1" to "å€¼1",
                "æ¬¡è¦2" to "å€¼2"
            ),
            accentColor = DesignTokens.BrandColors.Ledger
        )
        
        // å†…å®¹åŒº
        LazyColumn(
            modifier = Modifier.fillMaxSize(),
            contentPadding = PaddingValues(DesignTokens.Spacing.medium),
            verticalArrangement = Arrangement.spacedBy(DesignTokens.Spacing.small)
        ) {
            // å†…å®¹å®ç°
        }
    }
}
```

### 10.2 åˆ—è¡¨é¡¹æ¨¡æ¿
```kotlin
@Composable
fun CustomListItem(
    item: ItemData,
    style: LedgerUIStyle,
    onClick: () -> Unit
) {
    UnifiedListItem(
        title = item.title,
        subtitle = item.subtitle,
        leadingContent = {
            Icon(
                item.icon,
                contentDescription = null,
                tint = DesignTokens.BrandColors.Ledger
            )
        },
        trailingContent = {
            Text(
                text = item.value,
                color = if (item.isPositive) 
                    DesignTokens.BrandColors.Success 
                else 
                    DesignTokens.BrandColors.Error
            )
        },
        onClick = onClick
    )
}
```

## åä¸€ã€æ³¨æ„äº‹é¡¹

1. **ä¿æŒä¸€è‡´æ€§**ï¼šæ‰€æœ‰é¡µé¢å¿…é¡»ä½¿ç”¨ç›¸åŒçš„è®¾è®¡è¯­è¨€
2. **é¿å…è¿‡åº¦è®¾è®¡**ï¼šä¿æŒç®€æ´ï¼Œä¸è¦æ·»åŠ ä¸å¿…è¦çš„è£…é¥°
3. **æ€§èƒ½ä¼˜åŒ–**ï¼šåˆç†ä½¿ç”¨rememberï¼Œé¿å…ä¸å¿…è¦çš„é‡ç»„
4. **å¯è®¿é—®æ€§**ï¼šç¡®ä¿æ‰€æœ‰äº¤äº’å…ƒç´ æœ‰åˆé€‚çš„contentDescription
5. **å“åº”å¼è®¾è®¡**ï¼šè€ƒè™‘ä¸åŒå±å¹•å°ºå¯¸çš„é€‚é…

## åäºŒã€ç°æœ‰å®ç°å‚è€ƒé“¾æ¥

ä¸ºæ–¹ä¾¿å¼€å‘è€…å¿«é€Ÿå®šä½ç›¸å…³ä»£ç ï¼Œä»¥ä¸‹æ˜¯å…³é”®å®ç°æ–‡ä»¶çš„ä½ç½®ï¼š

### æ ¸å¿ƒè®¾è®¡ç³»ç»Ÿ
- **è®¾è®¡ä»¤ç‰Œå®šä¹‰**ï¼š`core/ui/src/main/kotlin/com/ccxiaoji/ui/theme/DesignTokens.kt`
- **Materialä¸»é¢˜é…ç½®**ï¼š`core/ui/src/main/kotlin/com/ccxiaoji/ui/theme/Theme.kt`

### Demoå¯¼èˆªä¸å…¥å£
- **å¯¼èˆªå›¾æ³¨å†Œ**ï¼š`app/src/main/java/com/ccxiaoji/app/presentation/ui/navigation/NavGraph.kt:875`
- **ä¾§è¾¹æ å…¥å£**ï¼ˆDebug Onlyï¼‰ï¼š`feature/ledger/src/main/kotlin/com/ccxiaoji/feature/ledger/presentation/component/ledger/LedgerDrawerContent.kt:136`

### ç»Ÿä¸€ç»„ä»¶å®ç°
- **å¸ƒå±€ç»„ä»¶**ï¼š`feature/ledger/src/main/kotlin/com/ccxiaoji/feature/ledger/presentation/screen/demo/unified/components/UnifiedLayoutComponents.kt`
- **é€šç”¨ç»„ä»¶**ï¼š`feature/ledger/src/main/kotlin/com/ccxiaoji/feature/ledger/presentation/screen/demo/unified/UnifiedCommonComponents.kt`
- **é£æ ¼åŒ–å·¥å‚**ï¼š`feature/ledger/src/main/kotlin/com/ccxiaoji/feature/ledger/presentation/component/StyleableComponentFactory.kt`

### é¢†åŸŸæ¨¡å‹
- **UIåå¥½è®¾ç½®**ï¼š`feature/ledger/src/main/kotlin/com/ccxiaoji/feature/ledger/domain/model/LedgerUIPreferences.kt`
- **é£æ ¼æšä¸¾**ï¼š`feature/ledger/src/main/kotlin/com/ccxiaoji/feature/ledger/domain/model/LedgerUIStyle.kt`

### å·²ä¼˜åŒ–é¡µé¢å‚è€ƒ
- **äº¤æ˜“åˆ—è¡¨**ï¼š`feature/ledger/src/.../demo/unified/pages/transaction/OptimizedTransactionListPage.kt`
- **æ·»åŠ äº¤æ˜“**ï¼š`feature/ledger/src/.../demo/unified/pages/transaction/OptimizedAddTransactionPage.kt`

### ç”Ÿäº§ä»£ç å‚è€ƒ
- **å®é™…è®°è´¦é¦–é¡µ**ï¼š`feature/ledger/src/main/kotlin/com/ccxiaoji/feature/ledger/presentation/screen/ledger/LedgerScreen.kt`
- **é£æ ¼åŒ–ç»„ä»¶ç¤ºä¾‹**ï¼š`feature/ledger/src/main/kotlin/com/ccxiaoji/feature/ledger/presentation/component/StyleableTransactionItem.kt`

---

## æ›´æ–°æ—¥å¿—

- 2025-09-05ï¼šåˆå§‹ç‰ˆæœ¬ï¼Œåˆ¶å®šç»Ÿä¸€è®¾è®¡è§„èŒƒ
- 2025-09-05ï¼šæ ¹æ®GPT-5ç‚¹è¯„ä¼˜åŒ–ï¼š
  - æ”¹ä¸ºå¼•ç”¨ç°æœ‰DesignTokensï¼Œé¿å…é‡å¤å®šä¹‰
  - æ–°å¢åŠ¨æ•ˆä»¤ç‰ŒåŒ–ç³»ç»Ÿï¼ˆMotionï¼‰
  - æ·»åŠ å®Œæ•´çš„éªŒæ”¶æ ‡å‡†ï¼ˆåŸºç¡€ã€æ— éšœç¢ã€å›½é™…åŒ–ã€æ€§èƒ½ï¼‰
  - è¡¥å……ç°æœ‰å®ç°å‚è€ƒé“¾æ¥æ¸…å•
  - æ˜ç¡®Demoä»…Debugå¯è§çš„å‘å¸ƒç­–ç•¥
---

## è¯„å®¡ç‚¹è¯„ï¼ˆCodexï¼‰

### æ€»ä½“è¯„ä»·
- ç›®æ ‡æ¸…æ™°ï¼šä»è®¾è®¡åŸåˆ™ â†’ è®¾è®¡ä»¤ç‰Œ â†’ ç»Ÿä¸€ç»„ä»¶ â†’ é¡µé¢éª¨æ¶ â†’ åŠ¨æ•ˆè§„èŒƒ â†’ åˆ†é˜¶æ®µæ¨è¿›ï¼Œé—­ç¯å®Œæ•´ï¼Œæ˜“è½åœ°ã€‚
- ä¸å®ç°è¡”æ¥å¥½ï¼šå·²å­˜åœ¨ Demo è·¯ç”±ä¸ç»Ÿä¸€ç»„ä»¶ï¼Œèƒ½è¾¹å†™è¾¹éªŒï¼›é˜¶æ®µ TODO æ˜ç¡®ã€‚

### ä¸ç°æœ‰ä»£ç ä¸€è‡´æ€§
- è·¯ç”±ï¼š`UnifiedLedgerStyleDemoRoute` å·²åœ¨å¯¼èˆªä¸­æ³¨å†Œï¼Œä¾¿äºç›´è¾¾éªŒæ”¶ï¼ˆ`app/src/main/java/com/ccxiaoji/app/presentation/ui/navigation/NavGraph.kt:875`ï¼‰ã€‚
- å…¥å£å¯è§æ€§ï¼šè®°è´¦ä¾§è¾¹æ â€œç»Ÿä¸€é£æ ¼ Demoâ€ä»… Debug æ˜¾ç¤ºï¼ˆ`feature/ledger/src/main/kotlin/com/ccxiaoji/feature/ledger/presentation/component/ledger/LedgerDrawerContent.kt:136`ï¼‰ã€‚
- ç»Ÿä¸€ç»„ä»¶ï¼š`UnifiedOverviewBar/UnifiedActionBar/UnifiedListItem/UnifiedEmptyState` å·²å®ç°ï¼ˆ`feature/ledger/src/main/kotlin/com/ccxiaoji/feature/ledger/presentation/screen/demo/unified/components/UnifiedLayoutComponents.kt:31`ï¼‰ã€‚
- é£æ ¼é…ç½®ï¼šè¯·å¤ç”¨ Domain æšä¸¾ `LedgerUIStyle` ä¸åå¥½æ¨¡å‹ï¼ˆ`feature/ledger/src/main/kotlin/com/ccxiaoji/feature/ledger/domain/model/LedgerUIPreferences.kt:21`ï¼‰ï¼Œé¿å…æ–‡æ¡£é‡å¤å®šä¹‰ã€‚

### æ”¹è¿›å»ºè®®
- ä»¤ç‰Œæ¥æºç»Ÿä¸€ï¼šæ–‡æ¡£ä¸­çš„é¢œè‰²/é—´è·/åœ†è§’/æµ·æ‹”å»ºè®®å¼•ç”¨ `DesignTokens` åç§°è€Œéå†™æ­»æ•°å€¼ï¼Œé¿å…åŒå¤„ç»´æŠ¤ï¼ˆ`core/ui/src/main/kotlin/com/ccxiaoji/ui/theme/DesignTokens.kt`ï¼‰ã€‚
- åŠ¨æ•ˆä»¤ç‰ŒåŒ–ï¼šæ–°å¢ `DesignTokens.Motion`ï¼ˆå¦‚ `fast/normal/slow`ï¼‰æ›¿ä»£ `tween(300)` ç­‰é­”æ³•æ•°ï¼Œå¹¶åœ¨ç»Ÿä¸€ç»„ä»¶ä¸ Demo ä¸­è½åœ°ã€‚
- å‘å¸ƒç­–ç•¥ï¼šåœ¨æ–‡æ¡£â€œå‘å¸ƒç­–ç•¥â€æ˜ç¡® Demo ä»… Debug å¯è§ä¸å…¥å£ä½ç½®ï¼Œåç»­å¦‚æœ‰ç°åº¦/å†…æµ‹ï¼Œè¡¥å……å¼€å…³ç­–ç•¥ã€‚
- éªŒæ”¶æ ‡å‡†ï¼šä¸ºå„æ”¹é€ é¡µé¢åˆ—å‡ºâ€œç»„ä»¶ä½¿ç”¨ + å¸ƒå±€ä¸€è‡´æ€§ + åŠ¨æ•ˆè¾¾æ ‡ + æ— éšœç¢ + æ€§èƒ½â€éªŒæ”¶ç‚¹ï¼›å¯é™„ Macrobenchmark/JankStats æ–¹æ¡ˆã€‚
- æ— éšœç¢/å›½é™…åŒ–ï¼šè¡¥å…… TalkBack å¯è¯»æ€§ã€é¢œè‰²å¯¹æ¯”åº¦ã€è§¦è¾¾é¢ç§¯ã€å­—å·ç¼©æ”¾ã€è´§å¸/æ—¥æœŸæœ¬åœ°åŒ–ç­‰çº¦æŸã€‚

### å¯æ‰§è¡Œä¼˜åŒ–ï¼ˆå»ºè®®çº³å…¥ä¸‹ä¸€æ­¥ï¼‰
- åœ¨æ–‡æ¡£æœ«é™„â€œç°æœ‰å®ç°é“¾æ¥â€æ¸…å•ï¼Œä¾¿äºæ–°æˆå‘˜è·³è½¬ï¼š
  - `app/src/main/java/com/ccxiaoji/app/presentation/ui/navigation/NavGraph.kt:875`
  - `feature/ledger/src/main/kotlin/com/ccxiaoji/feature/ledger/presentation/component/ledger/LedgerDrawerContent.kt:136`
  - `feature/ledger/src/main/kotlin/com/ccxiaoji/feature/ledger/presentation/screen/demo/unified/components/UnifiedLayoutComponents.kt:31`
  - `feature/ledger/src/main/kotlin/com/ccxiaoji/feature/ledger/domain/model/LedgerUIPreferences.kt:21`
  - `core/ui/src/main/kotlin/com/ccxiaoji/ui/theme/DesignTokens.kt:1`

### å°é—®é¢˜æç¤º
- ç¼–ç æ˜¾ç¤ºï¼šåœ¨éƒ¨åˆ†ç»ˆç«¯ï¼ˆå¦‚ PowerShellï¼‰ä¸­æ–‡ä¼šæ˜¾ç¤ºä¹±ç ï¼Œå»ºè®®ç»Ÿä¸€ä½¿ç”¨ UTF-8 å¹¶åœ¨ README å¤‡æ³¨â€œå»ºè®®åœ¨ IDE ä¸­æŸ¥çœ‹â€ã€‚
