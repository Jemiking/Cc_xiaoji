# MCPç¼–è¯‘å™¨é—®é¢˜ä¿®å¤è®°å½•

## æ¦‚è¿°
- **æ—¥æœŸ**ï¼š2025-07-11
- **é—®é¢˜**ï¼šMCP Androidç¼–è¯‘å™¨æ— æ³•æ­£å¸¸ç¼–è¯‘é¡¹ç›®ï¼ŒæŠ¥å‘Šå¤šä¸ªä¸­é—´æ–‡ä»¶ç¼ºå¤±
- **è§£å†³çŠ¶æ€**ï¼šå·²ä¿®å¤ âœ…

## é—®é¢˜æè¿°

### é”™è¯¯ä¿¡æ¯
```
A problem was found with the configuration of task ':module:generateDebugRFile' 
property 'mergedManifestFile' specifies file 'build/intermediates/merged_manifest/debug/AndroidManifest.xml' 
which doesn't exist.
```

æ‰€æœ‰æ¨¡å—éƒ½æŠ¥å‘Šç±»ä¼¼é”™è¯¯ï¼ŒåŒ…æ‹¬ï¼š
- core/common
- core/database
- core/network
- core/ui
- shared/sync
- shared/notification
- shared/user
- shared/backup
- feature/todo
- feature/habit
- feature/ledger
- feature/schedule
- feature/plan

### æ ¹æœ¬åŸå› 
MCPç¼–è¯‘å™¨ä¸ºäº†åŠ é€Ÿç¼–è¯‘ï¼Œä½¿ç”¨äº†ä¼˜åŒ–çš„å‘½ä»¤ï¼š
```bash
./gradlew :app:compileDebugKotlin 
  -x lint 
  -x processDebugManifest    # è·³è¿‡äº†Manifestå¤„ç†
  -x processDebugResources 
  -x mergeDebugResources 
  -x generateDebugBuildConfig # è·³è¿‡äº†BuildConfigç”Ÿæˆ
  ...
```

è¿™å¯¼è‡´å¿…è¦çš„ä¸­é—´æ–‡ä»¶æ²¡æœ‰ç”Ÿæˆï¼Œåç»­ä»»åŠ¡æ— æ³•æ‰§è¡Œã€‚

## è§£å†³æ–¹æ¡ˆ

### 1. æ‰‹åŠ¨ç”Ÿæˆä¸­é—´æ–‡ä»¶
```bash
# åœæ­¢æ‰€æœ‰Gradleå®ˆæŠ¤è¿›ç¨‹
./gradlew --stop

# ç”ŸæˆManifestæ–‡ä»¶
./gradlew processDebugManifest mergeDebugResources --parallel

# ç”ŸæˆBuildConfigæ–‡ä»¶
./gradlew :app:generateDebugBuildConfig
```

### 2. åˆ›å»ºè‡ªåŠ¨åŒ–è„šæœ¬
åˆ›å»ºäº† `scripts/mcp-prepare.sh` è„šæœ¬ï¼š

```bash
#!/bin/bash
# MCPç¼–è¯‘å™¨é¢„å¤„ç†è„šæœ¬

echo "ğŸ”§ å‡†å¤‡MCPç¼–è¯‘ç¯å¢ƒ..."

# åœæ­¢æ‰€æœ‰Gradleå®ˆæŠ¤è¿›ç¨‹
echo "â¹ï¸  åœæ­¢Gradleå®ˆæŠ¤è¿›ç¨‹..."
./gradlew --stop

# ç”Ÿæˆå¿…è¦çš„ä¸­é—´æ–‡ä»¶
echo "ğŸ“¦ ç”ŸæˆManifestæ–‡ä»¶..."
./gradlew processDebugManifest --parallel

echo "ğŸ—ï¸  ç”ŸæˆBuildConfigæ–‡ä»¶..."
./gradlew :app:generateDebugBuildConfig

echo "ğŸ“‹ ç”Ÿæˆèµ„æºæ–‡ä»¶..."
./gradlew mergeDebugResources --parallel

echo "âœ… MCPç¼–è¯‘ç¯å¢ƒå‡†å¤‡å®Œæˆï¼"
```

## ä½¿ç”¨æµç¨‹

### é¦–æ¬¡ä½¿ç”¨æˆ–cleanå
```bash
# 1. è¿è¡Œå‡†å¤‡è„šæœ¬
./scripts/mcp-prepare.sh

# 2. ä½¿ç”¨MCPç¼–è¯‘å™¨
mcp__android-compiler__compile_kotlin
```

### æ—¥å¸¸å¼€å‘
1. ä¸»è¦ä½¿ç”¨Android Studioè¿›è¡Œå¼€å‘å’Œè°ƒè¯•
2. MCPç¼–è¯‘å™¨ä½œä¸ºå¿«é€ŸéªŒè¯å·¥å…·
3. å¦‚æœé‡åˆ°ç¼–è¯‘é”™è¯¯ï¼Œè¿è¡Œå‡†å¤‡è„šæœ¬

## æŠ€æœ¯åˆ†æ

### MCPä¸Android Studioçš„å·®å¼‚
1. **Gradleå®ˆæŠ¤è¿›ç¨‹**ï¼šä¸¤è€…ä½¿ç”¨ç‹¬ç«‹çš„å®ˆæŠ¤è¿›ç¨‹ï¼Œå¯èƒ½å¯¼è‡´çŠ¶æ€ä¸ä¸€è‡´
2. **ç¼“å­˜æœºåˆ¶**ï¼šæ„å»ºç¼“å­˜ä¸å…±äº«ï¼Œä¸­é—´æ–‡ä»¶å¯èƒ½ç¼ºå¤±
3. **ä¼˜åŒ–ç­–ç•¥**ï¼šMCPè·³è¿‡è®¸å¤šä»»åŠ¡ä»¥åŠ é€Ÿï¼Œä½†å¯èƒ½å¯¼è‡´ä¾èµ–é—®é¢˜

### é•¿æœŸä¼˜åŒ–å»ºè®®

1. **ä¿®æ”¹MCPé…ç½®**
   - ä½¿ç”¨å®Œæ•´çš„æ„å»ºä»»åŠ¡è€Œéä¼˜åŒ–ç‰ˆæœ¬
   - æˆ–åœ¨å¯åŠ¨æ—¶è‡ªåŠ¨è¿è¡Œå‡†å¤‡ä»»åŠ¡

2. **å…±äº«æ„å»ºç¼“å­˜**
   ```kotlin
   // gradle.properties
   org.gradle.caching=true
   org.gradle.parallel=false
   ```

3. **ç›‘æ§æ„å»ºçŠ¶æ€**
   ```bash
   # æŸ¥çœ‹Gradleå®ˆæŠ¤è¿›ç¨‹
   ./gradlew --status
   
   # æŸ¥çœ‹æ„å»ºç¼“å­˜
   ls -la ~/.gradle/caches/
   ```

## ç›¸å…³æ–‡ä»¶
- å‡†å¤‡è„šæœ¬ï¼š`/scripts/mcp-prepare.sh`
- MCPé…ç½®ï¼š`~/android-compiler-mcp/index.js`
- é¡¹ç›®æ„å»ºé…ç½®ï¼š`build.gradle.kts`

## ç»éªŒæ€»ç»“
1. MCPç¼–è¯‘å™¨é€‚åˆä½œä¸ºè¾…åŠ©å·¥å…·ï¼Œä¸åº”æ›¿ä»£Android Studio
2. å®šæœŸåŒæ­¥æ„å»ºçŠ¶æ€å¾ˆé‡è¦
3. äº†è§£å·¥å…·çš„é™åˆ¶ï¼Œåˆç†ä½¿ç”¨
4. ä¿æŒæ„å»ºç¯å¢ƒçš„ä¸€è‡´æ€§

---
*æœ€åæ›´æ–°ï¼š2025-07-11*