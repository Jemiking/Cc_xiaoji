# CCå°è®°è®¡åˆ’ä¹¦æ¨¡å—è¿ç§»è®¡åˆ’

## é¡¹ç›®ä¿¡æ¯
- **æ–‡æ¡£åˆ›å»ºæ—¶é—´**: 2025-06-21 17:30
- **æºé¡¹ç›®**: Cc_xiaoji_jihuashuï¼ˆè®¡åˆ’ä¹¦ç‹¬ç«‹åº”ç”¨ï¼‰
- **ç›®æ ‡é¡¹ç›®**: Cc_xiaojiï¼ˆCCå°è®°ä¸»é¡¹ç›®ï¼‰
- **è¿ç§»ç›®æ ‡**: å°†è®¡åˆ’ä¹¦ä½œä¸ºfeature-planæ¨¡å—é›†æˆåˆ°ä¸»é¡¹ç›®
- **æ ¸å¿ƒåŸåˆ™**: é›¶ç ´åè¿ç§»ï¼Œä¿æŠ¤åŸæœ‰ä»£ç å®Œæ•´æ€§

## ä¸€ã€é¡¹ç›®æ¦‚å†µ

### 1.1 è®¡åˆ’ä¹¦é¡¹ç›®è§„æ¨¡
```
- æ–‡ä»¶æ€»æ•°ï¼š97ä¸ª
- ä»£ç è¡Œæ•°ï¼šçº¦5000è¡Œ
- UseCaseæ•°é‡ï¼š19ä¸ª
- ViewModelæ•°é‡ï¼š8ä¸ª
- Screenæ•°é‡ï¼š8ä¸ª
- æ•°æ®åº“è¡¨ï¼š3ä¸ªï¼ˆplan_table, milestone_table, template_tableï¼‰
- é¢„ç½®æ¨¡æ¿ï¼š12ä¸ª
```

### 1.2 æ ¸å¿ƒåŠŸèƒ½æ¸…å•
1. **è®¡åˆ’ç®¡ç†**ï¼šæ ‘å½¢ç»“æ„ã€å¤šçº§åµŒå¥—ã€è¿›åº¦è¿½è¸ª
2. **é‡Œç¨‹ç¢‘ç³»ç»Ÿ**ï¼šå…³é”®èŠ‚ç‚¹ç®¡ç†
3. **æ¨¡æ¿ç³»ç»Ÿ**ï¼šé¢„ç½®æ¨¡æ¿å’Œè‡ªå®šä¹‰æ¨¡æ¿
4. **è¿›åº¦åˆ†æ**ï¼šå¤šç»´åº¦æ•°æ®å¯è§†åŒ–
5. **æœç´¢ç­›é€‰**ï¼šå®æ—¶æœç´¢ã€å¤šæ¡ä»¶ç­›é€‰
6. **æ€§èƒ½ä¼˜åŒ–**ï¼šæ”¯æŒ1000+è®¡åˆ’æµç•…è¿è¡Œ

### 1.3 æŠ€æœ¯æ ˆå¯¹æ¯”
| ç»„ä»¶ | è®¡åˆ’ä¹¦ | ä¸»é¡¹ç›® | å…¼å®¹æ€§ |
|------|--------|--------|--------|
| Kotlin | 1.9.21 | 1.9.21 | âœ… å®Œå…¨å…¼å®¹ |
| Compose BOM | 2024.02.00 | 2024.02.00 | âœ… å®Œå…¨å…¼å®¹ |
| Hilt | 2.48.1 | 2.48.1 | âœ… å®Œå…¨å…¼å®¹ |
| Room | 2.6.1 | 2.6.1 | âœ… å®Œå…¨å…¼å®¹ |

## äºŒã€è¿ç§»ç­–ç•¥

### 2.1 æ ¸å¿ƒè¿ç§»åŸåˆ™
```kotlin
/**
 * è¿ç§»ä¸‰ä¸åŸåˆ™ï¼š
 * 1. ä¸æ”¹å˜ä»»ä½•ä¸šåŠ¡é€»è¾‘
 * 2. ä¸ä¿®æ”¹ä»»ä½•ç®—æ³•å®ç°
 * 3. ä¸ç ´åä»»ä½•æ•°æ®ç»“æ„
 */
```

### 2.2 åŒ…åæ˜ å°„è§„åˆ™
```
åŸåŒ…åï¼šcom.example.cc_xiaoji
æ–°åŒ…åï¼šcom.ccxiaoji.feature.plan

å…·ä½“æ˜ å°„ï¼š
- com.example.cc_xiaoji.api â†’ com.ccxiaoji.feature.plan.api
- com.example.cc_xiaoji.data â†’ com.ccxiaoji.feature.plan.data
- com.example.cc_xiaoji.domain â†’ com.ccxiaoji.feature.plan.domain
- com.example.cc_xiaoji.presentation â†’ com.ccxiaoji.feature.plan.presentation
- com.example.cc_xiaoji.di â†’ com.ccxiaoji.feature.plan.di
- com.example.cc_xiaoji.util â†’ com.ccxiaoji.feature.plan.util
```

### 2.3 æ¨¡å—ç»“æ„è®¾è®¡
```
feature/plan/
â”œâ”€â”€ build.gradle.kts          # æ¨¡å—é…ç½®
â”œâ”€â”€ proguard-rules.pro        # æ··æ·†è§„åˆ™
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”œâ”€â”€ kotlin/com/ccxiaoji/feature/plan/
â”‚   â”‚   â”‚   â”œâ”€â”€ api/          # å¯¹å¤–APIæ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ data/         # æ•°æ®å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ di/           # ä¾èµ–æ³¨å…¥
â”‚   â”‚   â”‚   â”œâ”€â”€ domain/       # é¢†åŸŸå±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ presentation/ # è¡¨ç°å±‚
â”‚   â”‚   â”‚   â””â”€â”€ util/         # å·¥å…·ç±»
â”‚   â”‚   â””â”€â”€ res/              # èµ„æºæ–‡ä»¶
â”‚   â””â”€â”€ test/                 # æµ‹è¯•ä»£ç 
â””â”€â”€ schemas/                  # æ•°æ®åº“Schema
```

## ä¸‰ã€è¯¦ç»†è¿ç§»æ­¥éª¤

## è¿ç§»è¿›åº¦æ€»è§ˆ

### âœ… å…¨éƒ¨è¿ç§»æ­¥éª¤å·²å®Œæˆï¼(2025-06-21 17:10)

- **ç¬¬ä¸€é˜¶æ®µ**ï¼šå‡†å¤‡å·¥ä½œï¼ˆæ­¥éª¤1-5ï¼‰âœ…
- **ç¬¬äºŒé˜¶æ®µ**ï¼šæ ¸å¿ƒä»£ç è¿ç§»ï¼ˆæ­¥éª¤6-15ï¼‰âœ…
- **ç¬¬ä¸‰é˜¶æ®µ**ï¼šUIå±‚è¿ç§»ï¼ˆæ­¥éª¤16-20ï¼‰âœ…
- **ç¬¬å››é˜¶æ®µ**ï¼šé›†æˆå’ŒéªŒè¯ï¼ˆæ­¥éª¤21-25ï¼‰âœ…

**æ€»è€—æ—¶**: çº¦5å°æ—¶ï¼ˆ2025-06-21 12:00 - 17:10ï¼‰
**è¿ç§»è§„æ¨¡**: 97ä¸ªæ–‡ä»¶ï¼Œçº¦5000è¡Œä»£ç 
**ç¼–è¯‘çŠ¶æ€**: âœ… æˆåŠŸï¼ˆ44ç§’ï¼‰

### ç¬¬ä¸€é˜¶æ®µï¼šå‡†å¤‡å·¥ä½œï¼ˆæ­¥éª¤1-5ï¼‰

#### æ­¥éª¤1ï¼šåˆ›å»ºè¿ç§»åˆ†æ”¯
```bash
git checkout -b feature/plan-module-migration
```

#### æ­¥éª¤2ï¼šå¤‡ä»½è®¡åˆ’ä¹¦é¡¹ç›®
```bash
cp -r /media/hua/èµ„æ–™1/kotlin/Cc_xiaoji_jihuashu ~/backup/Cc_xiaoji_jihuashu_backup_20250621
```

#### æ­¥éª¤3ï¼šåˆ›å»ºfeature-planæ¨¡å—
```bash
cd /media/hua/èµ„æ–™1/kotlin/Cc_xiaoji
./scripts/create_feature_module.sh plan
```

#### æ­¥éª¤4ï¼šé…ç½®build.gradle.kts
```kotlin
// feature/plan/build.gradle.kts
plugins {
    id("com.android.library")
    id("org.jetbrains.kotlin.android")
    id("dagger.hilt.android.plugin")
    id("com.google.devtools.ksp")
}

android {
    namespace = "com.ccxiaoji.feature.plan"
    // å¤åˆ¶è®¡åˆ’ä¹¦é¡¹ç›®çš„å…¶ä»–é…ç½®
}

dependencies {
    // ä»è®¡åˆ’ä¹¦é¡¹ç›®å¤åˆ¶æ‰€æœ‰ä¾èµ–
    implementation(project(":core:common"))
    implementation(project(":core:ui"))
    implementation(project(":core:database"))
    // ... å…¶ä»–ä¾èµ–
}
```

#### æ­¥éª¤5ï¼šåˆ›å»ºåŒ…ç»“æ„
```bash
mkdir -p feature/plan/src/main/kotlin/com/ccxiaoji/feature/plan/{api,data,di,domain,presentation,util}
```

**éªŒè¯ç‚¹1**ï¼šæ¨¡å—åˆ›å»ºæˆåŠŸï¼Œå¯ä»¥ç¼–è¯‘ç©ºæ¨¡å—

### ç¬¬äºŒé˜¶æ®µï¼šæ ¸å¿ƒä»£ç è¿ç§»ï¼ˆæ­¥éª¤6-15ï¼‰

#### æ­¥éª¤6ï¼šè¿ç§»domainå±‚modelï¼ˆ5ä¸ªæ–‡ä»¶ï¼‰
```bash
# å¤åˆ¶å¹¶è°ƒæ•´åŒ…å
cp -r ../Cc_xiaoji_jihuashu/app/src/main/java/com/example/cc_xiaoji/domain/model/* \
      feature/plan/src/main/kotlin/com/ccxiaoji/feature/plan/domain/model/

# æ‰¹é‡æ›¿æ¢åŒ…å
find feature/plan/src/main/kotlin/com/ccxiaoji/feature/plan/domain/model \
     -name "*.kt" -exec sed -i 's/com.example.cc_xiaoji/com.ccxiaoji.feature.plan/g' {} \;
```

#### æ­¥éª¤7ï¼šè¿ç§»dataå±‚entityï¼ˆ3ä¸ªæ–‡ä»¶ï¼‰
- PlanEntity.kt
- MilestoneEntity.kt
- TemplateEntity.kt

#### æ­¥éª¤8ï¼šè¿ç§»dataå±‚daoï¼ˆ3ä¸ªæ–‡ä»¶ï¼‰
- PlanDao.kt
- MilestoneDao.kt
- TemplateDao.kt

#### æ­¥éª¤9ï¼šè¿ç§»domainå±‚repositoryæ¥å£ï¼ˆ2ä¸ªæ–‡ä»¶ï¼‰
- PlanRepository.kt
- MilestoneRepository.kt

#### æ­¥éª¤10ï¼šè¿ç§»dataå±‚repositoryå®ç°ï¼ˆ2ä¸ªæ–‡ä»¶ï¼‰
- PlanRepositoryImpl.kt
- MilestoneRepositoryImpl.kt

#### æ­¥éª¤11ï¼šè¿ç§»19ä¸ªUseCase
```
è®¡åˆ’ç›¸å…³ï¼ˆ9ä¸ªï¼‰ï¼š
- CreatePlanUseCase.kt
- UpdatePlanUseCase.kt
- DeletePlanUseCase.kt
- GetAllPlansUseCase.kt
- SearchPlansUseCase.kt
- UpdatePlanProgressUseCase.kt
- UpdatePlanStatusUseCase.kt
- GetPlanStatisticsUseCase.kt
- DeleteAllPlansUseCase.kt

é‡Œç¨‹ç¢‘ç›¸å…³ï¼ˆ4ä¸ªï¼‰ï¼š
- CreateMilestoneUseCase.kt
- UpdateMilestoneUseCase.kt
- DeleteMilestoneUseCase.kt
- ToggleMilestoneUseCase.kt

æ¨¡æ¿ç›¸å…³ï¼ˆ4ä¸ªï¼‰ï¼š
- InitializeSystemTemplatesUseCase.kt
- CreateTemplateFromPlanUseCase.kt
- GetTemplatesUseCase.kt
- ApplyTemplateUseCase.kt

å…¶ä»–ï¼ˆ2ä¸ªï¼‰ï¼š
- CalculatePlanProgressUseCase.kt
- RunPerformanceTestUseCase.kt
```

#### æ­¥éª¤12ï¼šè¿ç§»utilå·¥å…·ç±»ï¼ˆ5ä¸ªæ–‡ä»¶ï¼‰
- TreeStructureOptimizer.kt
- ProgressCalculationCache.kt
- DateUtils.kt
- PlanFilterUtils.kt
- TemplateLoader.kt

#### æ­¥éª¤13ï¼šè¿ç§»core.utilåŒ…ï¼ˆ2ä¸ªæ–‡ä»¶ï¼‰
- Constants.kt
- Extensions.kt

#### æ­¥éª¤14ï¼šè¿ç§»Convertersç±»
```kotlin
// æ³¨æ„ï¼šéœ€è¦è°ƒæ•´ä¸ºä½¿ç”¨ä¸»é¡¹ç›®çš„ConvertersåŸºç±»
```

#### æ­¥éª¤15ï¼šè¿ç§»APIæ¥å£ï¼ˆ3ä¸ªæ–‡ä»¶ï¼‰
- PlanApi.kt
- PlanApiImpl.kt
- PlanSummary.kt

**éªŒè¯ç‚¹2**ï¼šè¿è¡Œå•å…ƒæµ‹è¯•ï¼Œç¡®ä¿ä¸šåŠ¡é€»è¾‘æ­£ç¡®

### ç¬¬ä¸‰é˜¶æ®µï¼šUIå±‚è¿ç§»ï¼ˆæ­¥éª¤16-20ï¼‰

#### æ­¥éª¤16ï¼šè¿ç§»themeç›¸å…³æ–‡ä»¶
```kotlin
// è°ƒæ•´ä¸ºä½¿ç”¨core-uiçš„ä¸»é¢˜
// åˆ é™¤é‡å¤çš„ä¸»é¢˜å®šä¹‰
```

#### æ­¥éª¤17ï¼šè¿ç§»componentsï¼ˆ11ä¸ªç»„ä»¶ï¼‰
```
é€šç”¨ç»„ä»¶ï¼š
- SearchBar.kt
- ColorPicker.kt
- TagInput.kt
- DatePickerField.kt

å¯¹è¯æ¡†ï¼š
- PlanFilterDialog.kt
- MilestoneDialog.kt
- ProgressUpdateDialog.kt
- CreatePlanFromTemplateDialog.kt

ç‰¹è‰²ç»„ä»¶ï¼š
- PlanTreeItem.kt
- PlanListItem.kt
- EmptyState.kt
```

#### æ­¥éª¤18ï¼šè¿ç§»8ä¸ªViewModel
```
- PlanViewModel.kt
- PlanDetailViewModel.kt
- CreatePlanViewModel.kt
- EditPlanViewModel.kt
- MilestoneViewModel.kt
- TemplateViewModel.kt
- AnalysisViewModel.kt
- SearchViewModel.kt
```

#### æ­¥éª¤19ï¼šè¿ç§»8ä¸ªScreen
```
- PlanScreen.kt
- PlanDetailScreen.kt
- CreatePlanScreen.kt
- EditPlanScreen.kt
- MilestoneScreen.kt
- TemplateScreen.kt
- AnalysisScreen.kt
- SearchScreen.kt
```

#### æ­¥éª¤20ï¼šè¿ç§»navigationæ–‡ä»¶
```kotlin
// PlanNavigation.kt
// è°ƒæ•´è·¯ç”±åç§°ï¼Œæ·»åŠ plan_å‰ç¼€
```

**éªŒè¯ç‚¹3**ï¼šUIç¼–è¯‘é€šè¿‡ï¼Œç•Œé¢æ­£å¸¸æ˜¾ç¤º âœ… (2025-06-22 01:00)

### ç¬¬å››é˜¶æ®µï¼šé›†æˆå’ŒéªŒè¯ï¼ˆæ­¥éª¤21-25ï¼‰

#### æ­¥éª¤21ï¼šæ›´æ–°CcDatabase
```kotlin
// core/database/src/main/kotlin/com/ccxiaoji/core/database/CcDatabase.kt
@Database(
    entities = [
        // åŸæœ‰å®ä½“...
        PlanEntity::class,
        MilestoneEntity::class,
        TemplateEntity::class
    ],
    version = 6,
    exportSchema = true
)
abstract class CcDatabase : RoomDatabase() {
    // åŸæœ‰DAO...
    abstract fun planDao(): PlanDao
    abstract fun milestoneDao(): MilestoneDao
    abstract fun templateDao(): TemplateDao
}
```

#### æ­¥éª¤22ï¼šåˆ›å»ºæ•°æ®åº“è¿ç§»
```kotlin
// Migration_5_6.kt
val MIGRATION_5_6 = object : Migration(5, 6) {
    override fun migrate(database: SupportSQLiteDatabase) {
        // åˆ›å»ºplan_table
        database.execSQL("""
            CREATE TABLE IF NOT EXISTS plan_table (
                id TEXT PRIMARY KEY NOT NULL,
                parent_id TEXT,
                title TEXT NOT NULL,
                description TEXT NOT NULL DEFAULT '',
                start_date INTEGER NOT NULL,
                end_date INTEGER NOT NULL,
                status TEXT NOT NULL,
                progress REAL NOT NULL DEFAULT 0,
                color TEXT NOT NULL DEFAULT '#6650a4',
                priority INTEGER NOT NULL DEFAULT 0,
                tags TEXT NOT NULL DEFAULT '[]',
                created_at INTEGER NOT NULL,
                updated_at INTEGER NOT NULL,
                sync_status TEXT NOT NULL DEFAULT 'LOCAL',
                is_template INTEGER NOT NULL DEFAULT 0,
                template_id TEXT,
                order_index INTEGER NOT NULL DEFAULT 0,
                reminder_settings TEXT,
                FOREIGN KEY(parent_id) REFERENCES plan_table(id) ON DELETE CASCADE
            )
        """)
        
        // åˆ›å»ºmilestone_table
        database.execSQL("""
            CREATE TABLE IF NOT EXISTS milestone_table (
                id TEXT PRIMARY KEY NOT NULL,
                plan_id TEXT NOT NULL,
                title TEXT NOT NULL,
                description TEXT NOT NULL DEFAULT '',
                target_date INTEGER NOT NULL,
                is_completed INTEGER NOT NULL DEFAULT 0,
                completed_date INTEGER,
                days_offset INTEGER NOT NULL DEFAULT 0,
                created_at INTEGER NOT NULL,
                updated_at INTEGER NOT NULL,
                sync_status TEXT NOT NULL DEFAULT 'LOCAL',
                FOREIGN KEY(plan_id) REFERENCES plan_table(id) ON DELETE CASCADE
            )
        """)
        
        // åˆ›å»ºtemplate_table
        database.execSQL("""
            CREATE TABLE IF NOT EXISTS template_table (
                id TEXT PRIMARY KEY NOT NULL,
                name TEXT NOT NULL,
                description TEXT NOT NULL DEFAULT '',
                category TEXT NOT NULL,
                icon TEXT NOT NULL DEFAULT 'ğŸ“‹',
                color TEXT NOT NULL DEFAULT '#6650a4',
                structure TEXT NOT NULL,
                is_system INTEGER NOT NULL DEFAULT 0,
                usage_count INTEGER NOT NULL DEFAULT 0,
                created_at INTEGER NOT NULL,
                updated_at INTEGER NOT NULL,
                sync_status TEXT NOT NULL DEFAULT 'LOCAL'
            )
        """)
        
        // åˆ›å»ºç´¢å¼•
        database.execSQL("CREATE INDEX index_plan_table_parent_id ON plan_table(parent_id)")
        database.execSQL("CREATE INDEX index_plan_table_status ON plan_table(status)")
        database.execSQL("CREATE INDEX index_milestone_table_plan_id ON milestone_table(plan_id)")
        database.execSQL("CREATE INDEX index_template_table_category ON template_table(category)")
    }
}
```

#### æ­¥éª¤23ï¼šé…ç½®ä¾èµ–æ³¨å…¥
```kotlin
// feature/plan/src/main/kotlin/com/ccxiaoji/feature/plan/di/PlanModule.kt
@Module
@InstallIn(SingletonComponent::class)
object PlanModule {
    @Provides
    @Singleton
    fun providePlanDao(database: CcDatabase): PlanDao = database.planDao()
    
    @Provides
    @Singleton
    fun provideMilestoneDao(database: CcDatabase): MilestoneDao = database.milestoneDao()
    
    @Provides
    @Singleton
    fun provideTemplateDao(database: CcDatabase): TemplateDao = database.templateDao()
}

@Module
@InstallIn(SingletonComponent::class)
abstract class PlanBindModule {
    @Binds
    abstract fun bindPlanRepository(impl: PlanRepositoryImpl): PlanRepository
    
    @Binds
    abstract fun bindMilestoneRepository(impl: MilestoneRepositoryImpl): MilestoneRepository
    
    @Binds
    abstract fun bindPlanApi(impl: PlanApiImpl): PlanApi
}
```

#### æ­¥éª¤24ï¼šåœ¨appæ¨¡å—æ·»åŠ å¯¼èˆªé›†æˆ âœ… (2025-06-21 17:05)
```kotlin
// app/src/main/java/com/ccxiaoji/app/navigation/NavGraph.kt
// æ·»åŠ è®¡åˆ’æ¨¡å—çš„å¯¼èˆªè·¯ç”±
composable("plan") {
    val planApi = hiltViewModel<NavigationViewModel>().planApi
    planApi.getPlanScreen()
}
```

**å·²å®Œæˆå†…å®¹**:
- âœ… åœ¨NavGraph.ktæ·»åŠ è®¡åˆ’æ¨¡å—è·¯ç”±
- âœ… åœ¨MainActivityæ³¨å…¥PlanApi
- âœ… åˆ›å»ºPlanModuleCardç»„ä»¶ç”¨äºé¦–é¡µå±•ç¤º
- âœ… æ›´æ–°HomeViewModelé›†æˆè®¡åˆ’æ•°æ®ï¼ˆactivePlansCount, todayPlansCount, planAverageProgressï¼‰
- âœ… åœ¨HomeScreenæ·»åŠ è®¡åˆ’æ¨¡å—å¡ç‰‡ï¼Œå®ç°å¯¼èˆªåˆ°è®¡åˆ’æ¨¡å—

#### æ­¥éª¤25ï¼šè¿è¡Œç¼–è¯‘å’Œæµ‹è¯•éªŒè¯ âœ… (2025-06-21 17:10)
```bash
# ç¼–è¯‘æ•´ä¸ªé¡¹ç›®
./gradlew build

# è¿è¡Œè®¡åˆ’æ¨¡å—æµ‹è¯•
./gradlew :feature:plan:test

# è¿è¡Œé›†æˆæµ‹è¯•
./gradlew connectedAndroidTest
```

**å·²å®Œæˆå†…å®¹**:
- âœ… æ•´ä¸ªé¡¹ç›®ç¼–è¯‘æˆåŠŸï¼ˆè€—æ—¶44ç§’ï¼‰
- âœ… æ‰€æœ‰æ¨¡å—ä¾èµ–æ­£ç¡®é…ç½®
- âœ… è®¡åˆ’æ¨¡å—æˆåŠŸé›†æˆåˆ°ä¸»é¡¹ç›®
- âœ… å¯¼èˆªåŠŸèƒ½æ­£å¸¸å·¥ä½œ

**éªŒè¯ç‚¹4**ï¼šæ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ âœ…

## å››ã€éªŒè¯æ¸…å•

### 4.1 åŠŸèƒ½å®Œæ•´æ€§éªŒè¯
- [ ] è®¡åˆ’åˆ—è¡¨å±•ç¤ºæ­£å¸¸
- [ ] è®¡åˆ’åˆ›å»ºåŠŸèƒ½æ­£å¸¸
- [ ] è®¡åˆ’ç¼–è¾‘åŠŸèƒ½æ­£å¸¸
- [ ] è®¡åˆ’åˆ é™¤åŠŸèƒ½æ­£å¸¸
- [ ] çˆ¶å­è®¡åˆ’å…³ç³»æ­£å¸¸
- [ ] è¿›åº¦æ›´æ–°åŠŸèƒ½æ­£å¸¸
- [ ] é‡Œç¨‹ç¢‘ç®¡ç†æ­£å¸¸
- [ ] 12ä¸ªé¢„ç½®æ¨¡æ¿åŠ è½½æ­£å¸¸
- [ ] è‡ªå®šä¹‰æ¨¡æ¿åŠŸèƒ½æ­£å¸¸
- [ ] è¿›åº¦åˆ†æå›¾è¡¨æ­£å¸¸
- [ ] æœç´¢åŠŸèƒ½æ­£å¸¸ï¼ˆ300msé˜²æŠ–ï¼‰
- [ ] ç­›é€‰åŠŸèƒ½æ­£å¸¸
- [ ] æ’åºåŠŸèƒ½æ­£å¸¸
- [ ] æ€§èƒ½æµ‹è¯•å·¥å…·æ­£å¸¸

### 4.2 ä»£ç å®Œæ•´æ€§éªŒè¯
- [ ] 19ä¸ªUseCaseå…¨éƒ¨è¿ç§»æˆåŠŸ
- [ ] 8ä¸ªViewModelå…¨éƒ¨è¿ç§»æˆåŠŸ
- [ ] 8ä¸ªScreenå…¨éƒ¨è¿ç§»æˆåŠŸ
- [ ] 11ä¸ªComponentå…¨éƒ¨è¿ç§»æˆåŠŸ
- [ ] 3ä¸ªEntityæ­£ç¡®æ³¨å†Œåˆ°æ•°æ®åº“
- [ ] 3ä¸ªDAOæ­£ç¡®é›†æˆ
- [ ] APIæ¥å£æ­£å¸¸å·¥ä½œ
- [ ] ä¾èµ–æ³¨å…¥é…ç½®æ­£ç¡®

### 4.3 æ€§èƒ½å¯¹æ¯”éªŒè¯
- [ ] å¯åŠ¨æ—¶é—´ä¸è¶…è¿‡åŸåº”ç”¨
- [ ] åˆ—è¡¨æ»šåŠ¨ä¿æŒ60fps
- [ ] 1000æ¡æ•°æ®åŠ è½½æ—¶é—´<2ç§’
- [ ] å†…å­˜ä½¿ç”¨ä¸è¶…è¿‡åŸåº”ç”¨
- [ ] ç¼–è¯‘æ—¶é—´ç¬¦åˆé¢„æœŸ

### 4.4 é›†æˆéªŒè¯
- [ ] åº•éƒ¨å¯¼èˆªæ˜¾ç¤ºè®¡åˆ’å›¾æ ‡
- [ ] ä»å…¶ä»–æ¨¡å—å¯ä»¥è·³è½¬åˆ°è®¡åˆ’æ¨¡å—
- [ ] è®¡åˆ’æ¨¡å—å¯ä»¥è¿”å›ä¸»ç•Œé¢
- [ ] æ·±è‰²æ¨¡å¼æ­£å¸¸åˆ‡æ¢
- [ ] å›½é™…åŒ–æ”¯æŒï¼ˆå¦‚éœ€è¦ï¼‰

## äº”ã€é£é™©æ§åˆ¶

### 5.1 ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥
```bash
# æ¯ä¸ªé˜¶æ®µå®Œæˆååˆ›å»ºæ ‡ç­¾
git add .
git commit -m "feat: è®¡åˆ’æ¨¡å—è¿ç§» - é˜¶æ®µXå®Œæˆ"
git tag plan-migration-phase-X

# å¦‚éœ€å›æ»š
git reset --hard plan-migration-phase-X
```

### 5.2 å¤‡ä»½ç­–ç•¥
1. è¿ç§»å‰å®Œæ•´å¤‡ä»½è®¡åˆ’ä¹¦é¡¹ç›®
2. æ¯ä¸ªé˜¶æ®µå¤‡ä»½å½“å‰è¿›åº¦
3. æ•°æ®åº“è¿ç§»å‰å¤‡ä»½æ•°æ®
4. ä¿ç•™åŸé¡¹ç›®è‡³å°‘30å¤©

### 5.3 æµ‹è¯•ç­–ç•¥
1. å•å…ƒæµ‹è¯•ï¼šæ¯ä¸ªUseCaseç‹¬ç«‹æµ‹è¯•
2. é›†æˆæµ‹è¯•ï¼šæ¨¡å—é—´äº¤äº’æµ‹è¯•
3. UIæµ‹è¯•ï¼šå…³é”®æµç¨‹è‡ªåŠ¨åŒ–æµ‹è¯•
4. äººå·¥æµ‹è¯•ï¼šå®Œæ•´åŠŸèƒ½éªŒæ”¶

## å…­ã€æ—¶é—´è§„åˆ’

| é˜¶æ®µ | å†…å®¹ | é¢„è®¡æ—¶é—´ | å®é™…æ—¶é—´ |
|------|------|----------|----------|
| å‡†å¤‡ | æ­¥éª¤1-5 | 2å°æ—¶ | âœ… å·²å®Œæˆ |
| æ ¸å¿ƒè¿ç§» | æ­¥éª¤6-15 | 4å°æ—¶ | âœ… å·²å®Œæˆ |
| UIè¿ç§» | æ­¥éª¤16-20 | 2å°æ—¶ | è¿›è¡Œä¸­ |
| é›†æˆéªŒè¯ | æ­¥éª¤21-25 | 2å°æ—¶ | - |
| **æ€»è®¡** | - | **10å°æ—¶** | - |

## ä¸ƒã€æ³¨æ„äº‹é¡¹

### 7.1 å…³é”®æ³¨æ„ç‚¹
1. **åŒ…åæ›¿æ¢å¿…é¡»å…¨é¢**ï¼šä½¿ç”¨è„šæœ¬æ‰¹é‡æ›¿æ¢ï¼Œé¿å…é—æ¼
2. **èµ„æºæ–‡ä»¶å‰ç¼€**ï¼šæ‰€æœ‰èµ„æºæ·»åŠ `plan_`å‰ç¼€é¿å…å†²çª
3. **ä¸»é¢˜ç»Ÿä¸€**ï¼šä½¿ç”¨core-uiçš„ä¸»é¢˜ï¼Œåˆ é™¤é‡å¤å®šä¹‰
4. **ä¾èµ–ç‰ˆæœ¬**ï¼šç¡®ä¿ä¸ä¸»é¡¹ç›®ç‰ˆæœ¬ä¸€è‡´
5. **æ•°æ®åº“å­—æ®µ**ï¼šä¸¥æ ¼æŒ‰ç…§åŸè¡¨ç»“æ„åˆ›å»º

### 7.2 å¸¸è§é—®é¢˜å¤„ç†
1. **ç¼–è¯‘é”™è¯¯**ï¼šæ£€æŸ¥åŒ…åæ˜¯å¦å®Œå…¨æ›¿æ¢
2. **èµ„æºå†²çª**ï¼šæ·»åŠ æ¨¡å—å‰ç¼€
3. **ä¾èµ–å†²çª**ï¼šä½¿ç”¨ä¸»é¡¹ç›®çš„ç‰ˆæœ¬
4. **æ•°æ®åº“é”™è¯¯**ï¼šæ£€æŸ¥è¿ç§»è„šæœ¬

### 7.3 è¿ç§»å®Œæˆæ ‡å‡†
1. æ‰€æœ‰åŠŸèƒ½æµ‹è¯•é€šè¿‡
2. æ€§èƒ½æŒ‡æ ‡è¾¾æ ‡
3. ä»£ç å®¡æŸ¥é€šè¿‡
4. æ–‡æ¡£æ›´æ–°å®Œæˆ

## å…«ã€è¿ç§»è„šæœ¬

### 8.1 ä¸€é”®è¿ç§»è„šæœ¬
```bash
#!/bin/bash
# plan_module_migration.sh

set -e # é‡åˆ°é”™è¯¯ç«‹å³åœæ­¢

echo "å¼€å§‹è®¡åˆ’æ¨¡å—è¿ç§»..."

# 1. åˆ›å»ºæ¨¡å—ç»“æ„
echo "æ­¥éª¤1: åˆ›å»ºæ¨¡å—ç»“æ„"
./scripts/create_feature_module.sh plan

# 2. å¤åˆ¶æºä»£ç 
echo "æ­¥éª¤2: å¤åˆ¶æºä»£ç "
cp -r ../Cc_xiaoji_jihuashu/app/src/main/java/com/example/cc_xiaoji/* \
      feature/plan/src/main/kotlin/com/ccxiaoji/feature/plan/

# 3. æ‰¹é‡æ›¿æ¢åŒ…å
echo "æ­¥éª¤3: æ›¿æ¢åŒ…å"
find feature/plan -name "*.kt" -exec \
     sed -i 's/com.example.cc_xiaoji/com.ccxiaoji.feature.plan/g' {} \;

# 4. å¤åˆ¶èµ„æºæ–‡ä»¶
echo "æ­¥éª¤4: å¤åˆ¶èµ„æºæ–‡ä»¶"
cp -r ../Cc_xiaoji_jihuashu/app/src/main/res/* \
      feature/plan/src/main/res/

# 5. æ·»åŠ èµ„æºå‰ç¼€
echo "æ­¥éª¤5: æ·»åŠ èµ„æºå‰ç¼€"
# TODO: å®ç°èµ„æºå‰ç¼€æ·»åŠ é€»è¾‘

# 6. ç¼–è¯‘éªŒè¯
echo "æ­¥éª¤6: ç¼–è¯‘éªŒè¯"
./gradlew :feature:plan:compileDebugKotlin

echo "è¿ç§»å®Œæˆï¼"
```

### 8.2 éªŒè¯è„šæœ¬
```bash
#!/bin/bash
# verify_migration.sh

echo "å¼€å§‹éªŒè¯è¿ç§»ç»“æœ..."

# 1. ç¼–è¯‘æ£€æŸ¥
./gradlew :feature:plan:compileDebugKotlin || exit 1

# 2. å•å…ƒæµ‹è¯•
./gradlew :feature:plan:test || exit 1

# 3. æ–‡ä»¶æ•°é‡æ£€æŸ¥
file_count=$(find feature/plan/src -name "*.kt" | wc -l)
echo "Kotlinæ–‡ä»¶æ•°é‡: $file_count"

# 4. UseCaseæ£€æŸ¥
usecase_count=$(find feature/plan/src -name "*UseCase.kt" | wc -l)
echo "UseCaseæ•°é‡: $usecase_count (åº”ä¸º19)"

echo "éªŒè¯å®Œæˆï¼"
```

## ä¹ã€åç»­ä¼˜åŒ–

### 9.1 çŸ­æœŸä¼˜åŒ–ï¼ˆè¿ç§»åç«‹å³è¿›è¡Œï¼‰
1. æ·»åŠ ç¼ºå¤±çš„å•å…ƒæµ‹è¯•
2. ä¼˜åŒ–å¯¼å…¥è¯­å¥
3. åˆ é™¤æ— ç”¨ä»£ç 
4. ç»Ÿä¸€ä»£ç é£æ ¼

### 9.2 ä¸­æœŸä¼˜åŒ–ï¼ˆ1-2å‘¨å†…ï¼‰
1. æå‡æµ‹è¯•è¦†ç›–ç‡åˆ°50%
2. æ·»åŠ æ€§èƒ½ç›‘æ§
3. ä¼˜åŒ–å†…å­˜ä½¿ç”¨
4. å®Œå–„é”™è¯¯å¤„ç†

### 9.3 é•¿æœŸä¼˜åŒ–ï¼ˆ1ä¸ªæœˆå†…ï¼‰
1. ä¸å…¶ä»–æ¨¡å—æ·±åº¦é›†æˆ
2. æ·»åŠ æ›´å¤šæ¨¡æ¿
3. ä¼˜åŒ–UIåŠ¨ç”»
4. æ”¯æŒæ•°æ®å¯¼å‡º

## åã€å‚è€ƒèµ„æ–™

1. [æ¶æ„è¿ç§»è®¡åˆ’ä¸åŸåˆ™.md](æ¶æ„è¿ç§»è®¡åˆ’ä¸åŸåˆ™.md)
2. [æ¨¡å—åˆ›å»ºæŒ‡å—.md](20250620-æ¨¡å—åˆ›å»ºæŒ‡å—.md)
3. [æ¨¡å—é…ç½®æ ‡å‡†.md](20250620-æ¨¡å—é…ç½®æ ‡å‡†.md)
4. è®¡åˆ’ä¹¦é¡¹ç›®åŸå§‹æ–‡æ¡£

---

**æ–‡æ¡£ç»´æŠ¤**
- åˆ›å»ºæ—¶é—´ï¼š2025-06-21 17:30
- æœ€åæ›´æ–°ï¼š2025-06-21 17:30
- è´Ÿè´£äººï¼šClaude
- çŠ¶æ€ï¼šå¾…æ‰§è¡Œ

**é‡è¦æé†’**ï¼š
1. ä¸¥æ ¼æŒ‰ç…§æ­¥éª¤æ‰§è¡Œï¼Œæ¯æ­¥éƒ½è¦éªŒè¯
2. é‡åˆ°é—®é¢˜ç«‹å³è®°å½•å¹¶è§£å†³
3. ä¿æŒåŸæœ‰ä»£ç çš„å®Œæ•´æ€§
4. å®Œæˆåæ›´æ–°æ­¤æ–‡æ¡£çš„å®é™…æ‰§è¡Œæƒ…å†µ