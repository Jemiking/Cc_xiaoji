# CCå°è®°æ¶æ„é‡æ„è®¾è®¡æ–‡æ¡£

## 1. é¡¹ç›®å®šä½

CCå°è®°æ˜¯ä¸€ä¸ª**ç”Ÿæ´»ç®¡ç†è¶…çº§APP**ï¼ˆSuper Appï¼‰ï¼Œé›†æˆäº†å¤šä¸ªç”Ÿæ´»ç®¡ç†åŠŸèƒ½æ¨¡å—ï¼Œå¹¶ä¸”æœªæ¥è¿˜ä¼šæŒç»­æ·»åŠ æ–°çš„åŠŸèƒ½æ¨¡å—ã€‚

## 2. ç°æœ‰æ¶æ„é—®é¢˜

å½“å‰çš„ä¼ ç»Ÿåˆ†å±‚æ¶æ„ï¼ˆdata/domain/presentationï¼‰å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š

1. **å¯æ‰©å±•æ€§å·®**ï¼šæ‰€æœ‰åŠŸèƒ½æ¨¡å—çš„ä»£ç æ··åœ¨ä¸€èµ·ï¼Œæ·»åŠ æ–°æ¨¡å—ä¼šè®©å„å±‚è¶Šæ¥è¶Šè‡ƒè‚¿
2. **è¾¹ç•Œä¸æ¸…æ™°**ï¼šä¸åŒåŠŸèƒ½æ¨¡å—ä¹‹é—´æ²¡æœ‰æ˜ç¡®çš„è¾¹ç•Œï¼Œå®¹æ˜“äº§ç”Ÿè€¦åˆ
3. **å›¢é˜Ÿåä½œå›°éš¾**ï¼šå¤šäººå¼€å‘ä¸åŒæ¨¡å—æ—¶å®¹æ˜“äº§ç”Ÿä»£ç å†²çª
4. **ç»´æŠ¤æˆæœ¬é«˜**ï¼šä¿®æ”¹ä¸€ä¸ªæ¨¡å—å¯èƒ½å½±å“åˆ°å…¶ä»–æ¨¡å—
5. **æµ‹è¯•å›°éš¾**ï¼šæ— æ³•ç‹¬ç«‹æµ‹è¯•å•ä¸ªåŠŸèƒ½æ¨¡å—

## 3. æ¨èæ¶æ„ï¼šåŸºäºä¸šåŠ¡é¢†åŸŸçš„æ¨¡å—åŒ–æ¶æ„

### 3.1 æ ¸å¿ƒè®¾è®¡ç†å¿µ

é‡‡ç”¨**é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆDDDï¼‰**æ€æƒ³ï¼ŒæŒ‰ç…§**ç”Ÿæ´»é¢†åŸŸ**æ¥åˆ’åˆ†æ¨¡å—ï¼Œè€Œä¸æ˜¯æŒ‰åŠŸèƒ½ç»†åˆ†ã€‚æ¯ä¸ªé¡¶çº§featureä»£è¡¨ä¸€ä¸ªç”Ÿæ´»é¢†åŸŸï¼Œæ¯ä¸ªæ¨¡å—æ˜¯ä¸€ä¸ªæœ‰ç•Œä¸Šä¸‹æ–‡ï¼ˆBounded Contextï¼‰ã€‚

### 3.2 ç›®å½•ç»“æ„è®¾è®¡

```
Cc_xiaoji/
â”œâ”€â”€ app/                              # ä¸»åº”ç”¨æ¨¡å—ï¼ˆå£³å·¥ç¨‹ï¼‰
â”‚   â”œâ”€â”€ src/main/
â”‚   â”‚   â”œâ”€â”€ CcXiaoJiApplication.kt
â”‚   â”‚   â”œâ”€â”€ MainActivity.kt
â”‚   â”‚   â”œâ”€â”€ navigation/              # å…¨å±€å¯¼èˆª
â”‚   â”‚   â”‚   â”œâ”€â”€ AppNavGraph.kt      # ä¸»å¯¼èˆªå›¾
â”‚   â”‚   â”‚   â””â”€â”€ BottomNavigation.kt # åº•éƒ¨å¯¼èˆª
â”‚   â”‚   â””â”€â”€ home/                    # é¦–é¡µèšåˆ
â”‚   â”‚       â””â”€â”€ HomeScreen.kt        # å„æ¨¡å—å…¥å£å±•ç¤º
â”‚
â”œâ”€â”€ core/                            # æ ¸å¿ƒåŸºç¡€è®¾æ–½
â”‚   â”œâ”€â”€ common/                      # å…¬å…±åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ base/                    # åŸºç±»
â”‚   â”‚   â”œâ”€â”€ utils/                   # å·¥å…·ç±»
â”‚   â”‚   â””â”€â”€ extensions/              # æ‰©å±•å‡½æ•°
â”‚   â”œâ”€â”€ data/                        # æ ¸å¿ƒæ•°æ®å±‚
â”‚   â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â”‚   â”œâ”€â”€ CcDatabase.kt       # ä¸»æ•°æ®åº“
â”‚   â”‚   â”‚   â”œâ”€â”€ Converters.kt
â”‚   â”‚   â”‚   â””â”€â”€ migrations/
â”‚   â”‚   â”œâ”€â”€ datastore/               # ç”¨æˆ·åå¥½è®¾ç½®
â”‚   â”‚   â””â”€â”€ network/                 # ç½‘ç»œé…ç½®
â”‚   â”œâ”€â”€ ui/                          # æ ¸å¿ƒUI
â”‚   â”‚   â”œâ”€â”€ theme/                   # ä¸»é¢˜ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ components/              # é€šç”¨ç»„ä»¶
â”‚   â”‚   â””â”€â”€ widgets/                 # é€šç”¨å°éƒ¨ä»¶
â”‚   â””â”€â”€ domain/                      # æ ¸å¿ƒé¢†åŸŸ
â”‚       â”œâ”€â”€ model/                   # è·¨æ¨¡å—å…±äº«æ¨¡å‹
â”‚       â””â”€â”€ repository/              # æ ¸å¿ƒä»“åº“æ¥å£
â”‚
â”œâ”€â”€ feature/                         # ä¸šåŠ¡åŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ ledger/                      # ğŸ’° è®°è´¦æ¨¡å—ï¼ˆè´¢åŠ¡ç®¡ç†é¢†åŸŸï¼‰
â”‚   â”‚   â”œâ”€â”€ api/                     # æ¨¡å—å¯¹å¤–æ¥å£
â”‚   â”‚   â”œâ”€â”€ data/                    # æ•°æ®å±‚
â”‚   â”‚   â”œâ”€â”€ domain/                  # é¢†åŸŸå±‚
â”‚   â”‚   â””â”€â”€ presentation/            # å±•ç¤ºå±‚
â”‚   â”œâ”€â”€ todo/                        # âœ… å¾…åŠæ¨¡å—ï¼ˆä»»åŠ¡ç®¡ç†é¢†åŸŸï¼‰
â”‚   â”œâ”€â”€ habit/                       # ğŸ¯ ä¹ æƒ¯æ¨¡å—ï¼ˆä¹ æƒ¯å…»æˆé¢†åŸŸï¼‰
â”‚   â”œâ”€â”€ period/                      # ğŸŒ¸ ç»æœŸæ¨¡å—ï¼ˆå¥³æ€§å¥åº·é¢†åŸŸï¼‰- æœªæ¥
â”‚   â”œâ”€â”€ schedule/                    # ğŸ“… æ’ç­æ¨¡å—ï¼ˆå·¥ä½œç®¡ç†é¢†åŸŸï¼‰- æœªæ¥
â”‚   â””â”€â”€ diary/                       # ğŸ“” æ—¥è®°æ¨¡å—ï¼ˆä¸ªäººè®°å½•é¢†åŸŸï¼‰- æœªæ¥
â”‚
â”œâ”€â”€ shared/                          # å…±äº«ä¸šåŠ¡æ¨¡å—
â”‚   â”œâ”€â”€ user/                        # ç”¨æˆ·æ¨¡å—
â”‚   â”œâ”€â”€ sync/                        # åŒæ­¥æ¨¡å—
â”‚   â”œâ”€â”€ backup/                      # å¤‡ä»½æ¨¡å—
â”‚   â”œâ”€â”€ notification/                # é€šçŸ¥æ¨¡å—
â”‚   â””â”€â”€ analytics/                   # æ•°æ®åˆ†ææ¨¡å—
â”‚
â””â”€â”€ build-logic/                     # æ„å»ºé€»è¾‘
    â”œâ”€â”€ convention/                  # æ„å»ºçº¦å®š
    â””â”€â”€ dependencies/                # ä¾èµ–ç®¡ç†
```

### 3.3 è®°è´¦æ¨¡å—è¯¦ç»†è®¾è®¡

è®°è´¦æ¨¡å—ä½œä¸ºæœ€å¤æ‚çš„æ¨¡å—ï¼ŒåŒ…å«å®Œæ•´çš„è´¢åŠ¡ç®¡ç†åŠŸèƒ½ï¼š

```
feature-ledger/
â”œâ”€â”€ api/                    
â”‚   â””â”€â”€ LedgerApi.kt                 # æ¨¡å—å¯¹å¤–æ¥å£
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ local/
â”‚   â”‚   â”œâ”€â”€ dao/                     # è´¦æˆ·ã€äº¤æ˜“ã€é¢„ç®—ç­‰DAO
â”‚   â”‚   â””â”€â”€ entity/                  # è´¦æˆ·ã€äº¤æ˜“ã€é¢„ç®—ç­‰å®ä½“
â”‚   â””â”€â”€ repository/                  # ä»“åº“å®ç°
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ model/                       # é¢†åŸŸæ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ Account.kt              # è´¦æˆ·ï¼ˆåŒ…æ‹¬ä¿¡ç”¨å¡ï¼‰
â”‚   â”‚   â”œâ”€â”€ Transaction.kt          # äº¤æ˜“
â”‚   â”‚   â”œâ”€â”€ Budget.kt               # é¢„ç®—
â”‚   â”‚   â”œâ”€â”€ SavingsGoal.kt          # å‚¨è“„ç›®æ ‡
â”‚   â”‚   â””â”€â”€ Category.kt             # åˆ†ç±»
â”‚   â””â”€â”€ usecase/                     # ç”¨ä¾‹
â”‚       â”œâ”€â”€ account/                 # è´¦æˆ·ç›¸å…³ç”¨ä¾‹
â”‚       â”œâ”€â”€ transaction/             # äº¤æ˜“ç›¸å…³ç”¨ä¾‹
â”‚       â”œâ”€â”€ budget/                  # é¢„ç®—ç›¸å…³ç”¨ä¾‹
â”‚       â”œâ”€â”€ creditcard/              # ä¿¡ç”¨å¡ç›¸å…³ç”¨ä¾‹
â”‚       â””â”€â”€ savings/                 # å‚¨è“„ç›®æ ‡ç›¸å…³ç”¨ä¾‹
â””â”€â”€ presentation/
    â”œâ”€â”€ navigation/                  # è®°è´¦æ¨¡å—å†…éƒ¨å¯¼èˆª
    â”œâ”€â”€ account/                     # è´¦æˆ·ç®¡ç†ç•Œé¢
    â”œâ”€â”€ transaction/                 # äº¤æ˜“è®°å½•ç•Œé¢
    â”œâ”€â”€ budget/                      # é¢„ç®—ç®¡ç†ç•Œé¢
    â”œâ”€â”€ creditcard/                  # ä¿¡ç”¨å¡ç®¡ç†ç•Œé¢
    â”œâ”€â”€ savings/                     # å‚¨è“„ç›®æ ‡ç•Œé¢
    â”œâ”€â”€ statistics/                  # ç»Ÿè®¡åˆ†æç•Œé¢
    â””â”€â”€ viewmodel/                   # æ‰€æœ‰ç›¸å…³ViewModel
```

### 3.4 æ¨¡å—é—´é€šä¿¡æœºåˆ¶

1. **å¯¼èˆªé€šä¿¡**ï¼šä½¿ç”¨Navigationç»„ä»¶è¿›è¡Œæ¨¡å—é—´å¯¼èˆª
2. **æ•°æ®é€šä¿¡**ï¼šé€šè¿‡å®šä¹‰å¥½çš„APIæ¥å£è¿›è¡Œæ•°æ®äº¤æ¢
3. **äº‹ä»¶é€šä¿¡**ï¼šä½¿ç”¨äº‹ä»¶æ€»çº¿æˆ–SharedViewModel

ç¤ºä¾‹ï¼š
```kotlin
// æ¨¡å—APIæ¥å£
interface LedgerApi {
    // ä¾›å…¶ä»–æ¨¡å—è°ƒç”¨çš„æ¥å£
    suspend fun getTodayExpense(): Double
    suspend fun getTotalBalance(): Double
    fun navigateToAddTransaction()
}

// é¦–é¡µèšåˆå„æ¨¡å—æ•°æ®
class HomeViewModel(
    private val ledgerApi: LedgerApi,
    private val todoApi: TodoApi,
    private val habitApi: HabitApi
) : ViewModel() {
    fun loadDashboard() {
        // èšåˆå„æ¨¡å—æ•°æ®å±•ç¤º
    }
}
```

### 3.5 æ•°æ®åº“è®¾è®¡ç­–ç•¥

é‡‡ç”¨**å•ä¸€æ•°æ®åº“**æ–¹æ¡ˆï¼Œæ‰€æœ‰æ¨¡å—å…±äº«åŒä¸€ä¸ªæ•°æ®åº“ï¼Œä½†é€šè¿‡DAOå±‚è¿›è¡Œéš”ç¦»ï¼š

```kotlin
@Database(
    entities = [
        // Useræ¨¡å—
        UserEntity::class,
        
        // Ledgeræ¨¡å—
        AccountEntity::class,
        TransactionEntity::class,
        CategoryEntity::class,
        BudgetEntity::class,
        SavingsGoalEntity::class,
        
        // Todoæ¨¡å—
        TaskEntity::class,
        
        // Habitæ¨¡å—
        HabitEntity::class,
        HabitRecordEntity::class,
    ],
    version = 1
)
abstract class CcDatabase : RoomDatabase() {
    // å„æ¨¡å—çš„DAO
}
```

## 4. æ¶æ„ä¼˜åŠ¿

1. **æ¸…æ™°çš„ä¸šåŠ¡è¾¹ç•Œ**ï¼šæŒ‰ç”Ÿæ´»é¢†åŸŸåˆ’åˆ†ï¼Œç¬¦åˆç”¨æˆ·å¿ƒæ™ºæ¨¡å‹
2. **é«˜å†…èšä½è€¦åˆ**ï¼šç›¸å…³åŠŸèƒ½èšåˆåœ¨ä¸€èµ·ï¼Œæ¨¡å—é—´ä¾èµ–æœ€å°åŒ–
3. **æ˜“äºæ‰©å±•**ï¼šæ–°å¢ç”Ÿæ´»ç®¡ç†é¢†åŸŸåªéœ€æ·»åŠ æ–°çš„featureæ¨¡å—
4. **å›¢é˜Ÿåä½œå‹å¥½**ï¼šä¸åŒå›¢é˜Ÿå¯ä»¥ç‹¬ç«‹å¼€å‘ä¸åŒé¢†åŸŸ
5. **æ€§èƒ½ä¼˜åŒ–æ½œåŠ›**ï¼šæœªæ¥å¯ä»¥æŒ‰éœ€åŠ è½½æ¨¡å—ï¼Œå®ç°åŠ¨æ€åŒ–

## 5. ä¾èµ–å…³ç³»åŸåˆ™

```
app â†’ feature modules â†’ shared modules â†’ core modules
```

- appæ¨¡å—åªè´Ÿè´£ç»„è£…å„ä¸ªåŠŸèƒ½æ¨¡å—
- featureæ¨¡å—ä¾èµ–coreå’Œsharedæ¨¡å—
- featureæ¨¡å—ä¹‹é—´ä¸èƒ½ç›¸äº’ä¾èµ–
- sharedæ¨¡å—å¯ä»¥ä¾èµ–coreæ¨¡å—
- coreæ¨¡å—ä¸ä¾èµ–ä»»ä½•å…¶ä»–æ¨¡å—